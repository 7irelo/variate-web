(()=>{var As=Object.create;var Ne=Object.defineProperty;var Is=Object.getOwnPropertyDescriptor;var Rs=Object.getOwnPropertyNames,jr=Object.getOwnPropertySymbols,Hs=Object.getPrototypeOf,zr=Object.prototype.hasOwnProperty,Ms=Object.prototype.propertyIsEnumerable;var Ft=(t,e,r)=>e in t?Ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gr=(t,e)=>{for(var r in e||(e={}))zr.call(e,r)&&Ft(t,r,e[r]);if(jr)for(var r of jr(e))Ms.call(e,r)&&Ft(t,r,e[r]);return t};var Os=t=>Ne(t,"__esModule",{value:!0});var Bs=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ds=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Rs(e))!zr.call(t,i)&&i!=="default"&&Ne(t,i,{get:()=>e[i],enumerable:!(r=Is(e,i))||r.enumerable});return t},Ns=t=>Ds(Os(Ne(t!=null?As(Hs(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var C=(t,e,r)=>(Ft(t,typeof e!="symbol"?e+"":e,r),r);var mi=Bs((id,$e)=>{var Wr,Xr,Zr,Kr,Jr,Yr,ei,ti,ri,qe,Qt,ii,si,ai,be,ni,oi,li,di,ci,ui,hi,pi,fi,Ue;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(i){t(r(e,r(i)))}):typeof $e=="object"&&typeof $e.exports=="object"?t(r(e,r($e.exports))):t(r(e));function r(i,s){return i!==e&&(typeof Object.create=="function"?Object.defineProperty(i,"__esModule",{value:!0}):i.__esModule=!0),function(a,n){return i[a]=s?s(a,n):n}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])};Wr=function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},Xr=Object.assign||function(i){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},Zr=function(i,s){var a={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&s.indexOf(n)<0&&(a[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(i);o<n.length;o++)s.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(a[n[o]]=i[n[o]]);return a},Kr=function(i,s,a,n){var o=arguments.length,l=o<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,s,a,n);else for(var d=i.length-1;d>=0;d--)(c=i[d])&&(l=(o<3?c(l):o>3?c(s,a,l):c(s,a))||l);return o>3&&l&&Object.defineProperty(s,a,l),l},Jr=function(i,s){return function(a,n){s(a,n,i)}},Yr=function(i,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,s)},ei=function(i,s,a,n){function o(l){return l instanceof a?l:new a(function(c){c(l)})}return new(a||(a=Promise))(function(l,c){function d(v){try{p(n.next(v))}catch(y){c(y)}}function h(v){try{p(n.throw(v))}catch(y){c(y)}}function p(v){v.done?l(v.value):o(v.value).then(d,h)}p((n=n.apply(i,s||[])).next())})},ti=function(i,s){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,o,l,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(v){return h([p,v])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,o=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){a.label=p[1];break}if(p[0]===6&&a.label<l[1]){a.label=l[1],l=p;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(p);break}l[2]&&a.ops.pop(),a.trys.pop();continue}p=s.call(i,a)}catch(v){p=[6,v],o=0}finally{n=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},ri=function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&Ue(s,i,a)},Ue=Object.create?function(i,s,a,n){n===void 0&&(n=a);var o=Object.getOwnPropertyDescriptor(s,a);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,n,o)}:function(i,s,a,n){n===void 0&&(n=a),i[n]=s[a]},qe=function(i){var s=typeof Symbol=="function"&&Symbol.iterator,a=s&&i[s],n=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(i,s){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var n=a.call(i),o,l=[],c;try{for(;(s===void 0||s-- >0)&&!(o=n.next()).done;)l.push(o.value)}catch(d){c={error:d}}finally{try{o&&!o.done&&(a=n.return)&&a.call(n)}finally{if(c)throw c.error}}return l},ii=function(){for(var i=[],s=0;s<arguments.length;s++)i=i.concat(Qt(arguments[s]));return i},si=function(){for(var i=0,s=0,a=arguments.length;s<a;s++)i+=arguments[s].length;for(var n=Array(i),o=0,s=0;s<a;s++)for(var l=arguments[s],c=0,d=l.length;c<d;c++,o++)n[o]=l[c];return n},ai=function(i,s,a){if(a||arguments.length===2)for(var n=0,o=s.length,l;n<o;n++)(l||!(n in s))&&(l||(l=Array.prototype.slice.call(s,0,n)),l[n]=s[n]);return i.concat(l||Array.prototype.slice.call(s))},be=function(i){return this instanceof be?(this.v=i,this):new be(i)},ni=function(i,s,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=a.apply(i,s||[]),o,l=[];return o={},c("next"),c("throw"),c("return"),o[Symbol.asyncIterator]=function(){return this},o;function c(b){n[b]&&(o[b]=function(_){return new Promise(function(S,L){l.push([b,_,S,L])>1||d(b,_)})})}function d(b,_){try{h(n[b](_))}catch(S){y(l[0][3],S)}}function h(b){b.value instanceof be?Promise.resolve(b.value.v).then(p,v):y(l[0][2],b)}function p(b){d("next",b)}function v(b){d("throw",b)}function y(b,_){b(_),l.shift(),l.length&&d(l[0][0],l[0][1])}},oi=function(i){var s,a;return s={},n("next"),n("throw",function(o){throw o}),n("return"),s[Symbol.iterator]=function(){return this},s;function n(o,l){s[o]=i[o]?function(c){return(a=!a)?{value:be(i[o](c)),done:o==="return"}:l?l(c):c}:l}},li=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i[Symbol.asyncIterator],a;return s?s.call(i):(i=typeof qe=="function"?qe(i):i[Symbol.iterator](),a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a);function n(l){a[l]=i[l]&&function(c){return new Promise(function(d,h){c=i[l](c),o(d,h,c.done,c.value)})}}function o(l,c,d,h){Promise.resolve(h).then(function(p){l({value:p,done:d})},c)}},di=function(i,s){return Object.defineProperty?Object.defineProperty(i,"raw",{value:s}):i.raw=s,i};var r=Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s};ci=function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var a in i)a!=="default"&&Object.prototype.hasOwnProperty.call(i,a)&&Ue(s,i,a);return r(s,i),s},ui=function(i){return i&&i.__esModule?i:{default:i}},hi=function(i,s,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?i!==s||!n:!s.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(i):n?n.value:s.get(i)},pi=function(i,s,a,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?i!==s||!o:!s.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(i,a):o?o.value=a:s.set(i,a),a},fi=function(i,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?s===i:i.has(s)},t("__extends",Wr),t("__assign",Xr),t("__rest",Zr),t("__decorate",Kr),t("__param",Jr),t("__metadata",Yr),t("__awaiter",ei),t("__generator",ti),t("__exportStar",ri),t("__createBinding",Ue),t("__values",qe),t("__read",Qt),t("__spread",ii),t("__spreadArrays",si),t("__spreadArray",ai),t("__await",be),t("__asyncGenerator",ni),t("__asyncDelegator",oi),t("__asyncValues",li),t("__makeTemplateObject",di),t("__importStar",ci),t("__importDefault",ui),t("__classPrivateFieldGet",hi),t("__classPrivateFieldSet",pi),t("__classPrivateFieldIn",fi)})});var jt=new Map;function qs(t,e={},r=!0){if(typeof t!="string"||!t.trim().length)return Promise.reject("Reflow: Endpoint Required");if(t=t.replace(/^\/+/,""),jt.has(t))return jt.get(t);let i=fetch(Reflow.APIURL+"/projects/"+Reflow.projectID+"/"+t,e).then(async s=>{let a=await s.json();if(!s.ok){let n=Error(a.error||"HTTP error");throw n.status=s.status,n.data=a,n}return a});return r&&e.method!="POST"&&jt.set(t,i),i}var k=qs;var zt=class{constructor(e,r={}){C(this,"mockData",null);this.node=e,this.demoMode=r.demoMode||!1,r.mockData&&(this.mockData=r.mockData)}static scan(){let e=document.querySelectorAll(`[data-reflow-type=${this.type}]`);return Array.from(e).filter(r=>!r.parentNode.closest("[data-reflow-type]")).map(r=>new this(r))}init(){}renderTestModeBadge(e,r){if(!Reflow.testmode)return;let i=this.node.querySelector(".ref-test-mode-badge")||document.createElement("div");i.remove(),i.innerText="Test Mode",i.title=`Test Mode is enabled. The Reflow data displayed on the page is from your store's Test mode. 
To view Live data, disable the reflow.js "data-testmode" attribute.`,i.classList.add("ref-test-mode-badge"),r=="append"?e.append(i):e.prepend(i)}getAPIEndpoint(){return""}async fetchData(){if(this.mockData)return this.mockData;let e=this.getAPIEndpoint(),r=await k(e);return r.error?(console.error("Reflow:",r.error),null):r}parseConfigString(e){let r={};for(let i of e.split(","))r[i.trim().toLowerCase()]=!0;return r}parseShowString(){return this.node.dataset.reflowShow?this.parseConfigString(this.node.dataset.reflowShow):{full:!0}}isDemoMode(){return this.demoMode}async update(){}};C(zt,"type","");var O=zt;function Us(t){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}var Vr=Us;function $s(t,e=null){return e=e||document,t.trim()[0]=="<"?Vr(t):e.querySelectorAll(t)}var u=$s;var Vt=class extends O{constructor(e,r={}){super(e,r);r=Object.assign({type:"success",action:this.hide.bind(this),buttonAction:null,title:"",description:"",button:null,timeout:5e3},r),this.set(r),this.node.innerHTML=`
			<div class="ref-notification-content">
				<div class="ref-notification-title"></div>
				<div class="ref-notification-description"></div>
				<div class="ref-close-button">\xD7</div>
			</div>
		`,this.descriptionElement=this.node.querySelector(".ref-notification-description"),r.button&&(this.button=u('<a class="ref-button"></a>'),this.button.textContent=r.button,this.node.querySelector(".ref-notification-content").append(this.button)),this.hideTimeout=null}init(){this.node.addEventListener("click",this.onClick.bind(this))}set(e={}){Object.assign(this,e),e.timeout===0&&clearTimeout(this.hideTimeout)}onClick(e){if(e.target.closest(".ref-close-button")){this.hide();return}if(e.target.closest(".ref-button")&&this.buttonAction){this.buttonAction();return}this.action&&this.action(this)}hide(){this.node.remove()}show(){Vt.scan().forEach(r=>r.node.remove()),document.body.append(this.node),this.update(),this.timeout&&this.hideAfter(this.timeout)}hideAfter(e){clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>{this.hide()},e)}update(){let e=this.node.querySelector(".ref-notification-title");e&&(e.textContent=this.title);let r=this.node.querySelector(".ref-notification-description");return r&&(r.textContent=this.description),this.node.classList.add("ref-notification",this.type),this.button&&this.button.classList.add("ref-button-"+this.type),this.description||this.node.classList.add("no-description"),setTimeout(()=>{this.node.style.transform="translateY(-20px)"},0),this.node}},Gt=Vt;C(Gt,"type","toast");var $=Gt;var Qr=class extends O{constructor(e,r={}){super(e,r);e.innerHTML=`
			<div class="ref-quantity-widget">
				<div class="ref-decrease"><span></span></div>
				<input type="text" value="1" />
				<div class="ref-increase"><span></span></div>
			</div>
		`,this.input=e.querySelector("input"),this.inStock=r.inStock,this._onQuantityChange=r.onChange}init(){this.node.addEventListener("change",this.onChange.bind(this)),this.node.addEventListener("click",this.onClick.bind(this))}onChange(e){if(e.target===this.input){if(!this.inStock)return;let r=Math.max(1,parseInt(e.target.value,10)||1);if(r=Math.min(r,999),e.target.value=r,r==this.getQuantity(r))return;this.setQuantity(r),this._onQuantityChange&&this._onQuantityChange(this);return}}async onClick(e){let r=!!e.target.closest(".ref-increase"),i=!!e.target.closest(".ref-decrease");if(r||i){if(!this.inStock)return;let s=this.input,a=parseInt(s.value,10),n=this.getMaxQuantity();if(r){if(a>=n)return;a++}else if(i){if(a<=1)return;a--}s.value=a,this.setQuantity(a),this._onQuantityChange&&this._onQuantityChange(this)}}getProduct(){return this.node.dataset.reflowProduct}setProduct(e){this.node.dataset.reflowProduct=e}getQuantity(){return this.node.dataset.reflowQuantity||1}setQuantity(e=1){this.node.dataset.reflowQuantity=e,u(".ref-increase",this.node)[0].classList.remove("inactive"),e>=this.getMaxQuantity()&&u(".ref-increase",this.node)[0].classList.add("inactive")}getMaxQuantity(){return parseInt(this.node.dataset.reflowMaxQty,10)||999}setMaxQuantity(e=999){this.node.dataset.reflowMaxQty=e}getVariant(){return this.node.dataset.reflowVariant}setVariant(e){this.node.dataset.reflowVariant=e}async update(e){return this.input.value=this.getQuantity(),this.inStock||this.node.querySelector(".ref-quantity-widget").classList.add("inactive"),this.node}},ve=Qr;var gi=Ns(mi()),{__extends:Ee,__assign:R,__rest:sd,__decorate:ad,__param:nd,__metadata:od,__awaiter:ld,__generator:dd,__exportStar:cd,__createBinding:ud,__values:hd,__read:pd,__spread:fd,__spreadArrays:md,__spreadArray:Fe,__await:gd,__asyncGenerator:yd,__asyncDelegator:vd,__asyncValues:bd,__makeTemplateObject:xd,__importStar:wd,__importDefault:_d,__classPrivateFieldGet:Cd,__classPrivateFieldSet:Sd,__classPrivateFieldIn:Ed}=gi.default;var A;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(A||(A={}));var D;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(D||(D={}));var pe;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(pe||(pe={}));function Wt(t){return t.type===D.literal}function yi(t){return t.type===D.argument}function je(t){return t.type===D.number}function ze(t){return t.type===D.date}function Ge(t){return t.type===D.time}function Ve(t){return t.type===D.select}function Qe(t){return t.type===D.plural}function vi(t){return t.type===D.pound}function We(t){return t.type===D.tag}function Xe(t){return!!(t&&typeof t=="object"&&t.type===pe.number)}function Le(t){return!!(t&&typeof t=="object"&&t.type===pe.dateTime)}var Xt=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/;var Fs=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function bi(t){var e={};return t.replace(Fs,function(r){var i=r.length;switch(r[0]){case"G":e.era=i===4?"long":i===5?"narrow":"short";break;case"y":e.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=i===4?"short":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][i-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][i-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][i-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][i-1];break;case"s":e.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var xi=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function wi(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(xi).filter(function(p){return p.length>0}),r=[],i=0,s=e;i<s.length;i++){var a=s[i],n=a.split("/");if(n.length===0)throw new Error("Invalid number skeleton");for(var o=n[0],l=n.slice(1),c=0,d=l;c<d.length;c++){var h=d[c];if(h.length===0)throw new Error("Invalid number skeleton")}r.push({stem:o,options:l})}return r}function js(t){return t.replace(/^(.*?)-/,"")}var _i=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Ci=/^(@+)?(\+|#+)?[rs]?$/g,zs=/(\*)(0+)|(#+)(0+)|(0+)/g,Si=/^(0+)$/;function Ei(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(Ci,function(r,i,s){return typeof s!="string"?(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length):s==="+"?e.minimumSignificantDigits=i.length:i[0]==="#"?e.maximumSignificantDigits=i.length:(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length+(typeof s=="string"?s.length:0)),""}),e}function Li(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Gs(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var r=t.slice(0,2);if(r==="+!"?(e.signDisplay="always",t=t.slice(2)):r==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!Si.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function Ti(t){var e={},r=Li(t);return r||e}function Pi(t){for(var e={},r=0,i=t;r<i.length;r++){var s=i[r];switch(s.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=s.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=js(s.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=R(R(R({},e),{notation:"scientific"}),s.options.reduce(function(l,c){return R(R({},l),Ti(c))},{}));continue;case"engineering":e=R(R(R({},e),{notation:"engineering"}),s.options.reduce(function(l,c){return R(R({},l),Ti(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(s.options[0]);continue;case"integer-width":if(s.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");s.options[0].replace(zs,function(l,c,d,h,p,v){if(c)e.minimumIntegerDigits=d.length;else{if(h&&p)throw new Error("We currently do not support maximum integer digits");if(v)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Si.test(s.stem)){e.minimumIntegerDigits=s.stem.length;continue}if(_i.test(s.stem)){if(s.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");s.stem.replace(_i,function(l,c,d,h,p,v){return d==="*"?e.minimumFractionDigits=c.length:h&&h[0]==="#"?e.maximumFractionDigits=h.length:p&&v?(e.minimumFractionDigits=p.length,e.maximumFractionDigits=p.length+v.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var a=s.options[0];a==="w"?e=R(R({},e),{trailingZeroDisplay:"stripIfInteger"}):a&&(e=R(R({},e),Ei(a)));continue}if(Ci.test(s.stem)){e=R(R({},e),Ei(s.stem));continue}var n=Li(s.stem);n&&(e=R(R({},e),n));var o=Gs(s.stem);o&&(e=R(R({},e),o))}return e}var Te={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function ki(t,e){for(var r="",i=0;i<t.length;i++){var s=t.charAt(i);if(s==="j"){for(var a=0;i+1<t.length&&t.charAt(i+1)===s;)a++,i++;var n=1+(a&1),o=a<2?1:3+(a>>1),l="a",c=Vs(e);for((c=="H"||c=="k")&&(o=0);o-- >0;)r+=l;for(;n-- >0;)r=c+r}else s==="J"?r+="H":r+=s}return r}function Vs(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r=t.language,i;r!=="root"&&(i=t.maximize().region);var s=Te[i||""]||Te[r||""]||Te["".concat(r,"-001")]||Te["001"];return s[0]}var Zt,Qs=new RegExp("^".concat(Xt.source,"*")),Ws=new RegExp("".concat(Xt.source,"*$"));function I(t,e){return{start:t,end:e}}var Xs=!!String.prototype.startsWith,Zs=!!String.fromCodePoint,Ks=!!Object.fromEntries,Js=!!String.prototype.codePointAt,Ys=!!String.prototype.trimStart,ea=!!String.prototype.trimEnd,ta=!!Number.isSafeInteger,ra=ta?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},Kt=!0;try{Ai=Mi("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu"),Kt=((Zt=Ai.exec("a"))===null||Zt===void 0?void 0:Zt[0])==="a"}catch(t){Kt=!1}var Ai,Ii=Xs?function(e,r,i){return e.startsWith(r,i)}:function(e,r,i){return e.slice(i,i+r.length)===r},Jt=Zs?String.fromCodePoint:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i="",s=e.length,a=0,n;s>a;){if(n=e[a++],n>1114111)throw RangeError(n+" is not a valid code point");i+=n<65536?String.fromCharCode(n):String.fromCharCode(((n-=65536)>>10)+55296,n%1024+56320)}return i},Ri=Ks?Object.fromEntries:function(e){for(var r={},i=0,s=e;i<s.length;i++){var a=s[i],n=a[0],o=a[1];r[n]=o}return r},Hi=Js?function(e,r){return e.codePointAt(r)}:function(e,r){var i=e.length;if(!(r<0||r>=i)){var s=e.charCodeAt(r),a;return s<55296||s>56319||r+1===i||(a=e.charCodeAt(r+1))<56320||a>57343?s:(s-55296<<10)+(a-56320)+65536}},ia=Ys?function(e){return e.trimStart()}:function(e){return e.replace(Qs,"")},sa=ea?function(e){return e.trimEnd()}:function(e){return e.replace(Ws,"")};function Mi(t,e){return new RegExp(t,e)}var Yt;Kt?(er=Mi("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu"),Yt=function(e,r){var i;er.lastIndex=r;var s=er.exec(e);return(i=s[1])!==null&&i!==void 0?i:""}):Yt=function(e,r){for(var i=[];;){var s=Hi(e,r);if(s===void 0||Bi(s)||oa(s))break;i.push(s),r+=s>=65536?2:1}return Jt.apply(void 0,i)};var er,Oi=function(){function t(e,r){r===void 0&&(r={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!r.ignoreTag,this.locale=r.locale,this.requiresOtherClause=!!r.requiresOtherClause,this.shouldParseSkeletons=!!r.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,r,i){for(var s=[];!this.isEOF();){var a=this.char();if(a===123){var n=this.parseArgument(e,i);if(n.err)return n;s.push(n.val)}else{if(a===125&&e>0)break;if(a===35&&(r==="plural"||r==="selectordinal")){var o=this.clonePosition();this.bump(),s.push({type:D.pound,location:I(o,this.clonePosition())})}else if(a===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(A.UNMATCHED_CLOSING_TAG,I(this.clonePosition(),this.clonePosition()))}else if(a===60&&!this.ignoreTag&&tr(this.peek()||0)){var n=this.parseTag(e,r);if(n.err)return n;s.push(n.val)}else{var n=this.parseLiteral(e,r);if(n.err)return n;s.push(n.val)}}}return{val:s,err:null}},t.prototype.parseTag=function(e,r){var i=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:D.literal,value:"<".concat(s,"/>"),location:I(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var a=this.parseMessage(e+1,r,!0);if(a.err)return a;var n=a.val,o=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!tr(this.char()))return this.error(A.INVALID_TAG,I(o,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return s!==c?this.error(A.UNMATCHED_CLOSING_TAG,I(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:D.tag,value:s,children:n,location:I(i,this.clonePosition())},err:null}:this.error(A.INVALID_TAG,I(o,this.clonePosition())))}else return this.error(A.UNCLOSED_TAG,I(i,this.clonePosition()))}else return this.error(A.INVALID_TAG,I(i,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&na(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,r){for(var i=this.clonePosition(),s="";;){var a=this.tryParseQuote(r);if(a){s+=a;continue}var n=this.tryParseUnquoted(e,r);if(n){s+=n;continue}var o=this.tryParseLeftAngleBracket();if(o){s+=o;continue}break}var l=I(i,this.clonePosition());return{val:{type:D.literal,value:s,location:l},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!aa(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var r=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)r.push(39),this.bump();else{this.bump();break}else r.push(i);this.bump()}return Jt.apply(void 0,r)},t.prototype.tryParseUnquoted=function(e,r){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(r==="plural"||r==="selectordinal")||i===125&&e>0?null:(this.bump(),Jt(i))},t.prototype.parseArgument=function(e,r){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(A.EXPECT_ARGUMENT_CLOSING_BRACE,I(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(A.EMPTY_ARGUMENT,I(i,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(A.MALFORMED_ARGUMENT,I(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(A.EXPECT_ARGUMENT_CLOSING_BRACE,I(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:D.argument,value:s,location:I(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(A.EXPECT_ARGUMENT_CLOSING_BRACE,I(i,this.clonePosition())):this.parseArgumentOptions(e,r,s,i);default:return this.error(A.MALFORMED_ARGUMENT,I(i,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),r=this.offset(),i=Yt(this.message,r),s=r+i.length;this.bumpTo(s);var a=this.clonePosition(),n=I(e,a);return{value:i,location:n}},t.prototype.parseArgumentOptions=function(e,r,i,s){var a,n=this.clonePosition(),o=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(o){case"":return this.error(A.EXPECT_ARGUMENT_TYPE,I(n,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var d=this.clonePosition(),h=this.parseSimpleArgStyleIfPossible();if(h.err)return h;var p=sa(h.val);if(p.length===0)return this.error(A.EXPECT_ARGUMENT_STYLE,I(this.clonePosition(),this.clonePosition()));var v=I(d,this.clonePosition());c={style:p,styleLocation:v}}var y=this.tryParseArgumentClose(s);if(y.err)return y;var b=I(s,this.clonePosition());if(c&&Ii(c==null?void 0:c.style,"::",0)){var _=ia(c.style.slice(2));if(o==="number"){var h=this.parseNumberSkeletonFromString(_,c.styleLocation);return h.err?h:{val:{type:D.number,value:i,location:b,style:h.val},err:null}}else{if(_.length===0)return this.error(A.EXPECT_DATE_TIME_SKELETON,b);var S=_;this.locale&&(S=ki(_,this.locale));var p={type:pe.dateTime,pattern:S,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?bi(S):{}},L=o==="date"?D.date:D.time;return{val:{type:L,value:i,location:b,style:p},err:null}}}return{val:{type:o==="number"?D.number:o==="date"?D.date:D.time,value:i,location:b,style:(a=c==null?void 0:c.style)!==null&&a!==void 0?a:null},err:null}}case"plural":case"selectordinal":case"select":{var E=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(A.EXPECT_SELECT_ARGUMENT_OPTIONS,I(E,R({},E)));this.bumpSpace();var U=this.parseIdentifierIfPossible(),F=0;if(o!=="select"&&U.value==="offset"){if(!this.bumpIf(":"))return this.error(A.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,I(this.clonePosition(),this.clonePosition()));this.bumpSpace();var h=this.tryParseDecimalInteger(A.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,A.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(h.err)return h;this.bumpSpace(),U=this.parseIdentifierIfPossible(),F=h.val}var M=this.tryParsePluralOrSelectOptions(e,o,r,U);if(M.err)return M;var y=this.tryParseArgumentClose(s);if(y.err)return y;var H=I(s,this.clonePosition());return o==="select"?{val:{type:D.select,value:i,options:Ri(M.val),location:H},err:null}:{val:{type:D.plural,value:i,options:Ri(M.val),offset:F,pluralType:o==="plural"?"cardinal":"ordinal",location:H},err:null}}default:return this.error(A.INVALID_ARGUMENT_TYPE,I(n,l))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(A.EXPECT_ARGUMENT_CLOSING_BRACE,I(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,r=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var s=this.clonePosition();if(!this.bumpUntil("'"))return this.error(A.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,I(s,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(r.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(r.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,r){var i=[];try{i=wi(e)}catch(s){return this.error(A.INVALID_NUMBER_SKELETON,r)}return{val:{type:pe.number,tokens:i,location:r,parsedOptions:this.shouldParseSkeletons?Pi(i):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,r,i,s){for(var a,n=!1,o=[],l=new Set,c=s.value,d=s.location;;){if(c.length===0){var h=this.clonePosition();if(r!=="select"&&this.bumpIf("=")){var p=this.tryParseDecimalInteger(A.EXPECT_PLURAL_ARGUMENT_SELECTOR,A.INVALID_PLURAL_ARGUMENT_SELECTOR);if(p.err)return p;d=I(h,this.clonePosition()),c=this.message.slice(h.offset,this.offset())}else break}if(l.has(c))return this.error(r==="select"?A.DUPLICATE_SELECT_ARGUMENT_SELECTOR:A.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,d);c==="other"&&(n=!0),this.bumpSpace();var v=this.clonePosition();if(!this.bumpIf("{"))return this.error(r==="select"?A.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:A.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,I(this.clonePosition(),this.clonePosition()));var y=this.parseMessage(e+1,r,i);if(y.err)return y;var b=this.tryParseArgumentClose(v);if(b.err)return b;o.push([c,{value:y.val,location:I(v,this.clonePosition())}]),l.add(c),this.bumpSpace(),a=this.parseIdentifierIfPossible(),c=a.value,d=a.location}return o.length===0?this.error(r==="select"?A.EXPECT_SELECT_ARGUMENT_SELECTOR:A.EXPECT_PLURAL_ARGUMENT_SELECTOR,I(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!n?this.error(A.MISSING_OTHER_CLAUSE,I(this.clonePosition(),this.clonePosition())):{val:o,err:null}},t.prototype.tryParseDecimalInteger=function(e,r){var i=1,s=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var a=!1,n=0;!this.isEOF();){var o=this.char();if(o>=48&&o<=57)a=!0,n=n*10+(o-48),this.bump();else break}var l=I(s,this.clonePosition());return a?(n*=i,ra(n)?{val:n,err:null}:this.error(r,l)):this.error(e,l)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var r=Hi(this.message,e);if(r===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return r},t.prototype.error=function(e,r){return{val:null,err:{kind:e,message:this.message,location:r}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(Ii(this.message,e,this.offset())){for(var r=0;r<e.length;r++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var r=this.offset(),i=this.message.indexOf(e,r);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var r=this.offset();if(r===e)break;if(r>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&Bi(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),r=this.offset(),i=this.message.charCodeAt(r+(e>=65536?2:1));return i!=null?i:null},t}();function tr(t){return t>=97&&t<=122||t>=65&&t<=90}function aa(t){return tr(t)||t===47}function na(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function Bi(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function oa(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function rr(t){t.forEach(function(e){if(delete e.location,Ve(e)||Qe(e))for(var r in e.options)delete e.options[r].location,rr(e.options[r].value);else je(e)&&Xe(e.style)||(ze(e)||Ge(e))&&Le(e.style)?delete e.style.location:We(e)&&rr(e.children)})}function fe(t,e){e===void 0&&(e={}),e=R({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var r=new Oi(t,e).parse();if(r.err){var i=SyntaxError(A[r.err.kind]);throw i.location=r.err.location,i.originalMessage=r.err.message,i}return(e==null?void 0:e.captureLocation)||rr(r.val),r.val}function Pe(t,e){var r=e&&e.cache?e.cache:pa,i=e&&e.serializer?e.serializer:ha,s=e&&e.strategy?e.strategy:da;return s(t,{cache:r,serializer:i})}function la(t){return t==null||typeof t=="number"||typeof t=="boolean"}function Di(t,e,r,i){var s=la(i)?i:r(i),a=e.get(s);return typeof a=="undefined"&&(a=t.call(this,i),e.set(s,a)),a}function Ni(t,e,r){var i=Array.prototype.slice.call(arguments,3),s=r(i),a=e.get(s);return typeof a=="undefined"&&(a=t.apply(this,i),e.set(s,a)),a}function ir(t,e,r,i,s){return r.bind(e,t,i,s)}function da(t,e){var r=t.length===1?Di:Ni;return ir(t,this,r,e.cache.create(),e.serializer)}function ca(t,e){return ir(t,this,Ni,e.cache.create(),e.serializer)}function ua(t,e){return ir(t,this,Di,e.cache.create(),e.serializer)}var ha=function(){return JSON.stringify(arguments)};function sr(){this.cache=Object.create(null)}sr.prototype.get=function(t){return this.cache[t]};sr.prototype.set=function(t,e){this.cache[t]=e};var pa={create:function(){return new sr}},Ze={variadic:ca,monadic:ua};var me;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(me||(me={}));var ke=function(t){Ee(e,t);function e(r,i,s){var a=t.call(this,r)||this;return a.code=i,a.originalMessage=s,a}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error);var ar=function(t){Ee(e,t);function e(r,i,s,a){return t.call(this,'Invalid values for "'.concat(r,'": "').concat(i,'". Options are "').concat(Object.keys(s).join('", "'),'"'),me.INVALID_VALUE,a)||this}return e}(ke);var qi=function(t){Ee(e,t);function e(r,i,s){return t.call(this,'Value for "'.concat(r,'" must be of type ').concat(i),me.INVALID_VALUE,s)||this}return e}(ke);var Ui=function(t){Ee(e,t);function e(r,i){return t.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(i,'"'),me.MISSING_VALUE,i)||this}return e}(ke);var j;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(j||(j={}));function fa(t){return t.length<2?t:t.reduce(function(e,r){var i=e[e.length-1];return!i||i.type!==j.literal||r.type!==j.literal?e.push(r):i.value+=r.value,e},[])}function ma(t){return typeof t=="function"}function Ae(t,e,r,i,s,a,n){if(t.length===1&&Wt(t[0]))return[{type:j.literal,value:t[0].value}];for(var o=[],l=0,c=t;l<c.length;l++){var d=c[l];if(Wt(d)){o.push({type:j.literal,value:d.value});continue}if(vi(d)){typeof a=="number"&&o.push({type:j.literal,value:r.getNumberFormat(e).format(a)});continue}var h=d.value;if(!(s&&h in s))throw new Ui(h,n);var p=s[h];if(yi(d)){(!p||typeof p=="string"||typeof p=="number")&&(p=typeof p=="string"||typeof p=="number"?String(p):""),o.push({type:typeof p=="string"?j.literal:j.object,value:p});continue}if(ze(d)){var v=typeof d.style=="string"?i.date[d.style]:Le(d.style)?d.style.parsedOptions:void 0;o.push({type:j.literal,value:r.getDateTimeFormat(e,v).format(p)});continue}if(Ge(d)){var v=typeof d.style=="string"?i.time[d.style]:Le(d.style)?d.style.parsedOptions:i.time.medium;o.push({type:j.literal,value:r.getDateTimeFormat(e,v).format(p)});continue}if(je(d)){var v=typeof d.style=="string"?i.number[d.style]:Xe(d.style)?d.style.parsedOptions:void 0;v&&v.scale&&(p=p*(v.scale||1)),o.push({type:j.literal,value:r.getNumberFormat(e,v).format(p)});continue}if(We(d)){var y=d.children,b=d.value,_=s[b];if(!ma(_))throw new qi(b,"function",n);var S=Ae(y,e,r,i,s,a),L=_(S.map(function(F){return F.value}));Array.isArray(L)||(L=[L]),o.push.apply(o,L.map(function(F){return{type:typeof F=="string"?j.literal:j.object,value:F}}))}if(Ve(d)){var E=d.options[p]||d.options.other;if(!E)throw new ar(d.value,p,Object.keys(d.options),n);o.push.apply(o,Ae(E.value,e,r,i,s));continue}if(Qe(d)){var E=d.options["=".concat(p)];if(!E){if(!Intl.PluralRules)throw new ke(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,me.MISSING_INTL_API,n);var U=r.getPluralRules(e,{type:d.pluralType}).select(p-(d.offset||0));E=d.options[U]||d.options.other}if(!E)throw new ar(d.value,p,Object.keys(d.options),n);o.push.apply(o,Ae(E.value,e,r,i,s,p-(d.offset||0)));continue}}return fa(o)}function ga(t,e){return e?R(R(R({},t||{}),e||{}),Object.keys(t).reduce(function(r,i){return r[i]=R(R({},t[i]),e[i]||{}),r},{})):t}function ya(t,e){return e?Object.keys(t).reduce(function(r,i){return r[i]=ga(t[i],e[i]),r},R({},t)):t}function nr(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function va(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Pe(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,Fe([void 0],r,!1)))},{cache:nr(t.number),strategy:Ze.variadic}),getDateTimeFormat:Pe(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,Fe([void 0],r,!1)))},{cache:nr(t.dateTime),strategy:Ze.variadic}),getPluralRules:Pe(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,Fe([void 0],r,!1)))},{cache:nr(t.pluralRules),strategy:Ze.variadic})}}var $i=function(){function t(e,r,i,s){var a=this;if(r===void 0&&(r=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(n){var o=a.formatToParts(n);if(o.length===1)return o[0].value;var l=o.reduce(function(c,d){return!c.length||d.type!==j.literal||typeof c[c.length-1]!="string"?c.push(d.value):c[c.length-1]+=d.value,c},[]);return l.length<=1?l[0]||"":l},this.formatToParts=function(n){return Ae(a.ast,a.locales,a.formatters,a.formats,n,void 0,a.message)},this.resolvedOptions=function(){var n;return{locale:((n=a.resolvedLocale)===null||n===void 0?void 0:n.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=r,this.resolvedLocale=t.resolveLocale(r),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=t.__parse(e,{ignoreTag:s==null?void 0:s.ignoreTag,locale:this.resolvedLocale})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=ya(t.formats,i),this.formatters=s&&s.formatters||va(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(typeof Intl.Locale!="undefined"){var r=Intl.NumberFormat.supportedLocalesOf(e);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=fe,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}();var Fi=$i;var ba=["add_to_cart.prompt_personalization_text"];function g(t,e={},r={}){let i=Reflow.locales;if(!i)throw new Error("Reflow: Missing locale JSON");t=t.toLowerCase();let s=i[t],a=i.locale;if(!a||!s)return r.ignoreNotFoundErrors?null:(console.error("Reflow: Unable to resolve locale string with id '"+t+"'"),"");try{return new Fi(s,a).format(e)}catch(n){return console.error("Reflow: Unable to resolve IntlMessageFormat with id '"+t+"'"),""}}function m(t,e={},r={}){let i=document.createElement("div");return i.innerText=g(t,e,r),i.innerHTML}function ji(t){let e=Reflow.locales,r={},i="";if(!t.locale)return console.error("Reflow: Localization - Missing locale in localization JSON"),{};for(let s in e)t[s]||(i+=s+", ");i.length&&(i=i.slice(0,-2),console.info("Reflow: Localization - The following keys are missing form the provided localization JSON. English language version will be used for the respective phrases instead. ["+i+"]"));for(let s in t){let a,n;if(s=="geo"){for(let[o,l]of Object.entries(t.geo)){if(l.country_name){try{a=fe(l.country_name)}catch(c){console.error(`Reflow: Localization - Invalid ICU Message syntax for "geo.${o}.country_name". English language version will be used instead.`);continue}if(n=a.filter(c=>c.type==1).map(c=>c.value),n.length){console.error(`Reflow: Localization - Unsupported properties in ICU Message for "geo.${o}.country_name". English language version will be used instead.`);continue}r["geo."+o.toLowerCase()+".country_name"]=l.country_name}if(l.regions)for(let[c,d]of Object.entries(l.regions)){try{a=fe(d)}catch(h){console.error(`Reflow: Localization - Invalid ICU Message syntax for "geo.${o}.regions.${c}". English language version will be used instead.`);continue}if(n=a.filter(h=>h.type==1).map(h=>h.value),n.length){console.error(`Reflow: Localization - Unsupported properties in ICU Message for "geo.${o}.regions.${c}". English language version will be used instead.`);continue}r["geo."+o.toLowerCase()+".regions."+c.toLowerCase()]=d}}continue}if(!e[s]&&!ba.includes(s)){console.error('Reflow: Localization - Unsupported key "'+s+'" in localization JSON');continue}try{a=fe(t[s])}catch(o){console.error(`Reflow: Localization - Invalid ICU Message syntax for "${s}". English language version will be used instead.`);continue}if(n=a.filter(o=>o.type==1).map(o=>o.value),n.length){let o=fe(e[s]).filter(c=>c.type==1).map(c=>c.value),l=n.filter(c=>!o.includes(c));if(l.length){console.error(`Reflow: Localization - Unsupported property {${l[0]}} in "${s}". English language version will be used instead.`);continue}}r[s]=t[s]}return r}var zi=class{constructor(e){this.options=e,this.model=e.model,this.fields=e.fields||["name","city","address","country"];let r=e.fieldPrefix,i=e.required?"required":"",s='<div class="ref-address-widget">';this.fields.includes("name")&&(s+=`
			<label>
				<span>${m("name")}</span>
				<input type="text" class="ref-form-control ref-field-details-name" value="" name="${r}-name" data-state-src="${r}-name" ${i} minlength="5" />
				<div class="ref-validation-error"></div>
			</label>`),this.fields.includes("address")&&(s+=`
			<label>
				<span>${m("address")}</span>
				<textarea row="2" class="ref-form-control ref-field-details-address-line" name="${r}-address" data-state-src="${r}-address" ${i} minlength="5"></textarea>
				<div class="ref-validation-error"></div>
			</label>`),this.fields.includes("city")&&(s+=`
			<label>
				<span>${m("city")}</span>
				<input type="text" class="ref-form-control ref-field-details-city" value="" name="${r}-city" data-state-src="${r}-city" ${i} minlength="2" />
				<div class="ref-validation-error"></div>
			</label>`),this.fields.includes("country")&&(s+=`
			<div class="ref-error-parent">
				<label>
					<span>${m("country")}</span>
					<select class="ref-form-control ref-field-details-country" name="${r}-country" data-state-src="${r}-country" ${i}></select> 
				</label>
				<div class="ref-row ref-row-region">
					<label>
						<span>${m("state")}</span>
						<select class="ref-form-control ref-field-details-region" name="${r}-state" data-state-src="${r}-state" ${i}></select>
					</label>
					<label>
						<span>${m("postcode")}</span>
						<input type="text" class="ref-form-control ref-field-details-postcode" name="${r}-postcode" data-state-src="${r}-postcode" value="" ${i} />
					</label>
				</div>
				<div class="ref-validation-error"></div>
			</div>`),s+="</div>",this.node=u(s),this.fields.includes("name")&&(this.nameInput=this.node.querySelector(".ref-field-details-name"),this.nameInput.addEventListener("change",this.onNameChange.bind(this))),this.fields.includes("address")&&(this.addressLineInput=this.node.querySelector(".ref-field-details-address-line"),this.addressLineInput.addEventListener("change",this.onAddressLineChange.bind(this))),this.fields.includes("city")&&(this.cityInput=this.node.querySelector(".ref-field-details-city"),this.cityInput.addEventListener("change",this.onCityChange.bind(this))),this.fields.includes("country")&&(this.countrySelect=this.node.querySelector(".ref-field-details-country"),this.regionSelect=this.node.querySelector(".ref-field-details-region"),this.postcodeField=this.node.querySelector(".ref-field-details-postcode").parentNode,this.postcodeInput=this.postcodeField.querySelector("input"),this.stateField=this.regionSelect.parentNode,this.postcodeInput.addEventListener("change",this.onPostcodeInput.bind(this)),this.countrySelect.addEventListener("change",this.onCountryChange.bind(this)),this.regionSelect.addEventListener("change",this.onRegionChange.bind(this)))}onNameChange(e){this.model.name=e.target.value.trim()}onAddressLineChange(e){this.model.address=e.target.value.trim()}onCityChange(e){this.model.city=e.target.value.trim(),this.onChange()}onCountryChange(e){this.model.country=e.target.value,this.model.state="";let r=this.getCountryByCode(this.model.country);r.has_regions&&(this.model.state=Object.keys(r.regions)[0]),this.update(!1,!0),this.onChange()}onRegionChange(e){this.model.state=e.target.value,this.onChange()}onPostcodeInput(e){this.model.postcode=e.target.value.trim(),this.onChange()}onChange(){this.options.onChange&&this.options.onChange()}getCountryByCode(e){return e?this.options.getCountries().find(r=>r.country_code==e):null}getCountries(){return this.options.getCountries()}setGetCountries(e){this.options.getCountries=e}update(e=!1,r=!1){if(this.fields.includes("name")&&(this.nameInput.value=this.model.name||""),this.fields.includes("address")&&(this.addressLineInput.value=this.model.address||""),this.fields.includes("city")&&(this.cityInput.value=this.model.city||""),this.fields.includes("country")){if(e){this.countrySelect.innerHTML=`<option value="">${m("cart.select_country")}</option>`;for(let s of this.getCountries()){let a=m("geo."+s.country_code+".country_name",{},{ignoreNotFoundErrors:!0})||s.country_name,n=u(`<option value="${s.country_code}">${a}</option>`);s.country_code==this.model.country&&(n.selected=!0),this.countrySelect.append(n)}}this.postcodeField.style.display="none",this.stateField.style.display="none",this.postcodeInput.disabled=!0,this.regionSelect.disabled=!0;let i=this.getCountryByCode(this.model.country);if(this.model.country&&i){let s=!0;if(this.options.fieldPrefix=="digital"&&i.country_code!="US"&&(s=!1),s&&i.has_postcode&&(this.postcodeField.style.display="block",this.postcodeInput.disabled=!1,this.postcodeInput.value=this.model.postcode||"",this.postcodeField.querySelector("label span").textContent=g(i.postcode_title?i.postcode_title.replace(" ","_"):"postcode")),s&&i.has_regions&&(this.stateField.style.display="block",this.regionSelect.disabled=!1,this.stateField.querySelector("label span").textContent=g(i.region_title),e||r)){this.regionSelect.innerHTML="";for(let[a,n]of Object.entries(i.regions)){let o=u(`<option value="${a}"></option>`);o.textContent=g("geo."+i.country_code+".regions."+a,{},{ignoreNotFoundErrors:!0})||n,a==this.model.state&&(o.selected=!0),this.regionSelect.append(o)}}}}return this.node}},xe=zi;var or=class extends O{constructor(e,r={}){super(e,r);e.innerHTML=`
		<div class="reflow-auth-button">

			<div class="ref-auth-button-guest">
				<div class="ref-button ref-sign-in">${m("auth.sign_in")}</div>
				<div class="ref-register">${m("auth.prompt_register")} <span class="text-primary">${m("auth.register")}<span></div>
			</div>

			<div class="ref-auth-button-signed">
				<a class="ref-profile-info"></a>
				<div class="ref-button ref-sign-out">${m("auth.sign_out")}</div>
			</div>

		</div>`,this.signIn=e.querySelector(".ref-sign-in, .ref-register"),this.register=e.querySelector(".ref-register"),this.signOut=e.querySelector(".ref-sign-out")}init(){this.signIn.addEventListener("click",function(e){Reflow.auth.signIn()}),this.register.addEventListener("click",function(e){Reflow.auth.signIn("register")}),this.signOut.addEventListener("click",function(e){Reflow.auth.signOut()}),Reflow.auth.on("signin",({profile:e,isNew:r})=>{this.update();let i=this.getSignInRedirect();if(i){let s=new URL(i,window.location.href);window.location=s.href}}),Reflow.auth.on("signout",({error:e})=>{if(this.update(),e&&e=="profile_not_found"){let i=new $(u('<div data-reflow-type="toast"></div>'),{type:"error",title:"There was a problem with loading your user profile. You have been signed out.",timeout:0});i.init(),i.show();return}let r=this.getSignOutRedirect();if(r){let i=new URL(r,window.location.href);window.location=i.href}}),Reflow.auth.on("profile-refreshed",()=>{this.update()})}getSignInRedirect(){return this.node.dataset.reflowSigninRedirect}getSignOutRedirect(){return this.node.dataset.reflowSignoutRedirect}getUserPageURL(){return this.node.dataset.reflowUserPageUrl}async fetchData(){return this.mockData?this.mockData:Reflow.auth.profile}async update(){let e=this.node.querySelector(".ref-auth-button-guest"),r=this.node.querySelector(".ref-auth-button-signed");if(e.style.display="none",r.style.display="none",Reflow.auth.isSignedIn()){r.style.display="block";let i=this.parseShowString(),s=await this.fetchData(),a=r.querySelector(".ref-profile-info");if(a.innerHTML="",i.full||i.photo){let o=document.createElement("img");o.classList.add("ref-profile-photo"),o.src=s.photo,a.append(o)}if(i.full||i.name){let o=document.createElement("span");o.classList.add("ref-profile-name"),o.textContent=s.name,a.append(o)}let n=this.getUserPageURL();n&&(a.href=n)}else e.style.display="block"}};C(or,"type","auth-button");var oe=or;function xa(t,e=100,r=!1){var i=0,s=null;return(...a)=>{r&&!i&&t(...a),i++,clearTimeout(s),s=setTimeout(()=>{(!r||i>1)&&t(...a),i=0},e)}}var Ke=xa;function wa(t,e){let r=0;return e.hasDecimal&&(t=t/100,r=2),new Intl.NumberFormat(Reflow.locales.locale||"en-US",{style:"currency",currency:e.code,maximumFractionDigits:r}).format(t)}var N=wa;function X(t,e=g("error")){let r=new $(u('<div data-reflow-type="toast"></div>'),{type:"error",title:e,description:t});r.init(),r.show()}function Y(t,e){var s;let i=(((s=t==null?void 0:t.data)==null?void 0:s.errors)||{})[e]||"";return t.data.errorCode&&(typeof t.data.errorCode=="string"?i=g(t.data.errorCode):i=g(t.data.errorCode.code,t.data.errorCode.formats)),i}var Je=(t,e,r)=>{document.dispatchEvent(new Event(t),e),"BroadcastChannel"in window&&new BroadcastChannel("reflow").postMessage({event:t,data:r})},le=(t,e)=>{if(document.addEventListener(t,e),"BroadcastChannel"in window){let r=new BroadcastChannel("reflow");r.onmessage=i=>{i.data.event&&i.data.event==t&&e()}}};var Q=class extends O{constructor(e,r){super(e,r);C(this,"_state",null);C(this,"step","cart");C(this,"activeDeliveryTab","pickup");C(this,"shippingMethodIndex",-1);C(this,"chosenStoreLocation",-1);C(this,"shippingAddress",{});C(this,"billingAddress",{});C(this,"digitalAddress",{});C(this,"billingVisible",!1);C(this,"paypalButtonsInitialized",!1);C(this,"paypalErrorText",null);C(this,"backendUpdateTimeout",null);C(this,"pendingBackendUpdates",{});e.innerHTML=`
			<div class="reflow-shopping-cart" style="display:none">

				<div class="ref-loading-overlay"></div>
				<div class="ref-message"></div>

				<div class="ref-cart">
					<div class="ref-heading">${m("shopping_cart")}</div>
					<div class="ref-th">
						<div class="ref-product-col">${m("product")}</div>
						<div class="ref-price-col">${m("price")}</div>
						<div class="ref-quantity-col">${m("quantity")}</div>
						<div class="ref-total-col">${m("total")}</div>
					</div>
					<div class="ref-cart-table"></div>
					<div class="ref-footer">
						<div class="ref-links"></div>
						<div class="ref-totals">
							<div class="ref-subtotal"></div>
							<form class="ref-accept-terms">
								<label>
									<input type="checkbox" id="ref-terms-agreement" required data-state-src="accept-terms">
									<span class="ref-terms-agreement-text"></span>
								</label>
							</form>
							<div class="ref-row ref-checkout-buttons">
								<div class="ref-paypal-express-checkout-holder"></div>
								<div class="ref-button ref-standard-checkout-button">${m("cart.checkout")}</div>
							</div>
						</div>
					</div>
				</div>

				<div class="ref-checkout">
					<div class="ref-checkout-content">
						<form class="ref-details">
							<div class="ref-back">\u2190 ${m("cart.back_to_cart")}</div>
							<div class="ref-heading">${m("cart.customer_details")}</div>

							<div class="text-center ref-auth-button-holder">
								<div class="ref-auth-button" data-reflow-type="auth-button"></div>
							</div>

							<label>
								<span>${m("email")}</span>
								<input type="email" name="email" id="ref-field-email" class="ref-form-control" value="" required data-state-src="email" />
								<div class="ref-validation-error"></div>
							</label>
							<label class="ref-phone-input">
								<span>${m("phone")}</span>
								<input type="tel" name="phone" id="ref-field-phone" class="ref-form-control" value="" pattern="[0-9\\+\\- ]{5,30}" placeholder="+1234567890" required  data-state-src="phone" />
								<div class="ref-validation-error"></div>
							</label>
							<label class="ref-customer-name-input">
								<span>${m("name")}</span>
								<input type="text" name="customer-name" class="ref-form-control" value="" data-state-src="customer-name" minlength="5" required />
								<div class="ref-validation-error"></div>
							</label>

							<fieldset class="ref-digital-delivery" disabled>
								<div class="ref-digital-address-holder"></div>
								<input type="hidden" name="delivery-method" value="digital" />
							</fieldset>


							<div class="ref-heading ref-heading-delivery">${m("delivery")}</div>
							<div class="ref-delivery-unavailable"></div>
							<div class="ref-delivery-card">

								<div class="ref-tab ref-local-pickup-tab" data-ref-delivery="pickup">
									<label class="ref-tab-toggle">
										<input type="radio" value="pickup" name="delivery-method" required />
										<div class="ref-heading-small">${m("pickup_at_store")}</div>
									</label>
									<fieldset class="ref-tab-content">
										<div class="ref-heading-small">${m("cart.select_store")}</div>
										<div class="ref-locations ref-error-parent"></div>

										<div class="ref-billing-container">
											<div class="ref-button ref-add-billing">${m("cart.add_billing")}</div>

											<fieldset class="ref-billing-address" disabled>
												<div class="ref-row">
													<div class="ref-heading-small">${m("billing_address")}</div>
													<div class="ref-button ref-remove-billing">${m("remove")}</div>
												</div>
												<div class="ref-billing-address-holder"></div>
											</fieldset>
										</div>
									</fieldset>
								</div>

								<div class="ref-tab ref-shipping-tab" data-ref-delivery="shipping">
									<label class="ref-tab-toggle">
										<input type="radio" value="shipping" name="delivery-method" required />
										<div class="ref-heading-small">${m("cart.deliver_to_address")}</div>
									</label>
									<fieldset class="ref-tab-content">
										<div class="ref-heading-small">${m("shipping_address")}</div>
										<div class="ref-shipping-address-holder"></div>

										<div class="ref-auth-save-address">
											<label>
												<input type="checkbox" name="auth-save-address" checked>
												<span>${m("cart.save_address")}</span>
											</label>
										</div>

										<div class="ref-billing-container">
											<div class="ref-button ref-add-billing">${m("cart.add_billing")}</div>

											<fieldset class="ref-billing-address" disabled>
												<div class="ref-row">
													<div class="ref-heading-small">${m("billing_address")}</div>
													<div class="ref-button ref-remove-billing">${m("remove")}</div>
												</div>
												<div class="ref-billing-address-holder"></div>
											</fieldset>
										</div>
									
										<div class="ref-heading-shipping-methods ref-heading-small">${m("shipping_method")}</div>
										<div class="ref-shipping-methods ref-error-parent"></div>

									</fieldset>
								</div>
							
							</div>

							<div class="ref-tax-note">
								<hr>

								<div class="ref-field-collapsible open">
									<span class="ref-field-toggle">
										<span class="ref-field-toggle-title">${m("cart.tax_exemption_add")}</span>
									</span>
									<div class="ref-collapse">
										<div class="ref-tax-exemption-file">
											<div class="ref-old-tax-file">
												<a href="#" class="ref-tax-file-dl">${m("cart.tax_exemption_file")}</a>
												<span class="ref-remove-tax-file">${m("remove")}</span>
											</div>
											<label class="ref-new-tax-file">
												<span class="ref-tax-file-label">${m("cart.tax_exemption_file_prompt")}</span>
												<input type="file" name="tax-exemption-file" id="ref-field-exemption-file" class="ref-form-control" accept=".doc,.docx,.pdf,.jpg,.jpeg,.png" />
												<div class="ref-validation-error"></div>
											</label>
										</div>
										<label class="ref-tax-exemption-text">
											<span>${m("cart.tax_exemption_number_prompt")}</span>
											<input type="text" name="tax-exemption-text" id="ref-field-exemption-text" class="ref-form-control" maxlength="30" />
											<div class="ref-validation-error"></div>
										</label>
									</div>
								</div>
							</div>

							<hr />

							<div class="ref-field-collapsible ref-note-to-seller open">
								<span class="ref-field-toggle">
									<span class="ref-field-toggle-title">${m("cart.note_to_seller")}</span>
								</span>
								<label class="ref-collapse">
									<textarea id="ref-field-note-seller" class="ref-form-control" name="note-to-seller" row="4" maxlength="1000" placeholder="${m("cart.note_to_seller_placeholder")}" data-state-src="note"></textarea>
								</label>
								<div class="ref-validation-error"></div>
							</div>

							<hr />

							<div>
								<div class="ref-heading ref-heading-payment">${m("payment")}</div>
								<div class="ref-paypal-payment-holder"></div>
								<div class="ref-standard-payment-buttons"></div>
							</div>
						</form>

						<div class="ref-instructions">
							<div class="ref-heading ref-payment-method-name"></div>
							<div class="ref-payment-method-instructions"></div>
						</div>

						<div class="ref-links"></div>
					</div>

					<div class="ref-checkout-summary">
						<div class="ref-heading">${m("cart.order_summary")}</div>
						<div class="ref-products"></div>
						<hr>
						<div class="ref-discount-code">
							<div class="ref-discount-code-container">
								<div class="ref-discount-code-input-holder">
									<input id="ref-discount-code-input" class="ref-form-control" name="discount-code" type="text" maxlength="32" autocomplete="off" placeholder="${m("cart.discount_code_placeholder")}">
									<span class="ref-discount-code-input-clear" title="${m("clear")}">\u2715</span>
								</div>
								<div class="ref-button ref-button-success ref-add-code inactive">${m("apply")}</div>
							</div>
							<div class="ref-validation-error"></div>
						</div>
						<hr>
						<div class="ref-totals">
							<div class="ref-subtotal">
								<div class="ref-row"><span>${m("subtotal")}</span><span></span></div>
							</div>
							<div class="ref-applied-coupon">
								<div class="ref-row">
									<div class="ref-row"><span></span><span class="ref-remove-coupon">${m("remove")}</span></div>
									<span></span>
								</div>
								<div class="ref-applied-coupon-error"></div>
							</div>
							<div class="ref-shipping">
								<div class="ref-row"><span>${m("shipping")}</span><span></span></div>
							</div>
							<div class="ref-taxes">
								<div class="ref-row"><span></span><span></span></div>
							</div>
							<div class="ref-applied-gift-card">
								<div class="ref-row">
									<div class="ref-row"><span></span><span class="ref-remove-gift-card">${m("remove")}</span></div>
									<span></span>
								</div>
								<div class="ref-row"></div>
								<div class="ref-applied-gift-card-error"></div>
							</div>
						</div>
						<hr />
						<div class="ref-total">
							<div class="ref-row"><span>${m("total")}</span><span></span></div>
							<div class="ref-total-note"></div>
						</div>
					</div>
					<div class="ref-summary-toggle ref-field-collapsible">
						<span class="ref-field-toggle">
							<span class="ref-field-toggle-title">${m("cart.show_summary")}</span>
							<span class="ref-summary-total"></span>
						</span>
					</div>
				</div>
			</div>
		`,this.message=e.querySelector(".ref-message"),this.cart=e.querySelector(".ref-cart"),this.checkout=e.querySelector(".ref-checkout"),this.productTable=e.querySelector(".ref-cart-table"),this.loadingOverlay=e.querySelector(".ref-loading-overlay"),this.cartSubtotal=e.querySelector(".ref-cart .ref-subtotal"),this.noteToSeller=e.querySelector(".ref-note-to-seller"),this.acceptTerms=e.querySelector(".ref-accept-terms"),this.discountCode=e.querySelector(".ref-discount-code"),this.discountCodeInput=e.querySelector("#ref-discount-code-input"),this.applyDiscountCodeButton=e.querySelector(".ref-button.ref-add-code"),this.discountCodeClear=e.querySelector(".ref-discount-code-input-clear"),this.discountCodeError=e.querySelector(".ref-discount-code .ref-validation-error"),this.detailsForm=e.querySelector("form.ref-details"),this.taxNote=e.querySelector(".ref-tax-note"),this.fileExemptionInput=e.querySelector("#ref-field-exemption-file"),this.textExemptionInput=e.querySelector("#ref-field-exemption-text"),this.shippingMethodHeading=e.querySelector(".ref-heading-shipping-methods"),this.shippingMethodHolder=e.querySelector(".ref-shipping-methods"),this.locationsHolder=e.querySelector(".ref-locations"),this.standardPaymentButtonHolder=e.querySelector(".ref-standard-payment-buttons"),this.authButton=new oe(this.node.querySelector(".ref-auth-button")),this.shippingAddressWidget=new xe({model:this.shippingAddress,fieldPrefix:"shipping",required:!0,getCountries:()=>this.getShippableCountries(),onChange:()=>this.updateAddress("shipping")}),this.billingAddressWidget=new xe({model:this.billingAddress,fieldPrefix:"billing",required:!0,getCountries:()=>this.getShippableCountries()}),this.digitalAddressWidget=new xe({model:this.digitalAddress,fieldPrefix:"digital",fields:["country"],required:!0,getCountries:()=>this.getShippableCountries(),onChange:()=>this.updateAddress("digital")})}init(){this.taxNote.addEventListener("change",this.onTaxExemptionChange.bind(this)),this.shippingMethodHolder.addEventListener("change",this.onShippingMethodHolderChange.bind(this)),this.locationsHolder.addEventListener("change",this.onPickupLocationChange.bind(this)),this.discountCodeInput.addEventListener("input",this.onDiscountCodeInput.bind(this)),this.node.addEventListener("click",this.onClick.bind(this)),this.node.addEventListener("keypress",this.onKeypress.bind(this)),this.node.addEventListener("change",this.saveToLocalStorage.bind(this)),this.scheduleRefresh=Ke(this.refresh.bind(this),250),le("reflow-add-to-cart",this.scheduleRefresh),le("reflow-update-cart-product",this.scheduleRefresh),le("reflow-remove-cart-product",this.scheduleRefresh),this.authButton.init(),Reflow.auth.on("signin",({profile:e,isNew:r})=>{this.fillInputsFromAuthProfile(),this.update()}),Reflow.auth.on("profile-refreshed",()=>{this.fillInputsFromAuthProfile(),this.update()}),Reflow.auth.on("signout",()=>{this.update()})}isDemoMode(){return this.demoMode||this.state&&this.state.demoMode}getShippableCountries(){var e;return((e=this.state)==null?void 0:e.shippableCountries)||[]}offersShipping(){return this.getShippableCountries().length}offersLocalPickup(){var e,r;return(r=(e=this.state)==null?void 0:e.locations)==null?void 0:r.length}getCountryByCode(e){return this.getShippableCountries().find(r=>r.country_code==e)}isBillingFilled(){return Object.entries(this.billingAddress).some(e=>["city","country","name","address"].includes(e[0])&&e[1].length)}async getPaypalInstance(){return window.paypal?window.paypal:(Q._paypalPromise||(Q._paypalPromise=new Promise((e,r)=>{let i=document.createElement("script");i.onload=()=>e(window.paypal),i.onerror=s=>r(s),document.body.append(i),i.src="https://www.paypal.com/sdk/js?client-id="+this.state.paymentProviders.paypal.clientID+"&disable-funding=credit,bancontact,blik,eps,giropay,ideal,mercadopago,mybank,p24,sepa,sofort,venmo&merchant-id="+this.state.paymentProviders.paypal.merchantID+"&currency="+this.state.currency+"&integration-date=2021-09-01"})),Q._paypalPromise)}restoreUserInput(){if(!!this.state){if(!this.isDemoMode()){let e=this.node.querySelectorAll("[data-state-src]"),r=this.state,i=Reflow.cart.localFormData.getAll();for(let o of e){let l=o.getAttribute("data-state-src"),c=o.getAttribute("type"),d=i[l]!==void 0?i[l]:r[l];d!==void 0&&(c=="checkbox"?o.checked=!!d:o.value=d)}let s=this.state.shippingAddress||{},a=this.state.billingAddress||{},n=this.state.digitalAddress||{};for(let[o,l]of Object.entries(i)){let c=o.split("-");if(c.length>1){let d=c[0],h=c[1];d=="shipping"&&(s[h]=l),d=="billing"&&(a[h]=l),d=="digital"&&(n[h]=l)}}Object.assign(this.shippingAddress,s),Object.assign(this.billingAddress,a),Object.assign(this.digitalAddress,n)}this.billingVisible=this.isBillingFilled(),this.shippingAddressWidget.update(!0,!0),this.billingAddressWidget.update(!0,!0),this.digitalAddressWidget.update(!0,!0),Reflow.auth.profile&&this.fillInputsFromAuthProfile(),this.offersLocalPickup()?this.activeDeliveryTab="pickup":this.offersShipping()&&(this.activeDeliveryTab="shipping")}}fillInputsFromAuthProfile(){let e=Reflow.auth.profile,r=this.node.querySelector("#ref-field-email"),i=this.node.querySelector(".ref-customer-name-input input"),s=this.node.querySelector(".ref-phone-input input"),a=this.shippingAddress||{},n=!1;if(e.email&&r&&!r.value&&(r.value=e.email),e.meta.phone&&s&&!s.value&&(s.value=e.meta.phone),e.name&&(i&&!i.value&&(i.value=e.name),a.name||(a.name=e.name)),e.meta.address){let o=e.meta.address;for(let l of["address","city","country","postcode","state"])o[l]&&!a[l]&&(a[l]=o[l],n=!0)}Object.assign(this.shippingAddress,a),this.shippingAddressWidget.update(!0,!0),n&&this.updateAddress("shipping")}get key(){return localStorage.reflowCartKey}async onClick(e){var i,s;if(!e.target.getAttribute("data-disabled-click")){if(e.target.closest(".ref-product-remove")){let a=e.target.closest(".ref-product"),n=a.dataset.id,o=a.dataset.variant_id,l=new FormData,c=a.dataset.personalization;c&&c.length&&l.append("personalization",c),Reflow.cart.scheduleAPICall(n+"-remove",()=>Reflow.cart.removeProduct(n,o,l),0)}if(e.target.closest(".ref-cart .ref-standard-checkout-button")){if(!this.acceptTerms.checkValidity()){this.acceptTerms.reportValidity();return}for(let a of this.state.errors)if(a.severity=="fatal"&&["unavailable-quantity","product-min-qty-not-reached","product-max-qty-exceeded"].includes(a.type)){X(void 0,this.getStateErrorMessage(a));return}this.setStep("details"),this.update()}if(e.target.closest(".ref-back, .ref-product-update-cart")&&(this.setStep("cart"),this.update()),e.target.closest(".ref-field-collapsible .ref-field-toggle")&&e.target.closest(".ref-field-collapsible").classList.toggle("open"),e.target.closest(".ref-summary-toggle")&&u(".ref-checkout-summary",this.node)[0].classList.toggle("open"),e.target.closest(".button-demo-payment")){let a=new $(u('<div data-reflow-type="toast"></div>'),{type:"info",title:"Payments unavailable in demo",description:"To prevent accidental checkouts, payments are disabled in this demo."});a.init(),a.show();return}if(e.target.closest(".ref-add-billing")){if(this.billingVisible=!0,e.target.closest(".ref-shipping-tab")){Object.assign(this.billingAddress,this.shippingAddress);for(let a of Object.entries(this.billingAddress))Reflow.cart.localFormData.set("billing-"+a[0],a[1])}this.update()}if(e.target.closest(".ref-remove-billing")){this.billingVisible=!1;for(var r in this.billingAddress)Reflow.cart.localFormData.set("billing-"+r,""),delete this.billingAddress[r];this.update()}if(e.target.closest(".ref-remove-tax-file")&&(this.showLoading(),await k(`/remove-tax-exemption-file/${this.key}/`,{method:"POST"},!1),await this.refresh()),e.target.closest(".ref-payment-button")){let a=e.target.closest(".ref-payment-button");if(this.isDemoMode())return;if((i=this.state.vacationMode)==null?void 0:i.enabled){let l=this.state.vacationMode.message.length?this.state.vacationMode.message:g("store_unavailable");X(l);return}if(this.clearFormErrors(),!this.checkFormValidity(this.detailsForm))return;this.showLoading();let n=new FormData(this.detailsForm);n.append("success-url",this.getSuccessURL({session_id:"{CHECKOUT_SESSION_ID}"})),n.append("cancel-url",this.getCancelURL());let o=a.dataset.method;n.append("payment-method",o),n.append("payment-id",(s=a.dataset.paymentId)!=null?s:""),Reflow.auth.isSignedIn()&&n.append("auth-account-id",Reflow.auth.profile.id);try{if(await this.refreshState(),this.update(),!this.canFinish()){X(this.getStateErrors()[0]);return}let l=await k(`/complete-checkout/${this.key}/`,{method:"POST",body:n},!1);if(!l.success)return;if(l.order&&l.order.amount==0){window.location=this.getSuccessURL({order_id:l.order.id,secure_hash:l.order.secure_hash});return}if(o=="zero-value-cart"&&!l.order&&(await this.refreshState(),this.update()),o=="stripe"&&l.stripeCheckoutURL){window.location=l.stripeCheckoutURL;return}if(o=="custom"&&l.order){let c=Object.entries(this.state.paymentProviders).find(p=>p[0]==a.dataset.paymentId);if(!c)return;if(c=c[1],!c.instructions){window.location=this.getSuccessURL({order_id:l.order.id,secure_hash:l.order.secure_hash});return}let d=this.checkout.querySelector(".ref-instructions");d.querySelector(".ref-payment-method-name").textContent=c.name;let h=c.instructions.replaceAll("{orderid}",l.order.id);h=h.replaceAll("{amount}",this.formatMoney(l.order.amount)),d.querySelector(".ref-payment-method-instructions").innerHTML=h,this.setStep("instructions"),this.update()}if(o=="pay-in-store"&&l.order){let c=this.state.locations.find(p=>p.chosen);if(!c||!c.instructions){window.location=this.getSuccessURL({order_id:l.order.id,secure_hash:l.order.secure_hash});return}let d=this.checkout.querySelector(".ref-instructions");d.querySelector(".ref-payment-method-name").textContent=g("pickup_at_store");let h=c.instructions.replaceAll("{orderid}",l.order.id);h=h.replaceAll("{amount}",this.formatMoney(l.order.amount)),d.querySelector(".ref-payment-method-instructions").innerHTML=h,this.setStep("instructions"),this.update()}}catch(l){l.data&&l.data.errors&&(this.showFormErrors(l.data.errors),l.data.errors.system&&X(Y(l,"system"),g("cart.errors.cannot_complete")))}finally{this.hideLoading()}}if(e.target.closest(".ref-add-code")){let a=this.discountCodeInput.value.trim();if(this.discountCodeError.textContent="",!a.length)return;this.showLoading();try{let n=new FormData;n.append("code",a);let o=await k(`/apply-discount-code/${this.key}/`,{method:"POST",body:n},!1);this.discountCodeInput.value="";let l=new $(u('<div data-reflow-type="toast"></div>'),{type:"success",title:g("cart."+o.type+"_added")});l.init(),l.show(),await this.refresh()}catch(n){this.discountCodeError.textContent=Y(n)}finally{this.hideLoading()}}if(e.target.closest(".ref-discount-code-input-clear")&&(this.discountCodeInput.value="",this.applyDiscountCodeButton.classList.add("inactive"),this.discountCodeError.textContent=""),e.target.closest(".ref-remove-coupon")){if(!this.state.coupon)return;this.showLoading();try{await k(`/remove-coupon/${this.key}/`,{method:"POST"},!1);let a=new $(u('<div data-reflow-type="toast"></div>'),{type:"success",title:g("cart.coupon_removed")});a.init(),a.show(),await this.refresh()}catch(a){X()}finally{this.hideLoading()}}if(e.target.closest(".ref-remove-gift-card")){if(!this.state.giftCard)return;this.showLoading();try{await k(`/remove-gift-card/${this.key}/`,{method:"POST"},!1);let a=new $(u('<div data-reflow-type="toast"></div>'),{type:"success",title:g("cart.gift_card_removed")});a.init(),a.show(),await this.refresh()}catch(a){X()}finally{this.hideLoading()}}if(e.target.closest(".ref-delivery-card .ref-tab-toggle")){let a=e.target.closest(".ref-tab").dataset.refDelivery;if(this.activeDeliveryTab==a)return;this.activeDeliveryTab=a,this.chosenStoreLocation=-1,this.shippingMethodIndex=-1,a=="shipping"&&this.isShippingFilled()&&await this.invalidateTaxExemption(this.getShippingAddress()),this.refresh()}}}onKeypress(e){e.keyCode==13&&e.target.matches(".ref-quantity-widget input")&&e.target.blur()}saveToLocalStorage(e){let r=e.target.getAttribute("data-state-src");if(r){let i=e.target.value.trim();e.target.type=="checkbox"&&(i=e.target.checked),Reflow.cart.localFormData.set(r,i)}}checkFormValidity(e){for(let r of e.querySelectorAll("input, textarea, select"))if(!r.checkValidity())return r.parentElement.scrollIntoView(),setTimeout(()=>r.reportValidity(),600),!1;return!0}onShippingMethodHolderChange(e){this.shippingMethodIndex=e.target.value,this.refresh()}async onPickupLocationChange(e){let r=e.target.closest("label").dataset.refLocation,i=this.state.locations.find(s=>s.id==r);!i||(await this.invalidateTaxExemption(i.address),this.chosenStoreLocation=e.target.value,this.refresh())}onDiscountCodeInput(e){this.discountCodeError.textContent="",e.target.value.length?(this.applyDiscountCodeButton.classList.remove("inactive"),this.discountCodeClear.style.display="block"):(this.applyDiscountCodeButton.classList.add("inactive"),this.discountCodeClear.style.display="none")}showFormErrors(e){for(let r in e){let i=this.detailsForm.querySelector(`[name=${r}]`);if(!i)continue;let s=i.closest(".ref-error-parent")||i.closest("label"),a="";Array.isArray(e[r])&&(a=e[r][0]),a||(a=g(e[r])),a||(a=e[r]),s.querySelector(".ref-validation-error").textContent=a}}clearFormErrors(){for(let e of u(".ref-validation-error",this.node))e.textContent=""}getStep(){return this.step}setStep(e){Q.steps.includes(e)&&(this.step=e)}getShippingAddress(){let e={};if(this.shippingAddress.name&&(e.name=this.shippingAddress.name),this.shippingAddress.address&&(e.address=this.shippingAddress.address),!this.shippingAddress.city)return;e.city=this.shippingAddress.city;let r=this.shippingAddress.country;if(!r)return;let i=this.getCountryByCode(r);if(!!i){if(e.country=r,i.has_postcode){if(!this.shippingAddress.postcode)return;e.postcode=this.shippingAddress.postcode}if(i.has_regions){if(!this.shippingAddress.state)return;e.state=this.shippingAddress.state}return e}}getDigitalAddress(){let e={},r=this.digitalAddress.country;if(!(!r||!this.getCountryByCode(r))){if(e.country=r,r=="US"){if(!this.digitalAddress.postcode||(e.postcode=this.digitalAddress.postcode,!this.digitalAddress.state))return;e.state=this.digitalAddress.state}return e}}isShippingFilled(){return!!this.getShippingAddress()}getSuccessURL(e={}){try{if(!this.node.dataset.reflowSuccessUrl)throw Error("invalid");let r=new URL(this.node.dataset.reflowSuccessUrl,window.location.href),i=r.search;for(let s in e)i+=i.length?"&":"?",i+=`${s}=${e[s]}`;return r.search=i,r.href}catch(r){return window.location.href}}getCancelURL(){try{if(!this.node.dataset.reflowCancelUrl)throw Error("invalid");return new URL(this.node.dataset.reflowCancelUrl,window.location.href).href}catch(e){return window.location.href}}canDeliver(){return!this.state.errors.filter(e=>e.type=="delivery-unavailable").length}canShip(){return this.state.shipping.length&&!this.state.errors.filter(e=>e.type=="cannot-ship").length}hasZeroValue(){return this.state.total==0}canFinish(){return!this.state.errors.filter(e=>e.severity=="fatal").length}getStateErrorMessage(e={}){try{let r=e.type.replaceAll("-","_"),i=e.formats||null;return i?g("cart.errors."+r,i):g("cart.errors."+r)}catch(r){return e.message||""}}getStateErrors(){return(this.state.errors||[]).map(this.getStateErrorMessage.bind(this)).filter(r=>!!r)}async updateAddress(e){let r;if(e=="shipping"&&(r=this.getShippingAddress()),e=="digital"&&(r=this.getDigitalAddress()),!r)return;let i=new FormData;if(i.append("address",JSON.stringify(r)),i.append("delivery_method",e),this.clearFormErrors(),this.showLoading(),(await k(`/update-address/${this.key}/`,{method:"POST",body:i},!1)).taxExemptionRemoved){let a=new $(u('<div data-reflow-type="toast"></div>'),{type:"warning",title:g("cart.tax_exemption_cleared"),description:g("cart.tax_exemption_cleared_details")});a.init(),a.show()}await this.refresh()}async onTaxExemptionChange(e){let r,i=this.hasPhysicalProducts()?this.activeDeliveryTab:"digital";if(i=="shipping"&&(r=this.getShippingAddress()),i=="pickup")for(let n of this.state.locations)n.chosen&&(r=n.address);if(i=="digital"&&(r=this.getDigitalAddress()),!r){this.checkFormValidity(this.detailsForm);return}let s=new FormData;s.append("address",JSON.stringify(r)),s.append("delivery-method",i);let a=e.target.name=="tax-exemption-file"?e.target.files[0]:e.target.value;s.append(e.target.name,a),this.clearFormErrors(),this.showLoading();try{await k(`/update-tax-exemption/${this.key}/`,{method:"POST",body:s},!1)}catch(n){console.error("Reflow:",n)}await this.refresh()}getFooterLinks(){let e=[];if(this.state)for(let r of this.state.footerLinks){let i=document.createElement("a");i.textContent=g("cart."+r.id),i.href=r.url,i.target="_blank",e.push(i)}return e}hasPhysicalProducts(){if(this.state){for(let e of this.state.products)if(e.type=="physical")return!0}return!1}showMessage(e){this.message.style.display="block",this.message.textContent=e}resetView(){this.message.style.display="none",this.cart.style.display="none",this.checkout.style.display="none"}async refresh(){this.showLoading(),await this.refreshState(),this.hideLoading(),this.update()}renderProduct(e){let r=u(`
			<div class="ref-product">
				<div class="ref-product-col">
					<div class="ref-product-wrapper">
						<img class="ref-product-photo">
						<div class="ref-product-data">

							<div class="ref-product-info">
								<div>
									<div class="ref-product-name"></div>
									<div class="ref-product-category"></div>
									<div class="ref-product-variants"></div>
									<div class="ref-product-personalization-holder"></div>
								</div>

								<div class="ref-product-price ref-mobile-product-price"></div>
							</div>

							<div class="ref-product-controls ref-mobile-product-controls">
								<div class="ref-product-quantity">
									<div class="ref-quantity-container"></div>
									<div class="ref-product-qty-message"></div>
								</div>

								<div class="ref-product-remove"><svg xmlns="http://www.w3.org/2000/svg" height="18" width="18" viewBox="0 0 48 48" ><path fill="currentColor" d="M13.05 42q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2.05V39q0 1.2-.9 2.1-.9.9-2.1.9Zm21.9-31.5h-21.9V39h21.9Zm-16.6 24.2h3V14.75h-3Zm8.3 0h3V14.75h-3Zm-13.6-24.2V39Z"/></svg></div>
							</div>

						</div>
					</div>
				</div>
				<div class="ref-price-col">
					<div class="ref-product-price"></div>
				</div>
				<div class="ref-quantity-col">
					<div class="ref-product-quantity">
						<div class="ref-quantity-container"></div>
						<div class="ref-product-qty-message"></div>
						<div class="ref-product-remove">${m("remove")}</div>
					</div>
				</div>
				<div class="ref-total-col">
					<div class="ref-product-total">
						<div class="ref-product-total-sum"></div>
					</div>
				</div>
			</div>
		`),i=e.name;if(r.dataset.id=e.id,r.dataset.quantity=e.quantity,e.variant){r.dataset.variant_id=e.variant.id;let d=u(".ref-product-variants",r)[0],h=u('<div class="ref-product-variant"></div>');h.textContent=e.variant.option_name+": "+e.variant.name,d.append(h)}if(e.personalization&&e.personalization.length)try{r.dataset.personalization=JSON.stringify(e.personalization.map(h=>{let p={id:h.id};return h.inputText&&(p.inputText=h.inputText),h.selected&&(p.selected=h.selected),h.filename&&(p.filename=h.filename),h.filehash&&(p.filehash=h.filehash),p}));let d=u(".ref-product-personalization-holder",r)[0];for(let h of e.personalization){let p=u('<div class="ref-product-personalization"></div>'),v=`${h.name}${h.inputText?': "'+h.inputText+'" ':""}${h.selected?': "'+h.selected+'" ':""}${h.filename?': "'+h.filename+'" ':""} ${h.price?"+"+this.formatMoney(h.price):"- "+g("price_free")}`;p.title=v,v=v.length>55?v.substring(0,55)+"...":v,p.textContent=v,d.append(p)}}catch(d){console.error("Reflow:",d)}let s=u(".ref-product-photo",r)[0];s.src=e.image.sm,s.alt=i,u(".ref-product-name",r)[0].textContent=i;let a=u(".ref-product-price",r)||[];for(let d of a)this.getTaxPricingType()=="inclusive"?d.textContent=this.formatMoney(e.unitPrice+e.tax/e.quantity):d.textContent=this.formatMoney(e.unitPrice);if(e.inStock){if(e.quantity>e.availableQuantity)for(let d of u(".ref-product-qty-message",r))d.textContent=g("cart.left_in_stock",{in_stock:e.availableQuantity});else if(e.quantity>e.maxQty)for(let d of u(".ref-product-qty-message",r))d.textContent=g("cart.max_product_qty",{max_quantity:e.maxQty})}let n=u(".ref-product-total-sum",r)||[];for(let d of n)e.inStock?this.getTaxPricingType()=="inclusive"?d.textContent=this.formatMoney(e.price+e.tax):d.textContent=this.formatMoney(e.price):(d.textContent=g("out_of_stock"),d.classList.add("out-of-stock"));let o=u(".ref-product-quantity input",r)||[];for(let d of o)d.value=e.quantity;let l=g("product");e.categories.length&&(l=e.categories[0].name),u(".ref-product-category",r)[0].textContent=l;let c=u(".ref-quantity-container",r)||[];for(let d of c){let h=new ve(d,{inStock:e.inStock,onChange:p=>{let v=p.getProduct(),y=p.getQuantity(),b=p.getVariant(),_=r,S=new FormData,L=_.dataset.personalization;L&&L.length&&S.append("personalization",L),Reflow.cart.scheduleAPICall(v+(b?`-${b}`:"")+"-quantity",()=>Reflow.cart.updateProduct(v,y,b,S))}});h.init(),e.variant&&h.setVariant(e.variant.id),h.setProduct(e.id),h.setMaxQuantity(Math.min(e.availableQuantity,e.maxQty)),h.setQuantity(e.quantity),h.update()}return r}renderProductCompact(e){let r=u(`
			<div class="ref-product">
				<div class="ref-product-col">
					<img class="ref-product-photo">
					<div>
						<div class="ref-product-name"></div>
						<div class="ref-product-secondary"></div>
						<div class="ref-product-personalization-holder"></div>
						<div class="ref-product-qty-message"></div>
						<div class="ref-product-update-cart"></div>
					</div>
				</div>
				<div>
					<div class="ref-product-total"></div>
					<div class="ref-product-remove">${m("remove")}</div>
				</div>
			</div>
		`),i=e.name;r.dataset.id=e.id,e.variant&&(r.dataset.variant_id=e.variant.id,i+=` (${e.variant.name})`);let s=u(".ref-product-photo",r)[0];s.src=e.image.sm,s.alt=i,u(".ref-product-name",r)[0].textContent=i,u(".ref-product-secondary",r)[0].textContent=this.formatMoney(e.unitPrice)+" x "+e.quantity,e.inStock&&e.quantity>e.availableQuantity?(r.classList.add("ref-warning"),u(".ref-product-qty-message",r)[0].textContent=g("cart.left_in_stock",{in_stock:e.availableQuantity}),u(".ref-product-update-cart",r)[0].textContent=g("cart.update")):e.inStock&&e.quantity>e.maxQty?(r.classList.add("ref-warning"),u(".ref-product-qty-message",r)[0].textContent=g("cart.max_product_qty",{max_quantity:e.maxQty}),u(".ref-product-update-cart",r)[0].textContent=g("cart.update")):(u(".ref-product-qty-message",r)[0].remove(),u(".ref-product-update-cart",r)[0].remove());let a=u(".ref-product-total",r)[0];if(e.inStock?(a.textContent=this.formatMoney(e.price),u(".ref-product-remove",r)[0].remove()):(a.textContent=g("out_of_stock"),a.classList.add("out-of-stock")),e.personalization&&e.personalization.length){let n=u(".ref-product-personalization-holder",r)[0];for(let o of e.personalization){let l=u('<div class="ref-product-personalization"></div>'),c=`${o.name}${o.inputText?': "'+o.inputText+'"':""}${o.selected?': "'+o.selected+'"':""}${o.filename?': "'+o.filename+'" ':""}`;l.title=c,c=c.length>25?c.substring(0,25)+"...":c,l.textContent=c,n.append(l)}}return r}renderShippingMethod(e,r){let i=u(`<label class="ref-row">
			<div class="ref-method-radio"><input type="radio" value="" name="shipping-method" required /></div>
			<div class="ref-method-name"></div>
			<div class="ref-method-price">$19.00</div>
		</label>`),s=u("input",i)[0];s.value=r,s.checked=e.chosen;let a=u(".ref-method-name",i)[0],n=document.createElement("b");if(n.textContent=e.name,a.append(n),e.delivery_time){let o=document.createElement("small");o.textContent=this.getDeliveryDate(e.delivery_time)+" - "+this.getDeliveryDate(e.delivery_time+2),a.append(o)}if(e.note){let o=document.createElement("small");o.textContent=e.note,a.append(o)}return u(".ref-method-price",i)[0].textContent=this.formatMoney(e.price),i}renderStoreLocation(e,r){let i=u(`<label>
			<input type="radio" value="" name="store-location" required />
			<div class="ref-location-card">
				<b class="ref-location-name"></b>
				<div class="ref-location-address"></div>
				<div class="ref-location-contacts"></div>
			</div>
		</label>`);i.dataset.refLocation=e.id;let s=u("input",i)[0];s.value=r,s.checked=e.chosen;let a=u(".ref-location-name",i)[0];a.textContent=e.name;let n=u(".ref-location-address",i)[0],o=e.address.address+", "+e.address.city+", ";e.address.country=="US"&&e.address.state&&(o+=e.address.state+", "),o+=e.address.countryName,n.textContent=o;let l=document.createElement("b");l.textContent=`${g("address")}: `,n.prepend(l);let c=u(".ref-location-contacts",i)[0];if(e.email){let d=document.createElement("span");d.textContent=e.email;let h=document.createElement("b");h.textContent=`${g("email")}: `,d.prepend(h),c.append(d)}if(e.phone){let d=document.createElement("span");d.textContent=e.phone;let h=document.createElement("b");h.textContent=`${g("phone")}: `,d.prepend(h),c.append(d)}if(e.working_hours){let d=document.createElement("span");d.textContent=e.working_hours;let h=document.createElement("b");h.textContent=`${g("working_hours")}: `,d.prepend(h),c.append(d)}if(e.delivery_time){let d=document.createElement("span");d.textContent=this.getDeliveryDate(e.delivery_time);let h=document.createElement("b");h.textContent=`${g("cart.order_ready_for_pickup_label")}: `,d.prepend(h),c.append(d)}return i}renderPaymentButton(e,r,i,s){let a=document.createElement("div");return a.textContent=e,a.classList.add("ref-button"),a.classList.add("ref-payment-button"),r&&(r=r.toLowerCase().replaceAll("_","-").replaceAll(" ","-"),a.classList.add("ref-payment-"+r)),a.dataset.method=i,s&&(a.dataset.paymentId=s),a}formatMoney(e){return N(e,this.state.currencyConfig)}hasNextStep(){return Q.steps.indexOf(this.step)==0}hasPreviousStep(){return Q.steps.indexOf(this.step)==1}next(){let e=Q.steps.indexOf(this.step);this.step=Q.steps[e+1]}previous(){let e=Q.steps.indexOf(this.step);this.step=Q.steps[e-1]}get state(){return this.demoMode?this._state||null:this._state||Reflow.cart.state||null}set state(e=null){this._state=e}async refreshState(){if(this.mockData){this.state=this.mockData;return}let e={};this.activeDeliveryTab&&(e.deliveryMethod=this.activeDeliveryTab),this.shippingMethodIndex>=0&&(e.chosenShippingMethod=this.shippingMethodIndex),this.chosenStoreLocation>=0&&(e.chosenStoreLocation=this.chosenStoreLocation),await Reflow.cart.refresh(e)}async invalidateTaxExemption(e){this.showLoading();let r=new FormData;if(r.append("address",JSON.stringify(e)),(await k(`/invalidate-tax-exemption/${this.key}/`,{method:"POST",body:r},!1)).taxExemptionRemoved){let s=new $(u('<div data-reflow-type="toast"></div>'),{type:"warning",title:g("cart.tax_exemption_cleared"),description:g("cart.tax_exemption_cleared_details")});s.init(),s.show()}}arePaymentProvidersAvailable(){return this.isStripeSupported()||this.isPaypalSupported()||this.hasCustomPayments()||this.hasPayInStorePayments()}onlyPaypalNoDelivery(){return!(!this.hasPhysicalProducts()||!this.isPaypalSupported()||this.offersShipping()||this.isStripeSupported()||this.hasCustomPayments()||this.hasPayInStorePayments())}isStripeSupported(){return this.state.paymentProviders.stripe.supported}isPaypalSupported(){return this.hasPhysicalProducts()&&!this.offersShipping()?!1:this.state.paymentProviders.paypal.supported}hasCustomPayments(){return Object.entries(this.state.paymentProviders).some(e=>e[1].provider=="custom")}hasPayInStorePayments(){return this.state.locations.some(e=>!!e.pay_in_store)}updateCart(){var i,s;if(!this.state)return this.showMessage(g("cart.errors.unavailable"));if(!this.state.products.length)return this.showMessage(g("cart.errors.empty"));this.cart.style.display="block",this.renderTestModeBadge(this.node),this.productTable.innerHTML="";for(let a of this.state.products)this.productTable.append(this.renderProduct(a));let e=this.cart.querySelector(".ref-links");e.innerHTML="";for(let a of this.getFooterLinks())e.append(a);if(this.getTaxPricingType()=="inclusive"?this.cartSubtotal.textContent=`${g("subtotal")}: `+this.formatMoney(this.state.subtotal+this.state.taxes.amount):this.cartSubtotal.textContent=`${g("subtotal")}: `+this.formatMoney(this.state.subtotal),(i=this.state.vacationMode)==null?void 0:i.enabled){let a=this.cart.querySelector(".ref-standard-checkout-button");if(a.classList.add("inactive"),this.state.vacationMode.message.length){let n=u('<div class="ref-store-message"></div>');n.textContent=this.state.vacationMode.message,this.cart.querySelector(".ref-totals").insertBefore(n,a)}}this.acceptTerms.style.display="none",this.acceptTerms.querySelector("#ref-terms-agreement").required=!1;let r=this.acceptTerms.querySelector(".ref-terms-agreement-text");r.innerHTML="";for(let a=0;a<this.state.footerLinks.length;a++){let n=this.state.footerLinks[a];if(n.required){this.acceptTerms.style.display="block",this.acceptTerms.querySelector("#ref-terms-agreement").required=!0,r.childNodes.length?r.append(u("<span>"+(a===this.state.footerLinks.length-1?` ${m("and")} `:", ")+"</span>")):r.append(u(`<span>${m("cart.terms_agree",{terms:""})} </span>`));let o=u("<a>");o.href=n.url,o.textContent=g("cart."+n.id),r.append(o)}}if(this.isDemoMode()){this.node.querySelector(".ref-paypal-express-checkout-holder").innerHTML=`<div class="paypal-button paypal-button-gold button-demo-payment">
				<svg xmlns="http://www.w3.org/2000/svg" height="22" viewBox="0 0 101 32" preserveAspectRatio="xMinYMin meet"><path fill="#003087" d="M 12.237 2.8 L 4.437 2.8 C 3.937 2.8 3.437 3.2 3.337 3.7 L 0.237 23.7 C 0.137 24.1 0.437 24.4 0.837 24.4 L 4.537 24.4 C 5.037 24.4 5.537 24 5.637 23.5 L 6.437 18.1 C 6.537 17.6 6.937 17.2 7.537 17.2 L 10.037 17.2 C 15.137 17.2 18.137 14.7 18.937 9.8 C 19.237 7.7 18.937 6 17.937 4.8 C 16.837 3.5 14.837 2.8 12.237 2.8 Z M 13.137 10.1 C 12.737 12.9 10.537 12.9 8.537 12.9 L 7.337 12.9 L 8.137 7.7 C 8.137 7.4 8.437 7.2 8.737 7.2 L 9.237 7.2 C 10.637 7.2 11.937 7.2 12.637 8 C 13.137 8.4 13.337 9.1 13.137 10.1 Z"/><path fill="#003087" d="M 35.437 10 L 31.737 10 C 31.437 10 31.137 10.2 31.137 10.5 L 30.937 11.5 L 30.637 11.1 C 29.837 9.9 28.037 9.5 26.237 9.5 C 22.137 9.5 18.637 12.6 17.937 17 C 17.537 19.2 18.037 21.3 19.337 22.7 C 20.437 24 22.137 24.6 24.037 24.6 C 27.337 24.6 29.237 22.5 29.237 22.5 L 29.037 23.5 C 28.937 23.9 29.237 24.3 29.637 24.3 L 33.037 24.3 C 33.537 24.3 34.037 23.9 34.137 23.4 L 36.137 10.6 C 36.237 10.4 35.837 10 35.437 10 Z M 30.337 17.2 C 29.937 19.3 28.337 20.8 26.137 20.8 C 25.037 20.8 24.237 20.5 23.637 19.8 C 23.037 19.1 22.837 18.2 23.037 17.2 C 23.337 15.1 25.137 13.6 27.237 13.6 C 28.337 13.6 29.137 14 29.737 14.6 C 30.237 15.3 30.437 16.2 30.337 17.2 Z"/><path fill="#003087" d="M 55.337 10 L 51.637 10 C 51.237 10 50.937 10.2 50.737 10.5 L 45.537 18.1 L 43.337 10.8 C 43.237 10.3 42.737 10 42.337 10 L 38.637 10 C 38.237 10 37.837 10.4 38.037 10.9 L 42.137 23 L 38.237 28.4 C 37.937 28.8 38.237 29.4 38.737 29.4 L 42.437 29.4 C 42.837 29.4 43.137 29.2 43.337 28.9 L 55.837 10.9 C 56.137 10.6 55.837 10 55.337 10 Z"/><path fill="#009cde" d="M 67.737 2.8 L 59.937 2.8 C 59.437 2.8 58.937 3.2 58.837 3.7 L 55.737 23.6 C 55.637 24 55.937 24.3 56.337 24.3 L 60.337 24.3 C 60.737 24.3 61.037 24 61.037 23.7 L 61.937 18 C 62.037 17.5 62.437 17.1 63.037 17.1 L 65.537 17.1 C 70.637 17.1 73.637 14.6 74.437 9.7 C 74.737 7.6 74.437 5.9 73.437 4.7 C 72.237 3.5 70.337 2.8 67.737 2.8 Z M 68.637 10.1 C 68.237 12.9 66.037 12.9 64.037 12.9 L 62.837 12.9 L 63.637 7.7 C 63.637 7.4 63.937 7.2 64.237 7.2 L 64.737 7.2 C 66.137 7.2 67.437 7.2 68.137 8 C 68.637 8.4 68.737 9.1 68.637 10.1 Z"/><path fill="#009cde" d="M 90.937 10 L 87.237 10 C 86.937 10 86.637 10.2 86.637 10.5 L 86.437 11.5 L 86.137 11.1 C 85.337 9.9 83.537 9.5 81.737 9.5 C 77.637 9.5 74.137 12.6 73.437 17 C 73.037 19.2 73.537 21.3 74.837 22.7 C 75.937 24 77.637 24.6 79.537 24.6 C 82.837 24.6 84.737 22.5 84.737 22.5 L 84.537 23.5 C 84.437 23.9 84.737 24.3 85.137 24.3 L 88.537 24.3 C 89.037 24.3 89.537 23.9 89.637 23.4 L 91.637 10.6 C 91.637 10.4 91.337 10 90.937 10 Z M 85.737 17.2 C 85.337 19.3 83.737 20.8 81.537 20.8 C 80.437 20.8 79.637 20.5 79.037 19.8 C 78.437 19.1 78.237 18.2 78.437 17.2 C 78.737 15.1 80.537 13.6 82.637 13.6 C 83.737 13.6 84.537 14 85.137 14.6 C 85.737 15.3 85.937 16.2 85.737 17.2 Z"/><path fill="#009cde" d="M 95.337 3.3 L 92.137 23.6 C 92.037 24 92.337 24.3 92.737 24.3 L 95.937 24.3 C 96.437 24.3 96.937 23.9 97.037 23.4 L 100.237 3.5 C 100.337 3.1 100.037 2.8 99.637 2.8 L 96.037 2.8 C 95.637 2.8 95.437 3 95.337 3.3 Z"/></svg>
			</div>`;return}this.paypalButtonsInitialized||((s=this.state.vacationMode)==null?void 0:s.enabled)||this.isPaypalSupported()&&(this.getPaypalInstance().then(a=>{a.Buttons({fundingSource:a.FUNDING.PAYPAL,createOrder:this.paypalCreateOrder.bind(this),onApprove:this.paypalOnApprove.bind(this),onError:this.paypalError.bind(this),onShippingChange:this.paypalShippingChange.bind(this),onCancel:this.paypalCancel.bind(this),style:{height:42,disableMaxWidth:!0}}).render(this.node.querySelector(".ref-paypal-express-checkout-holder"));let n=[a.FUNDING.PAYPAL];this.isStripeSupported()||n.push(a.FUNDING.CARD);for(let o of n)a.Buttons({fundingSource:o,createOrder:this.paypalCreateOrder.bind(this),onApprove:this.paypalOnApprove.bind(this),onError:this.paypalError.bind(this),onShippingChange:this.paypalShippingChange.bind(this),onCancel:this.paypalCancel.bind(this),style:{disableMaxWidth:!0}}).render(this.node.querySelector(".ref-paypal-payment-holder"))}),this.paypalButtonsInitialized=!0)}updateCheckout(){var he;this.renderTestModeBadge(this.node.querySelector(".ref-checkout-content")),this.clearFormErrors(),this.checkout.style.display="flex";let e=this.checkout.querySelector(".ref-details"),r=this.checkout.querySelector(".ref-instructions");e.style.display="none",r.style.display="none",this.step=="details"?e.style.display="block":this.step=="instructions"&&(r.style.display="block");let i=this.checkout.querySelector(".ref-products");i.innerHTML="";for(let w of this.state.products)i.append(this.renderProductCompact(w));let s=this.checkout.querySelector(".ref-subtotal");s.firstElementChild.children[1].textContent=this.formatMoney(this.state.subtotal),this.discountCode.classList.remove("hidden"),this.discountCode.nextElementSibling.style.display="block";let a=this.checkout.querySelector(".ref-applied-coupon");a.style.display="none";let n=this.checkout.querySelector(".ref-applied-gift-card");if(n.style.display="none",this.state.coupon){a.style.display="block";let w=this.state.coupon,P=w.name||w.code.toUpperCase();P.length>15&&(P=P.substring(0,15)+"..."),a.firstElementChild.firstElementChild.children[0].textContent=P,a.firstElementChild.children[1].textContent=w.errorCode?"":"-"+this.formatMoney(this.state.discount),a.querySelector(".ref-applied-coupon-error").textContent=Y({data:{errorCode:w.errorCode}})||""}if(this.state.giftCard){n.style.display="block";let w=this.state.giftCard,P=w.code;n.firstElementChild.firstElementChild.children[0].textContent=P,n.firstElementChild.children[1].textContent=w.errorCode?"":"-"+this.formatMoney(w.discountAmount),n.children[1].textContent="("+g("cart.gift_card_balance",{amount:this.formatMoney(w.balance)})+")",n.querySelector(".ref-applied-gift-card-error").textContent=Y({data:{errorCode:w.errorCode}})||""}this.state.giftCard&&this.state.coupon&&(this.discountCode.classList.add("hidden"),this.discountCode.nextElementSibling.style.display="none",this.discountCodeError.textContent=""),this.step=="instructions"&&(this.discountCode.classList.add("hidden"),this.discountCode.nextElementSibling.style.display="none",a.querySelector(".ref-remove-coupon").style.display="none",n.querySelector(".ref-remove-gift-card").style.display="none");let o=this.checkout.querySelector(".ref-shipping");if(o.style.display="none",this.hasPhysicalProducts()){o.style.display="block";let w=g("shipping"),P=g("cart.shipping_not_selected");if(this.activeDeliveryTab=="shipping")for(let V of this.state.shipping)V.chosen&&(w=`${g("shipping")} (${V.name})`,P=this.formatMoney(V.price));if(this.activeDeliveryTab=="pickup"){w=g("pickup_at_store"),P=this.formatMoney(0);for(let V of this.state.locations)V.chosen&&(w=g("cart.pickup_at_store",{store:V.name}))}o.firstElementChild.children[0].textContent=w,o.firstElementChild.children[1].textContent=P}let l=this.checkout.querySelector(".ref-total");l.firstElementChild.children[1].textContent=this.formatMoney(this.state.total),this.checkout.querySelector(".ref-total-note").textContent=g("cart.prices_currency_description",{currency:this.state.currency});let c=this.checkout.querySelector(".ref-summary-total");c.textContent=this.formatMoney(this.state.total),this.taxNote.style.display="none";let d=this.checkout.querySelector(".ref-taxes");if(d.style.display="none",this.fileExemptionInput.disabled=!0,this.textExemptionInput.disabled=!0,this.state.taxes){let w=this.state.taxes.details,P=w.taxRate,V=d.querySelectorAll("span");if(V[0].textContent=`${P.name} (${P.rate}%)`+(w.exemption?" \u2013 "+w.exemption:""),V[1].textContent=this.formatMoney(this.state.taxes.amount),d.style.display="block",w.exemptionType){this.taxNote.style.display="block";let ql=this.node.querySelector(".ref-tax-note .ref-field-collapsible"),Nr=this.taxNote.querySelector(".ref-tax-exemption-file"),qr=this.taxNote.querySelector(".ref-tax-exemption-text");Nr.style.display="none",qr.style.display="none";let se=this.state.taxExemption;if(w.exemptionType=="file"){Nr.style.display="block",this.fileExemptionInput.disabled=!1;let Ur=this.taxNote.querySelector(".ref-new-tax-file");Ur.style.display="block";let $r=this.taxNote.querySelector(".ref-old-tax-file");$r.style.display="none";let Fr=this.taxNote.querySelector(".ref-tax-file-dl");Fr.href="#",se&&se.download&&(Ur.style.display="none",$r.style.display="block",Fr.href=se.download)}w.exemptionType=="vat_number"&&(qr.style.display="block",this.textExemptionInput.disabled=!1,this.textExemptionInput.value="",se&&se.vat_number&&(this.textExemptionInput.value=se.vat_number.input||se.vat_number.number,se.vat_number.status=="invalid"&&this.showFormErrors({"tax-exemption-text":"cart.errors.vat_number_invalid"}),se.status=="unvalidated"&&this.showFormErrors({"tax-exemption-text":"cart.errors.vat_number_validation_fail"})))}}let h=this.checkout.querySelector(".ref-links");h.innerHTML="";for(let w of this.getFooterLinks())h.append(w);let p=e.querySelector(".ref-phone-input");p&&!this.state.collectPhone&&p.remove();let v=this.hasPhysicalProducts(),y=!v,b=v&&this.offersShipping(),_=v&&this.offersLocalPickup(),S=b&&_,L=e.querySelector(".ref-heading-delivery"),E=e.querySelector(".ref-delivery-unavailable"),U=e.querySelector(".ref-delivery-card"),F=U.querySelectorAll('.ref-delivery-card input[name="delivery-method"]');L.style.display="none",E.style.display="none",U.style.display="none";for(let w of F)w.disabled=!0;let M=e.querySelector(".ref-digital-delivery");M.style.display="none",M.disabled=!0;let H=e.querySelector(".ref-customer-name-input");if(H.style.display="none",H.querySelector("input").disabled=!0,(this.activeDeliveryTab=="pickup"||y)&&(H.style.display="block",H.querySelector("input").disabled=!1),v&&!this.canDeliver()&&(L.style.display="block",E.style.display="block",E.textContent=g("cart.errors.delivery_unavailable")),b||_){L.style.display="block",U.style.display="block";for(let w of F)w.disabled=!1;S&&U.classList.add("tabbable")}let B=e.querySelector(".ref-local-pickup-tab");if(B.style.display="none",_){B.style.display="block",B.classList.remove("open"),B.querySelector(".ref-tab-toggle input").checked=!1,B.querySelector("fieldset.ref-tab-content").disabled=!0,this.activeDeliveryTab=="pickup"&&(B.classList.add("open"),B.querySelector(".ref-tab-toggle input").checked=!0,B.querySelector("fieldset.ref-tab-content").disabled=!1),this.locationsHolder.innerHTML="";for(let w=0,P=this.state.locations;w<P.length;w++)this.locationsHolder.append(this.renderStoreLocation(P[w],w));this.locationsHolder.append(u('<div class="ref-validation-error"></div>')),S||(L.textContent=g("pickup_at_store"))}let q=e.querySelector(".ref-shipping-tab");if(q.style.display="none",b&&(e.querySelector(".ref-shipping-address-holder").append(this.shippingAddressWidget.update(!0,!0)),q.style.display="block",q.classList.remove("open"),q.querySelector(".ref-tab-toggle input").checked=!1,q.querySelector("fieldset.ref-tab-content").disabled=!0,this.shippingMethodHeading.style.display="none",this.shippingMethodHolder.innerHTML="",this.activeDeliveryTab=="shipping"&&(q.classList.add("open"),q.querySelector(".ref-tab-toggle input").checked=!0,q.querySelector("fieldset.ref-tab-content").disabled=!1,this.isShippingFilled())))if(this.canShip()){this.shippingMethodHeading.style.display="block";for(let w=0,P=this.state.shipping;w<P.length;w++)this.shippingMethodHolder.append(this.renderShippingMethod(P[w],w,!1));this.shippingMethodHolder.append(u('<div class="ref-validation-error"></div>'))}else this.showFormErrors({"shipping-country":"cart.errors.address_not_supported"});y&&(M.style.display="block",M.disabled=!1,e.querySelector(".ref-digital-address-holder").append(this.digitalAddressWidget.update(!0,!0)),this.billingVisible=!1),(this.activeDeliveryTab=="pickup"?e.querySelector(".ref-local-pickup-tab .ref-billing-address-holder"):e.querySelector(".ref-shipping-tab .ref-billing-address-holder")).append(this.billingAddressWidget.update(!0,!0));for(let w of this.node.querySelectorAll(".ref-add-billing"))w.style.display="inline-block",this.billingVisible&&(w.style.display="none");for(let w of this.node.querySelectorAll("fieldset.ref-billing-address"))w.style.display="none",w.disabled=!0,this.billingVisible&&(w.style.display="block",w.disabled=!1);let G=Object.entries(this.state.paymentProviders).sort((w,P)=>P[1].order-w[1].order),ne=this.node.querySelector(".ref-heading-payment");ne.style.display="none",(G.some(w=>w[1].supported)||this.hasZeroValue())&&(ne.style.display="block");let J=this.node.querySelector(".ref-paypal-payment-holder");if(J.style.display="block",(!this.isPaypalSupported()||((he=this.state.vacationMode)==null?void 0:he.enabled)||this.hasZeroValue())&&(J.style.display="none"),this.activeDeliveryTab=="pickup"&&this.chosenStoreLocation>=0&&G.some(w=>w[1].supported&&w[1].provider!="paypal")&&(J.style.display="none"),this.standardPaymentButtonHolder.innerHTML="",this.hasZeroValue()){let w=document.createElement("div");w.className="ref-button ref-payment-button",w.dataset.method="zero-value-cart",w.textContent=g("cart.complete_order"),this.standardPaymentButtonHolder.append(w)}else for(let[w,P]of G)if(P.provider!="paypal"){if(P.provider=="stripe"&&P.supported&&P.paymentOptions.length)for(let V of P.paymentOptions)V.id=="card"?(this.standardPaymentButtonHolder.append(this.renderPaymentButton(g("credit_card"),"card","stripe")),this.standardPaymentButtonHolder.append(this.renderPaymentButton("Apple Pay / Google Pay","apple-pay-google-pay","stripe"))):this.standardPaymentButtonHolder.append(this.renderPaymentButton(V.name,V.id,"stripe"));P.provider=="custom"&&this.standardPaymentButtonHolder.append(this.renderPaymentButton(P.name,P.name,"custom",P.id)),P.provider=="pay-in-store"&&this.standardPaymentButtonHolder.prepend(this.renderPaymentButton(g("pay_on_pickup"),"in-store","pay-in-store"))}let Se=this.node.querySelector(".ref-auth-button-holder"),ye=this.node.querySelector(".ref-auth-save-address");if(Se.style.display="none",ye.style.display="none",this.state.signInProviders.length&&(Se.style.display="block",this.authButton.update(),Reflow.auth.isSignedIn()&&(ye.style.display="block")),this.isDemoMode()){this.node.querySelectorAll(".ref-payment-button").forEach(w=>w.classList.add("button-demo-payment")),this.node.querySelector(".ref-paypal-payment-holder").innerHTML=`<div class="paypal-button paypal-button-gold button-demo-payment">
				<svg xmlns="http://www.w3.org/2000/svg" height="22" viewBox="0 0 101 32" preserveAspectRatio="xMinYMin meet"><path fill="#003087" d="M 12.237 2.8 L 4.437 2.8 C 3.937 2.8 3.437 3.2 3.337 3.7 L 0.237 23.7 C 0.137 24.1 0.437 24.4 0.837 24.4 L 4.537 24.4 C 5.037 24.4 5.537 24 5.637 23.5 L 6.437 18.1 C 6.537 17.6 6.937 17.2 7.537 17.2 L 10.037 17.2 C 15.137 17.2 18.137 14.7 18.937 9.8 C 19.237 7.7 18.937 6 17.937 4.8 C 16.837 3.5 14.837 2.8 12.237 2.8 Z M 13.137 10.1 C 12.737 12.9 10.537 12.9 8.537 12.9 L 7.337 12.9 L 8.137 7.7 C 8.137 7.4 8.437 7.2 8.737 7.2 L 9.237 7.2 C 10.637 7.2 11.937 7.2 12.637 8 C 13.137 8.4 13.337 9.1 13.137 10.1 Z"/><path fill="#003087" d="M 35.437 10 L 31.737 10 C 31.437 10 31.137 10.2 31.137 10.5 L 30.937 11.5 L 30.637 11.1 C 29.837 9.9 28.037 9.5 26.237 9.5 C 22.137 9.5 18.637 12.6 17.937 17 C 17.537 19.2 18.037 21.3 19.337 22.7 C 20.437 24 22.137 24.6 24.037 24.6 C 27.337 24.6 29.237 22.5 29.237 22.5 L 29.037 23.5 C 28.937 23.9 29.237 24.3 29.637 24.3 L 33.037 24.3 C 33.537 24.3 34.037 23.9 34.137 23.4 L 36.137 10.6 C 36.237 10.4 35.837 10 35.437 10 Z M 30.337 17.2 C 29.937 19.3 28.337 20.8 26.137 20.8 C 25.037 20.8 24.237 20.5 23.637 19.8 C 23.037 19.1 22.837 18.2 23.037 17.2 C 23.337 15.1 25.137 13.6 27.237 13.6 C 28.337 13.6 29.137 14 29.737 14.6 C 30.237 15.3 30.437 16.2 30.337 17.2 Z"/><path fill="#003087" d="M 55.337 10 L 51.637 10 C 51.237 10 50.937 10.2 50.737 10.5 L 45.537 18.1 L 43.337 10.8 C 43.237 10.3 42.737 10 42.337 10 L 38.637 10 C 38.237 10 37.837 10.4 38.037 10.9 L 42.137 23 L 38.237 28.4 C 37.937 28.8 38.237 29.4 38.737 29.4 L 42.437 29.4 C 42.837 29.4 43.137 29.2 43.337 28.9 L 55.837 10.9 C 56.137 10.6 55.837 10 55.337 10 Z"/><path fill="#009cde" d="M 67.737 2.8 L 59.937 2.8 C 59.437 2.8 58.937 3.2 58.837 3.7 L 55.737 23.6 C 55.637 24 55.937 24.3 56.337 24.3 L 60.337 24.3 C 60.737 24.3 61.037 24 61.037 23.7 L 61.937 18 C 62.037 17.5 62.437 17.1 63.037 17.1 L 65.537 17.1 C 70.637 17.1 73.637 14.6 74.437 9.7 C 74.737 7.6 74.437 5.9 73.437 4.7 C 72.237 3.5 70.337 2.8 67.737 2.8 Z M 68.637 10.1 C 68.237 12.9 66.037 12.9 64.037 12.9 L 62.837 12.9 L 63.637 7.7 C 63.637 7.4 63.937 7.2 64.237 7.2 L 64.737 7.2 C 66.137 7.2 67.437 7.2 68.137 8 C 68.637 8.4 68.737 9.1 68.637 10.1 Z"/><path fill="#009cde" d="M 90.937 10 L 87.237 10 C 86.937 10 86.637 10.2 86.637 10.5 L 86.437 11.5 L 86.137 11.1 C 85.337 9.9 83.537 9.5 81.737 9.5 C 77.637 9.5 74.137 12.6 73.437 17 C 73.037 19.2 73.537 21.3 74.837 22.7 C 75.937 24 77.637 24.6 79.537 24.6 C 82.837 24.6 84.737 22.5 84.737 22.5 L 84.537 23.5 C 84.437 23.9 84.737 24.3 85.137 24.3 L 88.537 24.3 C 89.037 24.3 89.537 23.9 89.637 23.4 L 91.637 10.6 C 91.637 10.4 91.337 10 90.937 10 Z M 85.737 17.2 C 85.337 19.3 83.737 20.8 81.537 20.8 C 80.437 20.8 79.637 20.5 79.037 19.8 C 78.437 19.1 78.237 18.2 78.437 17.2 C 78.737 15.1 80.537 13.6 82.637 13.6 C 83.737 13.6 84.537 14 85.137 14.6 C 85.737 15.3 85.937 16.2 85.737 17.2 Z"/><path fill="#009cde" d="M 95.337 3.3 L 92.137 23.6 C 92.037 24 92.337 24.3 92.737 24.3 L 95.937 24.3 C 96.437 24.3 96.937 23.9 97.037 23.4 L 100.237 3.5 C 100.337 3.1 100.037 2.8 99.637 2.8 L 96.037 2.8 C 95.637 2.8 95.437 3 95.337 3.3 Z"/></svg>
			</div>`;return}}async paypalCreateOrder(e,r){if(!this.acceptTerms.checkValidity()){let a="";for(let n=0;n<this.state.footerLinks.length;n++){let o=this.state.footerLinks[n];o.required&&(a+=a?n===this.state.footerLinks.length-1?" and ":", ":"Please agree to the ",a+=o.name)}a+=".",this.paypalErrorText=a;return}if(await this.refreshState(),this.update(),!this.canFinish()){this.paypalErrorText=this.getStateErrors()[0];return}let i=new FormData;this.step=="details"&&(i=new FormData(this.detailsForm)),i.append("checkout-step",this.step),Reflow.auth.isSignedIn()&&i.append("auth-account-id",Reflow.auth.profile.id);let s=await k(`/create-paypal-order/${this.key}/`,{method:"POST",body:i},!1);if(s.error&&s.error=="PAYEE_ACCOUNT_RESTRICTED"){this.paypalErrorText="Transaction could not be processed. The PayPal account associated with this store is restricted.";return}if(s.error&&s.error=="CUSTOMER_FORM_DATA"){this.paypalErrorText="Missing or incorrect data. Please review the checkout form.",this.showFormErrors(s.fields);return}if(s.error&&s.error=="VACATION_MODE"){this.paypalErrorText="Transaction could not be processed. The store is currently unavailable.";return}return s.orderID}async paypalOnApprove(e,r){let i=new FormData;i.append("orderID",e.orderID);try{let s=await k(`/capture-paypal-order/${this.key}/`,{method:"POST",body:i},!1);window.location=this.getSuccessURL({order_id:s.orderID,secure_hash:s.secureHash})}catch(s){if(!s.data)throw s;let a=s.data,n=Array.isArray(a.details)&&a.details[0];if(n&&n.issue==="INSTRUMENT_DECLINED")return r.restart();throw s}}async paypalShippingChange(e,r){try{let i=new FormData;i.append("orderID",e.orderID),i.append("address",JSON.stringify(e.shipping_address));let s=0;e.selected_shipping_option&&e.selected_shipping_option.id&&(s=e.selected_shipping_option.id),i.append("selectedShippingOption",s);let a=await k(`/update-paypal-shipping/${this.key}/`,{method:"POST",body:i},!1);return r.resolve()}catch(i){return X(Y(i),"Couldn't update PayPal shipping"),console.error("Reflow:",i),r.reject()}}paypalCancel(e){this.refresh()}paypalError(e){let r="Sorry, your transaction could not be processed. Please try again.";this.paypalErrorText&&(r=this.paypalErrorText,this.paypalErrorText=null),setTimeout(function(){window.alert(r)},1e3)}showLoading(){this.loadingOverlay.classList.add("visible"),this.node.querySelectorAll(".ref-payment-button").forEach(e=>e.setAttribute("data-disabled-click",!0)),this.applyDiscountCodeButton.setAttribute("data-disabled-click",!0)}hideLoading(){this.loadingOverlay.classList.remove("visible"),this.node.querySelectorAll(".ref-payment-button").forEach(e=>e.removeAttribute("data-disabled-click")),this.applyDiscountCodeButton.removeAttribute("data-disabled-click")}saveFocus(){this.savedFocusTarget=document.activeElement}restoreFocus(){this.savedFocusTarget&&(this.savedFocusTarget.focus(),this.savedFocusTarget=null)}getDeliveryDate(e){var r=new Date(new Date().getTime()+1e3*60*60*24*e),i={month:"long",day:"numeric"};return r.toLocaleDateString(Reflow.locales.locale,i)}getTaxPricingType(){return this.state.taxes?this.state.taxes.details.pricingType:null}async update(){if(this.saveFocus(),this.resetView(),!Q.steps.includes(this.step))throw new Error("Invalid Step: "+this.step);if(!this.state&&!this.node.offsetParent){console.warn("Reflow: Ignoring invisible Cart");return}if(this.node.firstElementChild.style.display="block",!this.state)try{await this.refreshState(),this.restoreUserInput()}catch(e){this.showMessage(g("cart.errors.unavailable"));return}if(!this.arePaymentProvidersAvailable()){this.showMessage("This store has no payment methods configured.");return}if(this.onlyPaypalNoDelivery()){this.showMessage("This store offers only PayPal payments but does not support product delivery. Checkout unavailable.");return}(this.step=="details"||this.step=="instructions")&&(this.state.products.length?this.updateCheckout():this.step="cart"),this.step=="cart"&&this.updateCart(),this.restoreFocus()}},Ye=Q;C(Ye,"type","shopping-cart"),C(Ye,"steps",["cart","details","instructions"]);var Gi=Ye;var lr=class extends O{constructor(e,r={}){super(e,r);e.innerHTML='<div class="reflow-add-to-cart ref-product-controls"></div>',this.button=u('<a href="#" class="ref-button"></a>'),this.controls=e.querySelector(".ref-product-controls"),this.onVariantChange=r.onVariantChange,this.personalizationValues={}}init(){this.node.addEventListener("change",this.onChange.bind(this)),this.node.addEventListener("click",async e=>{if(!e.target.closest(".ref-button"))return;if(e.preventDefault(),!this.node.dataset.reflowProduct||!parseInt(this.node.dataset.reflowProduct,10)){console.error("Reflow: Add To Cart button is missing a product");return}let r=parseInt(this.node.dataset.reflowProduct,10),i=this.node.dataset.reflowVariant||null,s=this.node.dataset.reflowQuantity||1,a=this.node.querySelector(".ref-personalization-form");if(a&&!a.checkValidity()){a.reportValidity();return}let n=new FormData,o=[];for(let l of this.node.querySelectorAll(".ref-personalization-checkbox:checked, .ref-personalization.ref-required")){let c=l.closest(".ref-personalization");if(!c||!c.id)continue;let d={id:c.id},h=c.querySelector("input[type=text]");h&&(d.inputText=h.value.trim());let p=c.querySelector("select");p&&(d.selected=p.value.trim());let v=c.querySelector("input[type=file]");if(v){let y=v.files[0];if(!y)continue;let b="pers_file_"+Math.floor(Math.random()*999999).toString()+Date.now();d.filename=y.name,d.filehash=b,n.append(`personalization_files[${b}]`,y)}o.push(d)}o.length&&n.append("personalization",JSON.stringify(o));try{let l=await Reflow.cart.addProduct(r,s,i,n),c=this.getCartURL(),d={type:"success",title:g("add_to_cart.success")};c&&(d.button=g("add_to_cart.see_cart"),d.buttonAction=()=>{window.location.href=c}),this.notification=new $(u('<div data-reflow-type="toast"></div>'),d),this.notification.init(),this.notification.show(),this.setQuantity(1);let h=this.node.querySelector(".ref-quantity-widget input");h&&(h.value=1),this.personalizationValues={},this.update()}catch(l){X(Y(l,"system"),g("add_to_cart.error")),console.error("Reflow: Couldn't add product to cart",l)}})}onChange(e){if(e.target.matches(".ref-field-variants")){this.setVariant(e.target.value),this.onVariantChange&&this.onVariantChange();return}if(e.target.matches(".ref-quantity-widget input")){this.setQuantity(e.target.value);return}if(e.target.matches(".ref-personalization-checkbox")){let r=e.target.closest(".ref-personalization"),i=r.querySelector(".ref-instructions");i&&(i.style.display=e.target.checked?"block":"none");let s=r.querySelector("input[type=text], select, input[type=file]");s&&(s.style.display=e.target.checked?"block":"none",e.target.checked?s.required=!0:s.removeAttribute("required")),this.setPersonalizationInput(r.id,"checkbox",e.target.checked);return}if(e.target.matches(".ref-personalization-text-input")){let r=e.target.closest(".ref-personalization");this.setPersonalizationInput(r.id,"text",e.target.value)}if(e.target.matches(".ref-personalization-dropdown")){let r=e.target.closest(".ref-personalization");this.setPersonalizationInput(r.id,"dropdown",e.target.value)}if(e.target.matches(".ref-personalization-file-input")){let r=e.target.files[0]||null;if(r&&r.size>10*1e3*1e3){e.target.value="";let i=new $(u('<div data-reflow-type="toast"></div>'),{type:"error",title:"File Upload Error",description:"File size must be under 10 MB."});i.init(),i.show()}}}getAPIEndpoint(){if(!this.node.dataset.reflowProduct)throw new Error("ID for product missing");return"/products/"+this.node.dataset.reflowProduct}getProduct(){return this.node.dataset.reflowProduct}setProduct(e){this.node.dataset.reflowProduct=e}getQuantity(){return this.node.dataset.reflowQuantity||1}setQuantity(e=1){this.node.dataset.reflowQuantity=e}getVariant(){return this.node.dataset.reflowVariant}setVariant(e){this.node.dataset.reflowVariant=e}setText(e){this.button.textContent=e}getAddToCartText(){return this.node.dataset.reflowAddtocartText}setAddToCartText(e=""){this.node.dataset.reflowAddtocartText=e}getCartURL(){return this.node.dataset.reflowShoppingcartUrl}setCartURL(e=""){this.node.dataset.reflowShoppingcartUrl=e}activate(){this.button.classList.remove("inactive")}deactivate(){this.button.classList.add("inactive")}setPersonalizationInput(e,r,i){this.personalizationValues[e]||(this.personalizationValues[e]={}),this.personalizationValues[e][r]=i}getPersonalizationInput(e,r){return!this.personalizationValues[e]||!this.personalizationValues[e][r]?null:this.personalizationValues[e][r]}async update(e){if(!e)try{e=await this.fetchData()}catch(o){throw o.status==404?this.node.textContent=g("product.missing"):this.node.textContent="Unable to load product.",o}let r=e.inStock,i=r,s=null;e.variants.variants&&e.variants.variants.length&&(s=e.variants.variants.find(o=>o.id==this.getVariant()),s||(s=e.variants.variants[0]),i=s.in_stock);let a=this.getAddToCartText()||g("add_to_cart.button_text");i?this.activate():(a=g("out_of_stock"),this.deactivate()),this.setText(a),this.setProduct(e.id);let n=this.parseShowString();if(this.controls.innerHTML="",!r)this.deactivate();else if(e.vacationMode&&e.vacationMode.enabled){if(this.deactivate(),e.vacationMode.message.length){let o=u('<div class="ref-store-message"></div>');o.textContent=e.vacationMode.message,this.node.prepend(o)}}else{if((n.full||n.variants)&&e.variants.variants&&e.variants.variants.length){let o=u('<div class="ref-variant"></div>'),l=u("<label></label>"),c=u("<span></span>");c.textContent=e.variants.option_name||"",l.append(c);let d=u('<select class="ref-form-control ref-field-variants" name="variant-state" required></select>');for(let h of e.variants.variants){let p=u("<option></option>");p.value=h.id,p.textContent=h.name,d.append(p)}this.getVariant()&&(d.value=this.getVariant()),d.value&&this.setVariant(d.value),l.append(d),o.append(l),this.controls.append(o)}if(n.full||n.quantity){let o=u("<span></span>"),l=new ve(o,{inStock:!0,onChange:d=>{this.setQuantity(d.getQuantity())}});l.init();let c=Math.min(e.availableQuantity,e.maxQty);if(this.getVariant()&&e.variants.variants){let d=e.variants.variants.find(h=>h.id==this.getVariant());d&&(c=Math.min(d.availableQuantity,e.maxQty),l.setVariant(this.getVariant()))}l.setProduct(this.getProduct()),l.setMaxQuantity(c),l.setQuantity(this.getQuantity()),l.update(),this.controls.append(o)}if(e.personalization&&e.personalization.length&&(n.full||n.personalization)){let o=u('<form class="ref-personalization-holder ref-personalization-form"></form>');for(let l of e.personalization){let c=u('<div class="ref-personalization"></div>');c.id=l.id;let d=!!this.getPersonalizationInput(l.id,"checkbox"),h=l.required,p=u('<span class="ref-row"></span>'),v=u("<div></div>"),y=u('<label class="ref-personalization-label"></label>');if(y.textContent=l.name,v.append(y),p.append(v),!h){let b=u('<input type="checkbox" class="ref-form-control ref-personalization-checkbox"></input>');b.checked=d,y.append(b);let _=u('<span class="ref-price"></span>');_.textContent=l.price>0?N(l.price,e.currency):g("price_free"),p.append(_)}if(c.append(p),l.instructions&&l.instructions.length){let b=u('<p class="ref-instructions"></p>');b.textContent=l.instructions,b.style.display=d||h?"block":"none",c.append(b)}if(l.type=="text"){let b=u('<input type="text" class="ref-form-control ref-personalization-text-input"></input>');b.style.display=d||h?"block":"none",(d||h)&&(b.required=!0),l.min&&b.setAttribute("minlength",l.min),l.max&&b.setAttribute("maxlength",l.max),c.append(b);let _=this.getPersonalizationInput(l.id,"text");_&&(b.value=_)}if(l.type=="dropdown"){let b=u('<select class="ref-form-control ref-personalization-dropdown"></select>');b.style.display=d||h?"block":"none",(d||h)&&(b.required=!0);let _=l.dropdownOptions.split(",");for(let L of _){if(L=L.trim(),!L)continue;let E=u("<option></option>");E.value=L,E.text=L,b.append(E)}c.append(b);let S=this.getPersonalizationInput(l.id,"dropdown");S&&(b.value=S)}if(l.type=="file"){let b=u('<input type="file" class="ref-form-control ref-personalization-file-input"></input>');b.style.display=d||h?"block":"none",(d||h)&&(b.required=!0),l.filetypes&&l.filetypes.length&&(b.accept=l.filetypes),c.append(b)}l.required&&(c.classList.add("ref-required"),l.type=="text"&&y.append(u(`<span title=${g("required")} > *</span>`)),l.type=="checkbox"&&y.append(u('<span class="ref-check"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></svg></span>'))),o.append(c)}this.controls.append(o)}}if((n.full||n.button)&&(this.controls.append(this.button),e.minQty>0)){let o=u('<p class="ref-min-qty-message"></p>');o.textContent=g("add_to_cart.min_quantity_per_order",{quantity:e.minQty}),this.controls.append(o)}}};C(lr,"type","add-to-cart");var et=lr;var _a=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,Vi=t=>t.match(_a)[1],Qi=t=>{let e=Vi(t);return{sm:"https://img.youtube.com/vi/"+e+"/default.jpg",md:"https://img.youtube.com/vi/"+e+"/mddefault.jpg",lg:"https://img.youtube.com/vi/"+e+"/hqdefault.jpg"}},dr=t=>"https://www.youtube.com/embed/"+Vi(t),Wi=(t,e,r=[])=>{var i=document.getElementById(t);i&&i.tagName.toUpperCase()!="IFRAME"&&(i=i.getElementsByTagName("iframe")[0]),i&&i.contentWindow.postMessage(JSON.stringify({event:"command",func:e,args:r}),"*")};var Ie=class extends O{constructor(e,r){super(e,r);let i=u('<span data-reflow-type="add-to-cart"></span>');this.addToCart=new et(i,{onVariantChange:this.update.bind(this)})}init(){this.node.addEventListener("click",this.onClick.bind(this)),this.addToCart.init()}onClick(e){if(e.target.matches(".ref-thumbnails .ref-image")){let r=u(".ref-thumbnails .ref-image",this.node),i=Array.from(r).indexOf(e.target);this.previewItem(i)}e.target.closest(".ref-preview")&&this.gallery&&this.gallery.openAt(this.activeIndex)}previewItem(e=0){let r=u(".ref-preview .ref-image",this.node),i=r[this.activeIndex];i&&i.dataset.reflowPreviewType==="video"&&Wi("preview-"+this.activeIndex,"pauseVideo"),this.activeIndex=e;let s=u(".ref-thumbnails .ref-image",this.node),a=s[e];s.forEach(n=>n.classList.remove("active")),a.classList.add("active"),r.forEach(n=>n.classList.remove("active")),r[e]&&r[e].classList.add("active")}getAPIEndpoint(){let e=this.node.dataset.reflowProduct||new URL(location.href).searchParams.get("product");if(e)return"/products/"+e;throw new Error("ID for product missing")}getCartURL(){return this.node.dataset.reflowShoppingcartUrl}setCartURL(e){this.node.dataset.reflowShoppingcartUrl=e}getAddToCartText(){return this.node.dataset.reflowAddtocartText}renderLightboxGallery(e){this.isDemoMode()||(this.gallery?this.gallery.setElements(e):this.getLightboxInstance().then(r=>{this.gallery=r({loop:!0,elements:e})}))}async getLightboxInstance(){return window.GLightbox?window.GLightbox:(Ie._glightboxPromise||(Ie._glightboxPromise=new Promise((e,r)=>{let i=[];i.push(new Promise((s,a)=>{let n=document.createElement("script");n.onload=()=>s(),n.onerror=o=>a(o),document.body.append(n),n.src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox@3.1.0/dist/js/glightbox.min.js"})),i.push(new Promise((s,a)=>{let n=document.createElement("link");n.onload=()=>s(),n.onerror=o=>a(o),document.head.append(n),n.rel="stylesheet",n.href="https://cdn.jsdelivr.net/gh/mcstudios/glightbox@3.1.0/dist/css/glightbox.min.css"})),Promise.all(i).then(()=>e(window.GLightbox)).catch(r)})),Ie._glightboxPromise)}async update(){let e,r=null;try{e=await this.fetchData()}catch(o){throw o.status==404?this.node.textContent=g("product.missing"):this.node.textContent="Unable to load product.",o}e.variants&&e.variants.variants&&(r=e.variants.variants[0],this.addToCart.getVariant()&&(r=e.variants.variants.find(o=>o.id==this.addToCart.getVariant())));let i=this.parseShowString(),s=u('<div class="reflow-product"></div>');if(i.full||i.media){let o=u('<div class="ref-media"></div>'),l=u('<div class="ref-preview"></div>');if(o.append(l),!e.media.length){var a=u('<img class="ref-image active">');a.src=e.image.md,l.append(a)}let c=[],d=this.activeIndex||0,h=e.media.length>1,p=u('<div class="ref-thumbnails"></div>');if(h&&o.append(p),r){let v=e.media.findIndex(y=>y.id==r.image);d=v>=0?v:d}for(let v=0;v<e.media.length;v++){let y=e.media[v],b=u('<div class="ref-thumbnail"></div>'),_=u('<div class="ref-image"></div>');_.dataset.reflowPreviewType=y.type;let S;if(y.type=="image")_.style.backgroundImage=`url('${y.src.sm}')`,_.dataset.reflowPreview=y.url,S=u('<img class="ref-image">'),S.src=y.src.md,S.dataset.reflowPreviewType=y.type,c.push({href:y.src.lg,type:"image"});else{let L=Qi(y.url);_.classList.add("ref-video"),_.style.backgroundImage=`url('${L.sm}')`,_.dataset.reflowPreview=dr(y.url),S=u(`
						<iframe id="preview-${v}"
							class="ref-image ref-video"
							frameborder="0"
							allowfullscreen="true"
							src="${dr(y.url)}?enablejsapi=1">
						</iframe>`),S.dataset.reflowPreviewType=y.type,c.push({href:y.url,type:"video",source:"youtube",width:900})}l.append(S),b.append(_),p.append(b),d==v&&(this.activeIndex=v,_.classList.add("active"),S.classList.add("active"))}if(this.renderLightboxGallery(c),e.promoBadge){let v=u('<div class="ref-promo-badge"></div>');v.textContent=e.promoBadge,o.append(v)}s.append(o)}let n=u('<div class="ref-product-data"></div>');if(s.append(n),this.renderTestModeBadge(n),i.full||i.name){let o=u('<h2 class="ref-name"></h2>');o.textContent=e.name,n.append(o)}if(i.full||i.categories){let o=u('<div class="ref-categories"></div>');for(let l of e.categories){let c=u('<span class="ref-category"></span>');this.node.dataset.reflowCategoryLink&&(c=u('<a class="ref-category"></a>'),c.href=this.node.dataset.reflowCategoryLink.replace(/\{id\}/g,l.id)),c.textContent=l.name,o.append(c)}n.append(o)}if(i.full||i.price){let o=u('<strong class="ref-price"></strong>');if(o.textContent=N(e.priceInt,e.currency),e.priceRange.length>1&&r&&(o.textContent=N(r.price,e.currency)),e.onSale.enabled){o.classList.add("ref-on-sale");let l=u('<s class="ref-original-price"></s>');l.textContent=N(e.onSale.originalPrice,e.currency),e.priceRange.length>1&&r&&r.original_price&&(l.textContent=N(r.original_price,e.currency)),o.prepend(l)}n.append(o)}if(e.inventoryType=="advanced"&&e.showQuantity){let o=u('<span class="ref-qty-available"></span>');r?o.textContent=g("product.left_in_stock",{numberItems:r.availableQuantity}):o.textContent=g("product.left_in_stock",{numberItems:e.availableQuantity}),n.append(o)}if((i.full||i["add-to-cart"])&&(this.addToCart.setCartURL(this.getCartURL()),this.addToCart.setAddToCartText(this.getAddToCartText()),this.addToCart.update(e),n.append(this.addToCart.node)),i.full||i.description){let o=u('<div class="ref-description"></div>');o.innerHTML=e.descriptionHTML,n.append(o)}this.node.innerHTML="",this.node.append(s)}},cr=Ie;C(cr,"type","product");var tt=cr;var ur=class extends O{constructor(e,r={}){super(e,r);this.parent=r.parent}init(){this.node.addEventListener("click",this.onClick.bind(this))}onClick(e){let r=e.target.closest(".ref-page-item");if(r){e.preventDefault();let i=r.dataset.reflowPage,s=new URL(window.location);s.searchParams.set("page",i),history.pushState({page:i},document.title,s),this.parent.update()}}renderPaginationItem(e=1,r="1",i=!1,s=!1,a=""){let n=u('<li class="ref-page-item"></li>');n.dataset.reflowPage=e;let o=i?u('<span class="ref-page-link"></span>'):u('<a class="ref-page-link"></a>');if(o.textContent=r,a&&(a=="ref-prev-btn"&&(o.innerHTML="<?xml version='1.0' encoding='iso-8859-1'?><svg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 34.075 34.075' style='enable-background:new 0 0 34.075 34.075;' xml:space='preserve'><g><g><path style='fill:currentColor;' d='M24.57,34.075c-0.505,0-1.011-0.191-1.396-0.577L8.11,18.432c-0.771-0.771-0.771-2.019,0-2.79 L23.174,0.578c0.771-0.771,2.02-0.771,2.791,0s0.771,2.02,0,2.79l-13.67,13.669l13.67,13.669c0.771,0.771,0.771,2.021,0,2.792 C25.58,33.883,25.075,34.075,24.57,34.075z'/></g></g></svg>"),a=="ref-next-btn"&&(o.innerHTML="<?xml version='1.0' encoding='iso-8859-1'?><svg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 185.343 185.343' style='enable-background:new 0 0 185.343 185.343;' xml:space='preserve'><g><g><path style='fill:currentColor;' d='M51.707,185.343c-2.741,0-5.493-1.044-7.593-3.149c-4.194-4.194-4.194-10.981,0-15.175 l74.352-74.347L44.114,18.32c-4.194-4.194-4.194-10.987,0-15.175c4.194-4.194,10.987-4.194,15.18,0l81.934,81.934 c4.194,4.194,4.194,10.987,0,15.175l-81.934,81.939C57.201,184.293,54.454,185.343,51.707,185.343z'/></g></g></svg>"),o.classList.add(a)),i)n.classList.add("active");else{let l=new URL(window.location);l.searchParams.set("page",e),o.href=l}return s&&n.classList.add("disabled"),n.append(o),n}update(e={}){let r=e.current_page,i=e.per_page,s=e.total,a=Math.ceil(s/i);if(a<=1)return document.createDocumentFragment();let n=u('<ul class="ref-pagination"></ul>'),o=r-1<=0,l=o?1:r-1,c=r+1>a,d=c?a:r+1;n.append(this.renderPaginationItem(l,"",!1,o,"ref-prev-btn"));for(var h=0;h<a;h++)n.append(this.renderPaginationItem(h+1,h+1,r===h+1));return n.append(this.renderPaginationItem(d,"",!1,c,"ref-next-btn")),this.node.innerHTML="",this.node.append(n),this.node}};C(ur,"type","pagination");var rt=ur;var hr=class extends O{constructor(e,r={}){super(e,r);this.backdrop=u('<div class="ref-backdrop"></div>'),this.productPreview=u(`<div class="ref-product-preview">
			<div class="ref-product-preview-header">
				<div class="ref-title"></div>
				<div class="ref-close-button">\xD7</div>
			</div>
			<div class="ref-product-preview-content"></div>
		</div>`),this.buttonToProduct=new WeakMap,this.pagination=new rt(u('<div data-reflow-type="pagination"></div>'),{parent:this})}init(){this.node.addEventListener("click",this.onClick.bind(this)),window.addEventListener("popstate",e=>{this.update()}),this.pagination.init()}getAPIEndpoint(){let e=this.node.dataset,r=new URL(location.href),i=this.getPage(),s=e.reflowPerpage||r.searchParams.get("per_page")||20,a=e.reflowCategory||r.searchParams.get("category"),n=e.reflowOrder||r.searchParams.get("order"),o=e.reflowSearch||r.searchParams.get("search"),l=e.reflowSimilarTo,c=`?page=${i}&perpage=${s}`;return a&&(c+="&category="+parseInt(a,10)),n&&(c+="&order="+encodeURIComponent(n)),o&&(c+="&search="+encodeURIComponent(o)),l&&(c+="&similarToProd="+parseInt(l,10)),"/products/"+c}onClick(e){e.target.closest(".ref-backdrop")&&(e.preventDefault(),this.hidePreview());let i=e.target.closest(".preview-toggle");if(i){e.preventDefault();let a=this.buttonToProduct.get(i);if(!a)return;let n=this.getCartURL(),o=u('<div data-reflow-type="product"></div>'),l=new tt(o);o.dataset.reflowProduct=a.id,o.dataset.reflowShow="media,price,add-to-cart,description",n&&l.setCartURL(n),l.init(),l.update();let c=u(".ref-product-preview-header .ref-title",this.productPreview)[0],d=u(".ref-product-preview-content",this.productPreview)[0];c.textContent=a.name,d.innerHTML="",d.append(o),this.showPreview()}e.target.closest(".ref-close-button")&&(e.preventDefault(),this.hidePreview())}hidePreview(){this.productPreview.classList.remove("open"),this.isDemoMode()||(this.backdrop.remove(),this.backdrop.classList.remove("active"))}showPreview(){this.productPreview.classList.add("open"),this.isDemoMode()||(this.node.append(this.backdrop),this.backdrop.classList.add("active"))}getCartURL(){return this.node.dataset.reflowShoppingcartUrl}setCartURL(e){this.node.dataset.reflowShoppingcartUrl=e}shouldShowAddToCart(){return this.node.dataset.hasOwnProperty("reflowAddtocart")}getAddToCartText(){return this.node.dataset.reflowAddtocartText||g("add_to_cart.button_text")}getPage(){let e,r=1;return this.hasDynamicPagination()&&(e=new URL(location.href).searchParams.get("page")),e||this.node.dataset.reflowPage||r}hasDynamicPagination(){let e=this.parseShowString();return e.full||e.pagination}async update(){let e;try{e=await this.fetchData()}catch(n){console.error("Reflow:",n)}if(!e||!e.data.length){this.node.textContent=g("product_list.empty");return}let r=u('<div class="reflow-product-list"></div>'),i=u('<div class="ref-products"></div>'),s=this.node.dataset.reflowLayout;s&&hr.possibleLayouts.includes(s)&&r.classList.add("ref-"+s);let a=this.parseShowString();for(let n of e.data){let o=u('<div class="ref-product"></div>');this.node.dataset.reflowProductLink&&(o=u('<a class="ref-product"></a>'),o.href=this.node.dataset.reflowProductLink.replace(/\{id\}/g,n.id).replace(/\{handle\}/g,n.handle||""));let l=u('<div class="ref-product-data"></div>'),c=!1,d=u('<div class="ref-product-info"></div>'),h=!1;if(a.full||a.image){let p=u('<div class="ref-media">'),v=u('<img class="ref-image">');if(v.src=n.image.md,v.loading="lazy",p.append(v),n.promoBadge){let y=u('<div class="ref-promo-badge"></div>'),b=n.promoBadge;y.textContent=b,p.append(y)}o.append(p)}if(a.full||a.name){let p=u('<h5 class="ref-name"></h5>');p.textContent=n.name,d.append(p),h=!0,c=!0}if(a.full||a.excerpt){let p=u('<p class="ref-excerpt"></p>');p.textContent=n.excerpt,d.append(p),h=!0,c=!0}if(h&&l.append(d),a.full||a.price){let p=u('<strong class="ref-price"></strong>'),v=u('<s class="ref-original-price"></s>');if(n.priceRange.length>1&&n.variants){let y=n.variants.variants[0];p.textContent=N(y.price,n.currency),n.onSale.enabled&&!!y.original_price&&(p.classList.add("ref-on-sale"),v.textContent=N(y.original_price,n.currency),p.prepend(v))}else p.textContent=N(n.priceInt,n.currency),n.onSale.enabled&&(p.classList.add("ref-on-sale"),v.textContent=N(n.onSale.originalPrice,n.currency),p.prepend(v));l.append(p),c=!0}if(c&&o.append(l),n.inStock){if(a.full||a["add-to-cart"]){let p=u('<div class="ref-addons"></div>'),v=u('<a href="#" class="ref-button preview-toggle"></a>');v.textContent=this.getAddToCartText(),this.buttonToProduct.set(v,n),p.append(v),o.append(p)}}else{let p=u('<div class="ref-addons out-of-stock"></div>'),v=u('<a href="#" class="ref-button inactive"></a>');v.textContent=g("out_of_stock"),p.append(v),o.append(p)}i.append(o)}if(r.append(i),a.full||a.pagination){let n=this.pagination.update(e.meta);r.append(n)}(a.full||a["add-to-cart"])&&r.append(this.productPreview),this.node.innerHTML="",this.node.append(r),this.renderTestModeBadge(this.node)}},it=hr;C(it,"type","product-list"),C(it,"possibleLayouts",["list","cards"]);var Xi=it;var pr=class extends O{constructor(e,r={}){super(e,r);e.innerHTML=`
			<div class="reflow-product-search">
				<div class="ref-input-wrapper">
					<input type="text" class="ref-search" inputmode="search" />
					<span class="ref-cancel-search"></span>
				</div>
			<div class="ref-button" type="submit"></div>
		</div>`,this.input=e.querySelector("input.ref-search"),this.cancel=e.querySelector("span.ref-cancel-search"),this.searchBtn=e.querySelector(".ref-button")}init(){this.input.addEventListener("keydown",this.onKeyDown.bind(this)),this.input.addEventListener("input",this.onInput.bind(this)),this.cancel.addEventListener("click",this.cancelSearch.bind(this)),this.searchBtn.addEventListener("click",this.redirectToProdListing.bind(this)),this.input.value=new URL(location.href).searchParams.get("search")}onKeyDown(e){if(e.key=="Enter"){if(!this.input.value.trim().length){this.cancelSearch();return}this.redirectToProdListing()}e.key=="Escape"&&this.cancelSearch()}onInput(){this.cancel.style.display=this.input.value.length?"block":"none"}cancelSearch(){this.input.value="";let e=new URL(location.href);e.searchParams.get("search")&&(e.searchParams.set("search",""),window.location=e.href),this.cancel.style.display="none"}redirectToProdListing(){let e=this.input.value.trim();if(!e){this.input.value="",this.input.blur();return}let r=new URL(this.node.dataset.reflowSearchUrl||window.location.href,window.location.href);r.searchParams.set("search",e),r.searchParams.set("page",1),window.location=r.href}async update(){this.cancel.style.display=this.input.value.length?"block":"none",this.input.placeholder=this.node.dataset.reflowPlaceholder||g("product_search.placeholder"),this.searchBtn.style.display=this.node.dataset.reflowShowButton=="true"?"block":"none",this.searchBtn.textContent=this.node.dataset.reflowButtonText||g("product_search.button")}};C(pr,"type","product-search");var Zi=pr;var fr=class extends O{constructor(e,r={}){super(e,r);this.reflowCategoryLink=e.dataset.reflowCategoryLink}getAPIEndpoint(){let r=this.node.dataset.reflowRootCategory;return"categories"+(r?"?root-category="+parseInt(r,10):"")}async update(){let e=await this.fetchData();if(!e)return;let r=this.node.dataset.reflowLayout,i=u('<div class="reflow-category-list"></div>');r&&fr.possibleLayouts.includes(r)&&i.classList.add("ref-"+r);let s=u('<ul class="ref-categories"></ul>');i.append(s),this.buildListsRecursive(s,e),this.node.innerHTML="",this.node.append(i)}isLinkHrefActive(e){try{let r=new URL(e),i=new URL(window.location.href);if(r.origin!==i.origin||r.pathname!==i.pathname)return!1;for(let s of r.searchParams)if(!i.searchParams.has(s[0])||i.searchParams.get(s[0])!==s[1])return!1;return!0}catch(r){return!1}}buildListsRecursive(e,r){for(let i of r){let s=u('<li class="ref-category"></li>'),a=i.subcategories;e.append(s);let n=u("<span></span>");if(this.node.dataset.reflowCategoryLink&&(n=u("<a></a>"),n.href=this.node.dataset.reflowCategoryLink.replace(/\{id\}/g,i.id),this.isLinkHrefActive(n.href)&&n.classList.add("active")),n.textContent=i.name,s.append(n),a&&a.length){this.node.dataset.reflowLayout!=="unstyled"&&s.classList.add("ref-dropdown-toggle");let o=u("<ul></ul>");s.append(o),this.buildListsRecursive(o,a)}}}},st=fr;C(st,"type","category-list"),C(st,"possibleLayouts",["unstyled","horizontal-bar","vertical-bar"]);var Ki=st;var mr=class extends O{constructor(e,r={}){super(e,r);C(this,"_state",null);C(this,"possibleTypes",["dropdown","sidebar"]);C(this,"backendUpdateTimeout",null);C(this,"pendingBackendUpdates",{});this.backdrop=u('<div class="ref-backdrop"></div>'),this.summary=u(`
			<div class="ref-summary">
				<div class="ref-summary-header">
					<h5 class="ref-summary-title">${m("cart")}</h5>
					<div class="ref-close-button">\xD7</div>
				</div>
				<div class="ref-summary-body">
					<div class="ref-loading-overlay"></div>
					<div class="ref-message">${m("cart.errors.empty")}</div>
					<div class="ref-cart-summary">
						<div class="ref-products"></div>
						<hr>
						<div class="ref-totals">
							<div class="ref-subtotal">
								<div class="ref-row"><span>${m("subtotal")}</span><span></span></div>
							</div>
							<div class="ref-shipping-taxes">${m("cart.subtotal_only")}</div>
						</div>
					</div>
				</div>
				<div class="ref-summary-footer">
					<a href="#" class="ref-button"></a>
				</div>
			</div>
		`),this.summaryBody=this.summary.querySelector(".ref-summary-body"),this.loadingOverlay=this.summary.querySelector(".ref-loading-overlay"),this.productContainer=this.summary.querySelector(".ref-products"),this.button=this.summary.querySelector(".ref-summary-footer .ref-button"),this.productQuantityWidget=new WeakMap}init(){this.node.addEventListener("click",this.onButtonClick.bind(this)),this.summary.addEventListener("click",this.onSidebarClick.bind(this)),this.scheduleRefresh=Ke(this.refresh.bind(this),250),le("reflow-add-to-cart",this.scheduleRefresh),le("reflow-update-cart-product",this.scheduleRefresh),le("reflow-remove-cart-product",this.scheduleRefresh)}onButtonClick(e){if(!e.target.closest(".ref-summary")){this.toggle();return}}async onSidebarClick(e){if(e.target.closest(".ref-close-button")){e.preventDefault(),e.stopPropagation(),this.hide();return}if(e.target.closest(".ref-product-remove")){e.preventDefault(),e.stopPropagation();let r=e.target.closest(".ref-product"),i=this.productQuantityWidget.get(r),s=i.getProduct(),a=i.getVariant(),n=new FormData,o=r.dataset.personalization;o&&o.length&&n.append("personalization",o),Reflow.cart.scheduleAPICall(s+"-remove",()=>Reflow.cart.removeProduct(s,a,n),0)}}get state(){return this.demoMode?this._state||null:this._state||Reflow.cart.state||null}set state(e=null){this._state=e}toggle(){this.isSummaryOpen()?this.hide():this.show()}hide(){this.summary.classList.remove("open"),!this.isDemoMode()&&this.hasSummary()&&(this.backdrop.remove(),this.backdrop.classList.remove("active")),this.refresh()}show(){this.summary.classList.add("open"),!this.isDemoMode()&&this.hasSummary()&&(this.node.append(this.backdrop),this.backdrop.classList.add("active")),this.refresh()}get key(){return localStorage.reflowCartKey}hasSummary(){return this.possibleTypes.includes(this.getSummaryType())}getSummaryType(){return this.node.dataset.reflowSummaryType}getSummaryPosition(){return this.node.dataset.reflowSummaryPosition}isSummaryOpen(){return this.summary.classList.contains("open")}getCartURL(){return this.node.dataset.reflowShoppingcartUrl}setCartURL(e){this.node.dataset.reflowShoppingcartUrl=e}formatMoney(e){return N(e,this.state.currencyConfig)}calculateTotalQuantity(){return this.demoMode?this.state?this.state.products.reduce((e,r)=>e+r.quantity,0):0:Reflow&&Reflow.cart?Reflow.cart.quantity:0}renderProductCompact(e){let r=u(`
			<div class="ref-product">
				<div class="ref-product-col">
					<img class="ref-product-photo">
					<div class="ref-product-controls">
						<div class="ref-row">
							<div>
								<div class="ref-product-name"></div>
								<div class="ref-product-personalization-holder"></div>
							</div>
							<div class="ref-product-total"></div>
						</div>
						<div class="ref-product-quantity"></div>
						<div class="ref-product-qty-message"></div>
					</div>
				</div>
			</div>
		`),i=e.name;e.variant&&(i+=` (${e.variant.name})`);let s=u(".ref-product-photo",r)[0];if(s.src=e.image.sm,s.alt=i,u(".ref-product-name",r)[0].textContent=i,e.inStock&&e.quantity>e.availableQuantity?u(".ref-product-qty-message",r)[0].textContent=g("cart.left_in_stock",{in_stock:e.availableQuantity}):e.inStock&&e.quantity>e.maxQty?u(".ref-product-qty-message",r)[0].textContent=g("cart.max_product_qty",{max_quantity:e.maxQty}):u(".ref-product-qty-message",r)[0].remove(),u(".ref-product-total",r)[0].textContent=e.inStock?this.formatMoney(e.price):g("out_of_stock"),e.personalization&&e.personalization.length)try{r.dataset.personalization=JSON.stringify(e.personalization.map(c=>{let d={id:c.id};return c.inputText&&(d.inputText=c.inputText),c.selected&&(d.selected=c.selected),c.filename&&(d.filename=c.filename),c.filehash&&(d.filehash=c.filehash),d}));let l=u(".ref-product-personalization-holder",r)[0];for(let c of e.personalization){let d=u('<div class="ref-product-personalization"></div>'),h=`${c.name}${c.inputText?': "'+c.inputText+'"':""}${c.selected?': "'+c.selected+'" ':""}${c.filename?': "'+c.filename+'" ':""}`;d.title=h,h=h.length>25?h.substring(0,25)+"...":h,d.textContent=h,l.append(d)}}catch(l){console.error("Reflow:",l)}let a=u("<div></div>"),n=new ve(a,{inStock:e.inStock,onChange:l=>{let c=l.getProduct(),d=l.getQuantity(),h=l.getVariant(),p=new FormData,v=r.dataset.personalization;v&&v.length&&p.append("personalization",v),Reflow.cart.scheduleAPICall(c+(h?`-${h}`:"")+"-quantity",()=>Reflow.cart.updateProduct(c,d,h,p))}});n.init(),e.variant&&n.setVariant(e.variant.id),n.setProduct(e.id),n.setMaxQuantity(Math.min(e.availableQuantity,e.maxQty)),n.setQuantity(e.quantity),n.update();let o=u(".ref-product-quantity",r)[0];return o.append(n.node),o.append(u(`<div class="ref-product-remove">${m("remove")}</div>`)),this.productQuantityWidget.set(r,n),r}async refreshState(){if(this.mockData){this.state=this.mockData;return}this.isSummaryOpen()&&await Reflow.cart.refresh()}async refresh(){this.showLoading(),await this.refreshState(),this.hideLoading(),this.update()}showLoading(){this.loadingOverlay.classList.add("visible")}hideLoading(){this.loadingOverlay.classList.remove("visible")}async update(){if(!this.state)try{await this.refreshState()}catch(r){this.productContainer.textContent=g("cart.errors.unavailable");return}let e=this.calculateTotalQuantity();if(this.node.dataset.reflowCount=e,e?this.node.classList.add("has-quantity"):this.node.classList.remove("has-quantity"),this.node.classList.add("reflow-cart-toggler"),this.hasSummary()){if(this.isSummaryOpen()){let r=this.summaryBody.querySelector(".ref-cart-summary"),i=this.summaryBody.querySelector(".ref-message");this.productContainer.innerHTML="";let s="close",a=g("close"),n="#";if(!this.state.products.length)r.style.display="none",i.style.display="block";else{for(let d of this.state.products)this.productContainer.append(this.renderProductCompact(d));let l=this.summaryBody.querySelector(".ref-subtotal");l.firstElementChild.children[1].textContent=this.formatMoney(this.state.subtotal);let c=this.getCartURL();c&&(s="checkout",a=g("cart.checkout"),n=c),r.style.display="flex",i.style.display="none"}s==="close"?this.button.classList.add("ref-close-button"):this.button.classList.remove("ref-close-button"),this.button.style.display="inline-block",this.button.href=n,this.button.textContent=a}this.summary.classList.remove("sidebar","dropdown","left","right"),this.summary.classList.add(this.getSummaryType(),this.getSummaryPosition()),this.node.append(this.summary),this.node.classList.add("has-summary")}else this.summary.remove(),this.node.classList.remove("has-summary");return this.node}};C(mr,"type","view-cart");var Ji=mr;var Yi=class{constructor(){C(this,"_state",null);C(this,"backendUpdateTimeout",null);C(this,"pendingBackendUpdates",{});this.localFormData=new es}calculateTotalQuantity(){return this.state?this.state.products.reduce((e,r)=>e+r.quantity,0):0}get key(){return localStorage.reflowCartKey}set key(e){localStorage.reflowCartKey=e}get state(){return this._state}set state(e){this._state=e,this.quantity=this.calculateTotalQuantity()}get quantity(){return parseInt(localStorage.reflowCartQuantity,10)||0}set quantity(e){localStorage.reflowCartQuantity=e}async create(){return(await k("/carts/",{method:"POST"},!1)).cartKey}async fetch(e,r={}){let i="",s=[];for(let a in r)s.push(`${a}=${r[a]}`);return s.length&&(i="?"+s.join("&")),await k("/carts/"+e+i,{},!1)}async refreshState(e={}){try{if(this.key)this.state=await this.fetch(this.key,e);else throw new Error("No Key")}catch(r){!r.status||r.status==404?(this.key=await this.create(),this.state=await this.fetch(this.key,e),this.localFormData.clear()):console.error("Reflow:",r)}}async refresh(e={}){await this.refreshState(e)}async addProduct(e,r=1,i,s){let a="";this.key&&(a="?cartKey="+this.key);let n="/add-to-cart/"+e;n+="/"+r,i&&(n+="/"+i),n+=a;let o=await k(n,{method:"POST",body:s});return o.cartKey&&(this.key=o.cartKey),Je("reflow-add-to-cart",document,{productID:e}),this.quantity=o.cartQuantity,o}async updateProduct(e,r=1,i,s){try{let a=await k(`/update-cart-product/${this.key}/${e}/`+r+"/"+(i||""),{method:"POST",body:s},!1);return Je("reflow-update-cart-product",document,{productID:e}),this.quantity=a.cartQuantity,a}catch(a){X(Y(a,"system"))}}async removeProduct(e,r,i){let s=await k(`/remove-cart-product/${this.key}/${e}/`+(r||""),{method:"POST",body:i},!1);return Je("reflow-remove-cart-product",document,{productID:e}),this.quantity=s.cartQuantity,s}async createPaypalOrder(e,r){return(await k(`/create-paypal-order/${this.key}/`,{method:"POST"},!1)).orderID}async capturePaypalOrder(e,r){let i=new FormData;i.append("orderID",e.orderID);try{return await k(`/capture-paypal-order/${this.key}/`,{method:"POST",body:i},!1)}catch(s){if(!s.data)throw s;let a=s.data,n=Array.isArray(a.details)&&a.details[0];if(n&&n.issue==="INSTRUMENT_DECLINED")return r.restart();throw s}}async updatePaypalShipping(e,r){try{let i=new FormData;i.append("orderID",e.orderID),i.append("address",JSON.stringify(e.shipping_address));let s=0;e.selected_shipping_option&&e.selected_shipping_option.id&&(s=e.selected_shipping_option.id),i.append("selectedShippingOption",s);let a=await k(`/update-paypal-shipping/${this.key}/`,{method:"POST",body:i},!1);return r.resolve()}catch(i){let s=i.data&&i.data.errors&&i.data.errors.system||"";return console.error("Reflow:",i),r.reject()}}scheduleAPICall(e,r,i=1e3){this.pendingBackendUpdates[e]=r,clearTimeout(this.backendUpdateTimeout),this.backendUpdateTimeout=setTimeout(async()=>{let s=[];for(let a in this.pendingBackendUpdates)s.push(this.pendingBackendUpdates[a]()),delete this.pendingBackendUpdates[a];await Promise.allSettled(s)},i)}},es=class{getAll(){return JSON.parse(localStorage.getItem("reflowFormData")||"{}")}get(e){return this.getAll()[e]}set(e,r){let i=this.getAll();i[e]=r||"",localStorage.setItem("reflowFormData",JSON.stringify(i))}isSet(e){return this.get(e)!==void 0}clear(){localStorage.setItem("reflowFormData","{}")}},ts=Yi;var Ca="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xF6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Sa="\u03B5\u03BB1\u03C52\u0431\u04331\u0435\u043B3\u0434\u0435\u0442\u04384\u0435\u044E2\u043A\u0430\u0442\u043E\u043B\u0438\u043A6\u043E\u043C3\u043C\u043A\u04342\u043E\u043D1\u0441\u043A\u0432\u04306\u043E\u043D\u043B\u0430\u0439\u043D5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043A\u04403\u049B\u0430\u04373\u0570\u0561\u05753\u05D9\u05E9\u05E8\u05D0\u05DC5\u05E7\u05D5\u05DD3\u0627\u0628\u0648\u0638\u0628\u064A5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062F\u06464\u0628\u062D\u0631\u064A\u06465\u062C\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062F\u064A\u06296\u0639\u0644\u064A\u0627\u06465\u0645\u063A\u0631\u06285\u0645\u0627\u0631\u0627\u062A5\u06CC\u0631\u0627\u06465\u0628\u0627\u0631\u062A2\u0632\u0627\u06314\u064A\u062A\u06433\u06BE\u0627\u0631\u062A5\u062A\u0648\u0646\u06334\u0633\u0648\u062F\u0627\u06463\u0631\u064A\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064A\u06466\u0642\u0637\u06313\u0643\u0627\u062B\u0648\u0644\u064A\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064A\u0633\u064A\u06275\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067E\u0627\u06A9\u0633\u062A\u0627\u06467\u0680\u0627\u0631\u062A4\u0915\u0949\u092E3\u0928\u0947\u091F3\u092D\u093E\u0930\u09240\u092E\u094D3\u094B\u09245\u0938\u0902\u0917\u0920\u09285\u09AC\u09BE\u0982\u09B2\u09BE5\u09AD\u09BE\u09B0\u09A42\u09F0\u09A44\u0A2D\u0A3E\u0A30\u0A244\u0AAD\u0ABE\u0AB0\u0AA44\u0B2D\u0B3E\u0B30\u0B244\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE6\u0BB2\u0B99\u0BCD\u0B95\u0BC86\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD11\u0C2D\u0C3E\u0C30\u0C24\u0C4D5\u0CAD\u0CBE\u0CB0\u0CA44\u0D2D\u0D3E\u0D30\u0D24\u0D025\u0DBD\u0D82\u0D9A\u0DCF4\u0E04\u0E2D\u0E213\u0E44\u0E17\u0E223\u0EA5\u0EB2\u0EA73\u10D2\u10D42\u307F\u3093\u306A3\u30A2\u30DE\u30BE\u30F34\u30AF\u30E9\u30A6\u30C94\u30B0\u30FC\u30B0\u30EB4\u30B3\u30E02\u30B9\u30C8\u30A23\u30BB\u30FC\u30EB3\u30D5\u30A1\u30C3\u30B7\u30E7\u30F36\u30DD\u30A4\u30F3\u30C84\u4E16\u754C2\u4E2D\u4FE11\u56FD1\u570B1\u6587\u7F513\u4E9A\u9A6C\u900A3\u4F01\u4E1A2\u4F5B\u5C712\u4FE1\u606F2\u5065\u5EB72\u516B\u53662\u516C\u53F81\u76CA2\u53F0\u6E7E1\u70632\u5546\u57CE1\u5E971\u68072\u5609\u91CC0\u5927\u9152\u5E975\u5728\u7EBF2\u5927\u62FF2\u5929\u4E3B\u65593\u5A31\u4E502\u5BB6\u96FB2\u5E7F\u4E1C2\u5FAE\u535A2\u6148\u55842\u6211\u7231\u4F603\u624B\u673A2\u62DB\u80582\u653F\u52A11\u5E9C2\u65B0\u52A0\u57612\u95FB2\u65F6\u5C1A2\u66F8\u7C4D2\u673A\u67842\u6DE1\u9A6C\u95213\u6E38\u620F2\u6FB3\u95802\u70B9\u770B2\u79FB\u52A82\u7EC4\u7EC7\u673A\u67844\u7F51\u57401\u5E971\u7AD91\u7EDC2\u8054\u901A2\u8C37\u6B4C2\u8D2D\u72692\u901A\u8CA92\u96C6\u56E22\u96FB\u8A0A\u76C8\u79D14\u98DE\u5229\u6D663\u98DF\u54C12\u9910\u53852\u9999\u683C\u91CC\u62C93\u6E2F2\uB2F7\uB1371\uCEF42\uC0BC\uC1312\uD55C\uAD6D2",we=(t,e)=>{for(let r in e)t[r]=e[r];return t},gr="numeric",yr="ascii",vr="alpha",at="asciinumeric",nt="alphanumeric",br="domain",rs="emoji",Ea="scheme",La="slashscheme",is="whitespace";function Ta(t,e){return t in e||(e[t]=[]),e[t]}function ge(t,e,r){e[gr]&&(e[at]=!0,e[nt]=!0),e[yr]&&(e[at]=!0,e[vr]=!0),e[at]&&(e[nt]=!0),e[vr]&&(e[nt]=!0),e[nt]&&(e[br]=!0),e[rs]&&(e[br]=!0);for(let i in e){let s=Ta(i,r);s.indexOf(t)<0&&s.push(t)}}function Pa(t,e){let r={};for(let i in e)e[i].indexOf(t)>=0&&(r[i]=!0);return r}function W(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}W.groups={};W.prototype={accepts(){return!!this.t},go(t){let e=this,r=e.j[t];if(r)return r;for(let i=0;i<e.jr.length;i++){let s=e.jr[i][0],a=e.jr[i][1];if(a&&s.test(t))return a}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,r,i){for(let s=0;s<t.length;s++)this.tt(t[s],e,r,i)},tr(t,e,r,i){i=i||W.groups;let s;return e&&e.j?s=e:(s=new W(e),r&&i&&ge(e,r,i)),this.jr.push([t,s]),s},ts(t,e,r,i){let s=this,a=t.length;if(!a)return s;for(let n=0;n<a-1;n++)s=s.tt(t[n]);return s.tt(t[a-1],e,r,i)},tt(t,e,r,i){i=i||W.groups;let s=this;if(e&&e.j)return s.j[t]=e,e;let a=e,n,o=s.go(t);if(o?(n=new W,we(n.j,o.j),n.jr.push.apply(n.jr,o.jr),n.jd=o.jd,n.t=o.t):n=new W,a){if(i)if(n.t&&typeof n.t=="string"){let l=we(Pa(n.t,i),r);ge(a,l,i)}else r&&ge(a,r,i);n.t=a}return s.j[t]=n,n}};var T=(t,e,r,i,s)=>t.ta(e,r,i,s),Z=(t,e,r,i,s)=>t.tr(e,r,i,s),ss=(t,e,r,i,s)=>t.ts(e,r,i,s),x=(t,e,r,i,s)=>t.tt(e,r,i,s),ae="WORD",xr="UWORD",Re="LOCALHOST",wr="TLD",_r="UTLD",ot="SCHEME",_e="SLASH_SCHEME",Cr="NUM",as="WS",Sr="NL",He="OPENBRACE",Me="CLOSEBRACE",lt="OPENBRACKET",dt="CLOSEBRACKET",ct="OPENPAREN",ut="CLOSEPAREN",ht="OPENANGLEBRACKET",pt="CLOSEANGLEBRACKET",ft="FULLWIDTHLEFTPAREN",mt="FULLWIDTHRIGHTPAREN",gt="LEFTCORNERBRACKET",yt="RIGHTCORNERBRACKET",vt="LEFTWHITECORNERBRACKET",bt="RIGHTWHITECORNERBRACKET",xt="FULLWIDTHLESSTHAN",wt="FULLWIDTHGREATERTHAN",_t="AMPERSAND",Ct="APOSTROPHE",St="ASTERISK",de="AT",Et="BACKSLASH",Lt="BACKTICK",Tt="CARET",ce="COLON",Er="COMMA",Pt="DOLLAR",ee="DOT",kt="EQUALS",Lr="EXCLAMATION",te="HYPHEN",At="PERCENT",It="PIPE",Rt="PLUS",Ht="POUND",Mt="QUERY",Tr="QUOTE",Pr="SEMI",re="SLASH",Oe="TILDE",Ot="UNDERSCORE",ns="EMOJI",Bt="SYM",os=Object.freeze({__proto__:null,WORD:ae,UWORD:xr,LOCALHOST:Re,TLD:wr,UTLD:_r,SCHEME:ot,SLASH_SCHEME:_e,NUM:Cr,WS:as,NL:Sr,OPENBRACE:He,CLOSEBRACE:Me,OPENBRACKET:lt,CLOSEBRACKET:dt,OPENPAREN:ct,CLOSEPAREN:ut,OPENANGLEBRACKET:ht,CLOSEANGLEBRACKET:pt,FULLWIDTHLEFTPAREN:ft,FULLWIDTHRIGHTPAREN:mt,LEFTCORNERBRACKET:gt,RIGHTCORNERBRACKET:yt,LEFTWHITECORNERBRACKET:vt,RIGHTWHITECORNERBRACKET:bt,FULLWIDTHLESSTHAN:xt,FULLWIDTHGREATERTHAN:wt,AMPERSAND:_t,APOSTROPHE:Ct,ASTERISK:St,AT:de,BACKSLASH:Et,BACKTICK:Lt,CARET:Tt,COLON:ce,COMMA:Er,DOLLAR:Pt,DOT:ee,EQUALS:kt,EXCLAMATION:Lr,HYPHEN:te,PERCENT:At,PIPE:It,PLUS:Rt,POUND:Ht,QUERY:Mt,QUOTE:Tr,SEMI:Pr,SLASH:re,TILDE:Oe,UNDERSCORE:Ot,EMOJI:ns,SYM:Bt}),Ce=/[a-z]/,kr=/\p{L}/u,Ar=/\p{Emoji}/u;var Ir=/\d/,ls=/\s/;var ds=`
`,ka="\uFE0F",Aa="\u200D",Dt=null,Nt=null;function Ia(t){t===void 0&&(t=[]);let e={};W.groups=e;let r=new W;Dt==null&&(Dt=cs(Ca)),Nt==null&&(Nt=cs(Sa)),x(r,"'",Ct),x(r,"{",He),x(r,"}",Me),x(r,"[",lt),x(r,"]",dt),x(r,"(",ct),x(r,")",ut),x(r,"<",ht),x(r,">",pt),x(r,"\uFF08",ft),x(r,"\uFF09",mt),x(r,"\u300C",gt),x(r,"\u300D",yt),x(r,"\u300E",vt),x(r,"\u300F",bt),x(r,"\uFF1C",xt),x(r,"\uFF1E",wt),x(r,"&",_t),x(r,"*",St),x(r,"@",de),x(r,"`",Lt),x(r,"^",Tt),x(r,":",ce),x(r,",",Er),x(r,"$",Pt),x(r,".",ee),x(r,"=",kt),x(r,"!",Lr),x(r,"-",te),x(r,"%",At),x(r,"|",It),x(r,"+",Rt),x(r,"#",Ht),x(r,"?",Mt),x(r,'"',Tr),x(r,"/",re),x(r,";",Pr),x(r,"~",Oe),x(r,"_",Ot),x(r,"\\",Et);let i=Z(r,Ir,Cr,{[gr]:!0});Z(i,Ir,i);let s=Z(r,Ce,ae,{[yr]:!0});Z(s,Ce,s);let a=Z(r,kr,xr,{[vr]:!0});Z(a,Ce),Z(a,kr,a);let n=Z(r,ls,as,{[is]:!0});x(r,ds,Sr,{[is]:!0}),x(n,ds),Z(n,ls,n);let o=Z(r,Ar,ns,{[rs]:!0});Z(o,Ar,o),x(o,ka,o);let l=x(o,Aa);Z(l,Ar,o);let c=[[Ce,s]],d=[[Ce,null],[kr,a]];for(let h=0;h<Dt.length;h++)ue(r,Dt[h],wr,ae,c);for(let h=0;h<Nt.length;h++)ue(r,Nt[h],_r,xr,d);ge(wr,{tld:!0,ascii:!0},e),ge(_r,{utld:!0,alpha:!0},e),ue(r,"file",ot,ae,c),ue(r,"mailto",ot,ae,c),ue(r,"http",_e,ae,c),ue(r,"https",_e,ae,c),ue(r,"ftp",_e,ae,c),ue(r,"ftps",_e,ae,c),ge(ot,{scheme:!0,ascii:!0},e),ge(_e,{slashscheme:!0,ascii:!0},e),t=t.sort((h,p)=>h[0]>p[0]?1:-1);for(let h=0;h<t.length;h++){let p=t[h][0],y=t[h][1]?{[Ea]:!0}:{[La]:!0};p.indexOf("-")>=0?y[br]=!0:Ce.test(p)?Ir.test(p)?y[at]=!0:y[yr]=!0:y[gr]=!0,ss(r,p,p,y)}return ss(r,"localhost",Re,{ascii:!0}),r.jd=new W(Bt),{start:r,tokens:we({groups:e},os)}}function Ra(t,e){let r=Ha(e.replace(/[A-Z]/g,o=>o.toLowerCase())),i=r.length,s=[],a=0,n=0;for(;n<i;){let o=t,l=null,c=0,d=null,h=-1,p=-1;for(;n<i&&(l=o.go(r[n]));)o=l,o.accepts()?(h=0,p=0,d=o):h>=0&&(h+=r[n].length,p++),c+=r[n].length,a+=r[n].length,n++;a-=h,n-=p,c-=h,s.push({t:d.t,v:e.slice(a-c,a),s:a-c,e:a})}return s}function Ha(t){let e=[],r=t.length,i=0;for(;i<r;){let s=t.charCodeAt(i),a,n=s<55296||s>56319||i+1===r||(a=t.charCodeAt(i+1))<56320||a>57343?t[i]:t.slice(i,i+2);e.push(n),i+=n.length}return e}function ue(t,e,r,i,s){let a,n=e.length;for(let o=0;o<n-1;o++){let l=e[o];t.j[l]?a=t.j[l]:(a=new W(i),a.jr=s.slice(),t.j[l]=a),t=a}return a=new W(r),a.jr=s.slice(),t.j[e[n-1]]=a,a}function cs(t){let e=[],r=[],i=0,s="0123456789";for(;i<t.length;){let a=0;for(;s.indexOf(t[i+a])>=0;)a++;if(a>0){e.push(r.join(""));for(let n=parseInt(t.substring(i,i+a),10);n>0;n--)r.pop();i+=a}else r.push(t[i]),i++}return e}var Be={defaultProtocol:"http",events:null,format:us,formatHref:us,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function qt(t,e){e===void 0&&(e=null);let r=we({},Be);t&&(r=we(r,t instanceof qt?t.o:t));let i=r.ignoreTags,s=[];for(let a=0;a<i.length;a++)s.push(i[a].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=s}qt.prototype={o:Be,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){let i=e!=null,s=this.o[t];return s&&(typeof s=="object"?(s=r.t in s?s[r.t]:Be[t],typeof s=="function"&&i&&(s=s(e,r))):typeof s=="function"&&i&&(s=s(e,r.t,r)),s)},getObj(t,e,r){let i=this.o[t];return typeof i=="function"&&e!=null&&(i=i(e,r.t,r)),i},render(t){let e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function us(t){return t}function hs(t,e){this.t="token",this.v=t,this.tk=e}hs.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){let e=this.toString(),r=t.get("truncate",e,this),i=t.get("format",e,this);return r&&i.length>r?i.substring(0,r)+"\u2026":i},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=Be.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){let e=this,r=this.toHref(t.get("defaultProtocol")),i=t.get("formatHref",r,this),s=t.get("tagName",r,e),a=this.toFormattedString(t),n={},o=t.get("className",r,e),l=t.get("target",r,e),c=t.get("rel",r,e),d=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return n.href=i,o&&(n.class=o),l&&(n.target=l),c&&(n.rel=c),d&&we(n,d),{tagName:s,attributes:n,content:a,eventListeners:h}}};function Ut(t,e){class r extends hs{constructor(s,a){super(s,a);this.t=t}}for(let i in e)r.prototype[i]=e[i];return r.t=t,r}var ps=Ut("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),fs=Ut("text"),Ma=Ut("nl"),$t=Ut("url",{isLink:!0,toHref(t){return t===void 0&&(t=Be.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){let t=this.tk;return t.length>=2&&t[0].t!==Re&&t[1].t===ce}});var K=t=>new W(t);function Oa(t){let{groups:e}=t,r=e.domain.concat([_t,St,de,Et,Lt,Tt,Pt,kt,te,Cr,At,It,Rt,Ht,re,Bt,Oe,Ot]),i=[Ct,ce,Er,ee,Lr,Mt,Tr,Pr,ht,pt,He,Me,dt,lt,ct,ut,ft,mt,gt,yt,vt,bt,xt,wt],s=[_t,Ct,St,Et,Lt,Tt,Pt,kt,te,He,Me,At,It,Rt,Ht,Mt,re,Bt,Oe,Ot],a=K(),n=x(a,Oe);T(n,s,n),T(n,e.domain,n);let o=K(),l=K(),c=K();T(a,e.domain,o),T(a,e.scheme,l),T(a,e.slashscheme,c),T(o,s,n),T(o,e.domain,o);let d=x(o,de);x(n,de,d),x(l,de,d),x(c,de,d);let h=x(n,ee);T(h,s,n),T(h,e.domain,n);let p=K();T(d,e.domain,p),T(p,e.domain,p);let v=x(p,ee);T(v,e.domain,p);let y=K(ps);T(v,e.tld,y),T(v,e.utld,y),x(d,Re,y);let b=x(p,te);T(b,e.domain,p),T(y,e.domain,p),x(y,ee,v),x(y,te,b);let _=x(y,ce);T(_,e.numeric,ps);let S=x(o,te),L=x(o,ee);T(S,e.domain,o),T(L,s,n),T(L,e.domain,o);let E=K($t);T(L,e.tld,E),T(L,e.utld,E),T(E,e.domain,o),T(E,s,n),x(E,ee,L),x(E,te,S),x(E,de,d);let U=x(E,ce),F=K($t);T(U,e.numeric,F);let M=K($t),H=K();T(M,r,M),T(M,i,H),T(H,r,M),T(H,i,H),x(E,re,M),x(F,re,M);let B=x(l,ce),q=x(c,ce),ie=x(q,re),G=x(ie,re);T(l,e.domain,o),x(l,ee,L),x(l,te,S),T(c,e.domain,o),x(c,ee,L),x(c,te,S),T(B,e.domain,M),x(B,re,M),T(G,e.domain,M),T(G,r,M),x(G,re,M);let ne=[[He,Me],[lt,dt],[ct,ut],[ht,pt],[ft,mt],[gt,yt],[vt,bt],[xt,wt]];for(let J=0;J<ne.length;J++){let[Se,ye]=ne[J],he=x(M,Se);x(H,Se,he),x(he,ye,M);let w=K($t);T(he,r,w);let P=K();T(he,i),T(w,r,w),T(w,i,P),T(P,r,w),T(P,i,P),x(w,ye,M),x(P,ye,M)}return x(a,Re,E),x(a,Sr,Ma),{start:a,tokens:os}}function Ba(t,e,r){let i=r.length,s=0,a=[],n=[];for(;s<i;){let o=t,l=null,c=null,d=0,h=null,p=-1;for(;s<i&&!(l=o.go(r[s].t));)n.push(r[s++]);for(;s<i&&(c=l||o.go(r[s].t));)l=null,o=c,o.accepts()?(p=0,h=o):p>=0&&p++,s++,d++;if(p<0)s-=d,s<i&&(n.push(r[s]),s++);else{n.length>0&&(a.push(Rr(fs,e,n)),n=[]),s-=p,d-=p;let v=h.t,y=r.slice(s-d,s);a.push(Rr(v,e,y))}}return n.length>0&&a.push(Rr(fs,e,n)),a}function Rr(t,e,r){let i=r[0].s,s=r[r.length-1].e,a=e.slice(i,s);return new t(a,r)}var Uu=typeof console!="undefined"&&console&&console.warn||(()=>{});var z={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Da(){z.scanner=Ia(z.customSchemes);for(let t=0;t<z.tokenQueue.length;t++)z.tokenQueue[t][1]({scanner:z.scanner});z.parser=Oa(z.scanner.tokens);for(let t=0;t<z.pluginQueue.length;t++)z.pluginQueue[t][1]({scanner:z.scanner,parser:z.parser});z.initialized=!0}function ms(t){return z.initialized||Da(),Ba(z.parser.start,t,Ra(z.scanner.start,t))}function gs(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Na(t){return t.replace(/"/g,"&quot;")}function qa(t){let e=[];for(let r in t){let i=t[r]+"";e.push(`${r}="${Na(i)}"`)}return e.join(" ")}function Ua(t){let{tagName:e,attributes:r,content:i}=t;return`<${e} ${qa(r)}>${gs(i)}</${e}>`}function Hr(t,e){e===void 0&&(e={}),e=new qt(e,Ua);let r=ms(t),i=[];for(let s=0;s<r.length;s++){let a=r[s];a.t==="nl"&&e.get("nl2br")?i.push(`<br>
`):!a.isLink||!e.check(a)?i.push(gs(a.toString())):i.push(e.render(a))}return i.join("")}String.prototype.linkify||Object.defineProperty(String.prototype,"linkify",{writable:!1,value:function(e){return Hr(this,e)}});var Mr=class extends O{constructor(e,r){super(e,r);this.retries=0,this.maxRetries=6,this.retryTimeout=5e3,this.currencyConfig={}}init(){}async fetchData(){if(this.mockData)return this.currencyConfig=this.mockData.currencyConfig,this.mockData;let e=this.getAPIEndpoint(),r=await k(e,{},!1);return r.error?(console.error("Reflow:",r.error),null):(this.currencyConfig=r.currencyConfig,r)}getAPIEndpoint(){let e=new URL(location.href),r=this.node.dataset;if(r.reflowOrder&&r.reflowSecurehash)return"/orders/"+r.reflowOrder+"?secure_hash="+r.reflowSecurehash;let i=e.searchParams.get("session_id");if(i)return"/orders/stripe/"+i+"/";let s=e.searchParams.get("order_id"),a=e.searchParams.get("secure_hash");if(s&&a)return"/orders/"+s+"?secure_hash="+a;let n=new Error("Invalid API parameters");throw n.missingParams=!0,n}formatMoney(e){return N(e,this.currencyConfig)}getDeliveryDate(e){var r=new Date(e),i={month:"long",day:"numeric"};return r.toLocaleDateString(Reflow.locales.locale,i)}getCustomerFacingStatus(e){let r="pending",i={failed:"payment_failed",refunded:"refunded",returned:"returned",delivered:"received",ready_for_pickup:"ready_for_pickup",shipped:"shipped",paid:"processed",pending:"pending",unfulfilled:"pending"};for(let s of Object.entries(i))if(s[0]==e.fulfillment_status||s[0]==e.payment_status){r=s[1];break}return r}appendAddressLines(e,r){if(Array.isArray(e))for(let i of e){if(i.name=="Name")continue;let s=u("<span></span>");s.textContent=g(i.name)+": "+i.val,r.append(s)}else for(let i of["address","city","postcode","state","country"])if(e[i]){let s=u("<span></span>");s.textContent=g(i)+": "+e[i],r.append(s)}}async update(){var v;let e,r=u('<div class="reflow-order-status">Loading</div>');this.node.innerHTML="",this.node.append(r);try{e=await this.fetchData()}catch(y){throw y.missingParams?(r.textContent=g("order_status.check_email"),y):(this.retries++,this.retries>=this.maxRetries?(r.textContent=g("order_status.check_email"),y):(setTimeout(()=>{this.update()},this.retryTimeout),y))}r.innerHTML="";let i=u('<div class="col"></div>'),s=this.parseShowString(),a=u('<div class="ref-order-info"></div>');this.renderTestModeBadge(a);let n=u("<h2></h2>");n.innerHTML=m("order_status.order",{orderId:e.id}),a.append(n);let o=u('<div class="ref-order-line ref-status"></div>');o.innerHTML="<b>"+m("order_status.status")+"</b>"+m("order_status."+this.getCustomerFacingStatus(e)),a.append(o);let l=u('<div class="ref-order-line ref-created"></div>'),c=new Date(e.created_at*1e3);if(l.innerHTML=`<b>${m("order_status.created")}</b>${c.toLocaleString()}`,a.append(l),e.payment_status=="pending"&&e.payment_instructions){let y=u('<div class="ref-order-payment-instructions"></div>');y.innerHTML=e.payment_instructions,y.prepend(u("<br>")),y.prepend(u(`<b>${m("payment")}</b>`)),a.append(y)}let d=i.cloneNode();if(d.append(a),r.append(d),s.full||s.customer){let y=u(`<div class="ref-order-customer"><h2>${m("order_status.customer_details")}</h2></div>`);if(e.customer.name){let S=u('<div class="ref-order-line ref-customer-name"></div>');S.textContent=e.customer.name,S.prepend(u(`<b>${m("name")}</b>`)),y.append(S)}let b=u('<div class="ref-order-line ref-customer-email"></div>');if(b.textContent=e.customer.email,b.prepend(u(`<b>${m("email")}</b>`)),y.append(b),e.customer.phone){let S=u('<div class="ref-order-line ref-customer-phone"></div>');S.textContent=e.customer.phone,S.prepend(u(`<b>${m("phone")}</b>`)),y.append(S)}let _=i.cloneNode();_.append(y),r.append(_)}let h,p;if(s.full||s.shipping){let y=e.delivery_method||"shipping";if(e.delivery_information){p=u(`<div class="ref-order-line"><b>${m("delivery_information")}</b></div>`);let b=u("<span></span>");b.innerHTML=Hr(e.delivery_information),p.append(b)}if(y=="shipping"){if(h=u(`<div class="ref-order-shipping"><h2>${m("shipping")}</h2></div>`),p&&h.append(p),e.shipping_method){let b=u(`<div class="ref-order-line ref-shipping-method"><b>${m("shipping_method")}</b></div>`),_=u("<span></span>");if(_.textContent=e.shipping_method.name+(e.shipping_method.price?" ("+this.formatMoney(e.shipping_method.price)+")":""),b.append(_),h.append(b),e.delivery_period){let S=u(`<div class="ref-order-line"><b>${m("cart.estimated_delivery")}</b></div>`),L=u("<span></span>");L.textContent=this.getDeliveryDate(e.delivery_period.start_date)+" - "+this.getDeliveryDate(e.delivery_period.end_date),S.append(L),h.append(S)}}if(e.shipping_address){let b=u('<div class="ref-order-line ref-shipping-address"></div>');this.appendAddressLines(e.shipping_address,b),b.prepend(u(`<b>${m("shipping_address")}</b>`)),h.append(b)}}if(y=="pickup"){h=u(`<div class="ref-order-local-pickup"><h2>${m("pickup_at_store")}</h2></div>`),p&&h.append(p);let b=u(`<div class="ref-order-line"><b>${m("store")}</b></div>`),_=u("<span></span>");_.textContent=e.pickup_location.name,b.append(_),h.append(b);let S=u('<div class="ref-order-line"></div>');this.appendAddressLines(e.pickup_location.address,S),S.prepend(u(`<b>${m("address")}</b>`)),h.append(S);for(let L of["phone","email","working_hours"])if(e.pickup_location[L]){let E=u(`<div class="ref-order-line"><b>${m(L)}</b></div>`),U=u("<span></span>");U.textContent=e.pickup_location[L],E.append(U),h.append(E)}if(e.delivery_period){let L=u(`<div class="ref-order-line"><b>${m("cart.order_ready_for_pickup_label")}</b></div>`),E=u("<span></span>");E.textContent=this.getDeliveryDate(e.delivery_period.start_date)+" - "+this.getDeliveryDate(e.delivery_period.end_date),L.append(E),h.append(L)}}if(h){let b=i.cloneNode();b.append(h),r.append(b)}}if(e.note){let y=u('<div class="ref-order-line ref-note"></div>');y.textContent=e.note,y.prepend(u(`<b>${m("note_to_seller")}</b>`)),h?h.append(y):a.append(y)}if((s.full||s.billing)&&e.billing_address){let y=u(`<div class="ref-order-billing"><h2>${m("billing")}</h2></div>`),b=Array.isArray(e.billing_address)?e.billing_address.find(L=>L.name=="Name").val:e.billing_address.name;if(b){let L=u(`<div class="ref-order-line ref-billing-address"><b>${m("billing_name")}</b></div>`),E=u("<span></span>");E.textContent=b,L.append(E),y.append(L)}let _=u(`<div class="ref-order-line ref-billing-address"><b>${m("billing_address")}</b></div>`);this.appendAddressLines(e.billing_address,_),y.append(_);let S=i.cloneNode();S.append(y),r.append(S)}if(s.full||s["line-items"]){let y=e.discounts?e.discounts.amount:0,b=e.shipping_method?e.shipping_method.price:0,_=e.paid_gross,S=e.taxes?e.taxes.amount:0,L=_+y-b-S,E=u(`<div class="ref-line-items"><h2>${m("order_status.order_summary")}</h2></div>`);for(let[H,B]of e.products.entries()){let q=u('<div class="ref-order-line ref-line-item ref-product-line"><div class="ref-name"></div><div class="ref-price"><b></b><small></small></div></div>');if(q.querySelector(".ref-name").textContent=B.nameLine,q.querySelector(".ref-price b").textContent=this.formatMoney(B.price),q.querySelector(".ref-price small").textContent="("+(B.quantity>1?B.quantity+" \xD7 ":"")+this.formatMoney(B.unitPrice)+")",E.append(q),B.personalization&&B.personalization.length){E.append(u(`<b>${m("order_status.product_personalizations")}</b>`));for(let ie of B.personalization){let G=u('<div class="ref-order-line ref-line-item ref-personalization-line"><div class="ref-name"></div><div class="ref-price"><small></small></div></div>');G.querySelector(".ref-name").textContent=ie.name;let ne=ie.inputText||ie.selected||ie.filename||!1;if(ne){G.querySelector(".ref-name").textContent=ie.name+": ";let J=u("<small></small>");J.textContent='"'+ne+'"',G.querySelector(".ref-name").append(J)}G.querySelector(".ref-price small").textContent="("+(B.quantity>1?B.quantity+" \xD7 ":"")+this.formatMoney(ie.price)+")",E.append(G)}}H<e.products.length-1&&E.append(u('<div class="ref-tiny-separator">\u2219\u2219\u2219\u2219\u2219</div>'))}let U=u(`<div class="ref-order-line ref-line-item">${m("subtotal")} <span class="ref-price"></span></div>`);if(U.querySelector(".ref-price").textContent=this.formatMoney(L),E.append(u("<hr>")),E.append(U),b){let H=u(`<div class="ref-order-line ref-line-item">${m("shipping")} <span class="ref-price"></span></div>`);H.querySelector(".ref-price").textContent=this.formatMoney(b),E.append(H)}if(y){let H=u('<div class="ref-order-line ref-line-item"><div class="ref-name"></div><span class="ref-price"></span></div>');H.querySelector(".ref-name").textContent=e.discounts.coupon.name||e.discounts.coupon.code.toUpperCase(),H.querySelector(".ref-price").textContent="-"+this.formatMoney(y),E.append(H)}if((v=e.taxes)==null?void 0:v.amount){let H=e.taxes.details,B=H.taxRate,q=u('<div class="ref-order-line ref-line-item"><div class="ref-name"></div><span class="ref-price"></span></div>');q.querySelector(".ref-name").textContent=B.name+" ("+B.rate+"%)"+(H.exemption?" \u2013 "+H.exemption:""),q.querySelector(".ref-price").textContent=this.formatMoney(S),E.append(q)}if(e.gift_card){let H=u('<div class="ref-order-line ref-line-item"><div class="ref-name"></div><span class="ref-price"></span></div>');H.querySelector(".ref-name").textContent="**** **** **** "+e.gift_card.last_4,H.querySelector(".ref-price").textContent="-"+this.formatMoney(e.gift_card.discountAmount),E.append(H)}let F=u(`<div class="ref-order-line ref-line-item">${m("total")} <b><span class="ref-price"></span></b></div>`);F.querySelector(".ref-price").textContent=this.formatMoney(_),E.append(u("<hr>")),E.append(F);let M=i.cloneNode();M.append(E),r.append(M)}this.node.innerHTML="",this.node.append(r)}};C(Mr,"type","order-status");var ys=Mr;var Or=class extends O{constructor(e,r={}){super(e,r);e.innerHTML=`
		<div class="reflow-user-orders">

			<div class="ref-auth-orders-guest">
				<div class="ref-signin-prompt">${m("user_orders.sign_in_prompt")}</div>
				<div class="ref-auth-button" data-reflow-type="auth-button"></div>
			</div>

			<div class="ref-auth-orders-signed">
				<div class="ref-orders"></div>
			</div>

		</div>`,this.authButton=new oe(this.node.querySelector(".ref-auth-button")),this.pagination=new rt(u('<div class="ref-orders-pagination" data-reflow-type="pagination"></div>'),{parent:this})}init(){this.node.addEventListener("click",this.onClick.bind(this)),Reflow.auth.on("signin",({profile:e,isNew:r})=>{this.update()}),Reflow.auth.on("signout",()=>{this.update()}),this.authButton.init(),this.pagination.init()}onClick(e){let r=e.target.closest(".ref-order-link");if(r){let i=r.dataset.orderLink;if(!i)return;window.location=i}}getPage(){let e,r=1;return this.hasDynamicPagination()&&(e=new URL(location.href).searchParams.get("page")),e||this.node.dataset.reflowPage||r}getPerPage(){let e,r=20;return this.hasDynamicPagination()&&(e=new URL(location.href).searchParams.get("per_page")),e||this.node.dataset.reflowPerpage||r}hasDynamicPagination(){let e=this.parseShowString();return e.full||e.pagination}getOrderPageURL(){return this.node.dataset.reflowOrderPageUrl}getCustomerFacingStatus(e){let r="pending",i={failed:"payment_failed",refunded:"refunded",returned:"returned",delivered:"received",ready_for_pickup:"ready_for_pickup",shipped:"shipped",paid:"processed",pending:"pending",unfulfilled:"pending"};for(let s of Object.entries(i))if(s[0]==e.fulfillment_status||s[0]==e.payment_status){r=s[1];break}return r}getAPIEndpoint(){let e=this.getPage(),r=this.getPerPage(),i=`?page=${e}&perpage=${r}`;return"/my/orders/"+i}async fetchData(){if(this.mockData)return this.mockData;let e=this.getAPIEndpoint(),r;try{r=await k(e,{headers:{Authorization:`Bearer ${Reflow.auth.get("key")}`}})}catch(i){throw console.error("Reflow: Unable to fetch user orders"),i.data&&console.error(i.data),i.status==403&&(Reflow.auth.clear(),Reflow.auth.broadcastEvent("signout",{error:"profile_not_found"})),i}return r}async update(){let e=this.node.querySelector(".ref-auth-orders-guest"),r=this.node.querySelector(".ref-auth-orders-signed");if(e.style.display="none",r.style.display="none",Reflow.auth.isSignedIn()){r.style.display="block";let i;try{i=await this.fetchData()}catch(h){throw h}let s=this.node.querySelector(".ref-orders");if(s.innerHTML="",!i||!i.data.length){s.textContent=m("user_orders.empty");return}this.renderTestModeBadge(s);let a=this.parseShowString(),n=this.getOrderPageURL(),o=u(`<div class="ref-orders-table">
				<table>
					<thead><tr></tr></thead>
					<tbody></tbody>
				</table>
			</div>`),l=o.querySelector("thead tr"),c=o.querySelector("tbody"),d;(a.full||a.id)&&(d=document.createElement("td"),d.textContent=g("order"),l.append(d)),(a.full||a.date)&&(d=document.createElement("td"),d.textContent=g("date"),l.append(d)),(a.full||a.status)&&(d=document.createElement("td"),d.textContent=g("status"),l.append(d)),(a.full||a["products-count"])&&(d=document.createElement("td"),d.textContent=g("products"),l.append(d)),(a.full||a.total)&&(d=document.createElement("td"),d.textContent=g("total"),l.append(d)),n&&(d=document.createElement("td"),l.append(d));for(let h of i.data){let p=document.createElement("tr");if((a.full||a.id)&&(d=document.createElement("td"),d.textContent="#"+h.id,p.append(d)),(a.full||a.date)&&(d=document.createElement("td"),d.textContent=new Date(h.created_at*1e3).toLocaleString(),p.append(d)),(a.full||a.status)&&(d=document.createElement("td"),d.textContent=g("order_status."+this.getCustomerFacingStatus(h)),p.append(d)),(a.full||a["products-count"])&&(d=document.createElement("td"),d.textContent=h.products.length,p.append(d)),(a.full||a.total)&&(d=document.createElement("td"),d.textContent=N(h.paid_gross,h.currencyConfig),p.append(d)),n){d=document.createElement("td"),d.textContent="\u203A",p.append(d),p.classList.add("ref-order-link");let v=new URL(n,window.location.href);v.searchParams.set("order_id",h.id),v.searchParams.set("secure_hash",h.secure_hash),p.dataset.orderLink=v.href}c.append(p)}if(s.append(o),a.full||a.pagination){let h=this.pagination.update(i.meta);s.append(h)}}else e.style.display="block",this.authButton.update()}};C(Or,"type","user-orders");var vs=Or;var Br=class extends O{constructor(e,r={}){super(e,r);e.innerHTML=`
		<div class="reflow-user-settings">

			<div class="ref-auth-settings-guest">
				<div class="ref-signin-prompt">${m("user_settings.sign_in_prompt")}</div>
				<div class="ref-auth-button" data-reflow-type="auth-button"></div>
			</div>

			<div class="ref-auth-settings-signed">
				<form class="ref-settings"></form>
			</div>

		</div>`,this.authButton=new oe(this.node.querySelector(".ref-auth-button")),this.shippingAddress={},this.addressWidget=new xe({model:this.shippingAddress,fieldPrefix:"shipping",fields:["address","city","country"],getCountries:()=>[]})}init(){this.node.addEventListener("click",this.onClick.bind(this)),this.node.addEventListener("change",this.onChange.bind(this)),Reflow.auth.on("signin",({profile:e,isNew:r})=>{this.update(!1)}),Reflow.auth.on("profile-refreshed",()=>{this.update(!1)}),Reflow.auth.on("signout",()=>{this.update()}),this.authButton.init()}onClick(e){if(e.target.closest(".ref-submit")){if(!Reflow.auth.isSignedIn())return;let i=this.node.querySelector(".ref-settings");if(!i.checkValidity()){i.reportValidity();return}let s={meta:{}},a=i.querySelector("input[name=ref-profile-photo]");a&&a.files[0]&&(s.photo=a.files[0]);let n=i.querySelector("input[name=ref-profile-name]");n&&(s.name=n.value);let o=i.querySelector("input[name=ref-profile-email]");o&&(s.email=o.value);let l=i.querySelector("input[name=ref-profile-phone]");l&&(s.meta.phone=l.value),i.querySelector(".ref-address-settings")&&(s.meta.address=this.shippingAddress);let d=new $(u('<div data-reflow-type="toast"></div>'),{});d.init(),Reflow.auth.updateProfile(s,h=>{let p="";h.email_update&&!h.email_update.verified&&(p=g("user_settings.profile_update_email_verify_required",{email:h.email_update.new_email})),d.set({type:"success",title:g("user_settings.profile_update_success"),description:p}),d.show()},()=>{d.set({type:"error",title:g("user_settings.profile_update_failed")}),d.show()})}if(e.target.closest(".ref-change-password")){if(!Reflow.auth.isSignedIn())return;let i=new $(u('<div data-reflow-type="toast"></div>'),{});i.init(),Reflow.auth.sendPasswordResetLink().then(s=>{i.set({type:"success",title:g("user_settings.password_reset_link_email_sent",{email:Reflow.auth.profile.email})}),i.show()}).catch(s=>{i.set({type:"error",title:g("user_settings.profile_update_failed")}),i.show()})}}onChange(e){let r=e.target.closest(".ref-photo-input");if(r){let i=r.files[0];if(!i)return;if(i.size>5e6){let a=new $(u('<div data-reflow-type="toast"></div>'),{type:"error",title:"Image size too large. Please upload an image under 5 MB."});a.init(),a.show();return}let s=this.node.querySelector(".ref-settings .ref-profile-photo");s.src=URL.createObjectURL(i)}}async fetchData(e=!0){if(this.mockData)return this.mockData;let r;if(!e)r=Reflow.auth.profile;else try{r=await Reflow.auth.getProfile();let i=await k("/shippable-countries/");this.addressWidget.setGetCountries(()=>i)}catch(i){return console.error("Reflow:",i),null}return r}async update(e=!0){let r=this.node.querySelector(".ref-auth-settings-guest"),i=this.node.querySelector(".ref-auth-settings-signed");if(r.style.display="none",i.style.display="none",Reflow.auth.isSignedIn()){i.style.display="block";let s=await this.fetchData(e);if(!s)return;let a=this.node.querySelector(".ref-settings");a.innerHTML="";let n=this.parseShowString();if(a.append(u(`<div><h4>${m("user_settings.user_settings")}</h4></div>`)),this.renderTestModeBadge(a,"append"),n.full||n.photo){let l=document.createElement("img");l.classList.add("ref-profile-photo"),l.src=s.photo,a.append(l);let c=u(`<div class="ref-setting ref-setting-photo">
					<label>
						<div class="ref-change-photo">${m("user_settings.change_photo")}</div>
						<input type="file" name="ref-profile-photo" class="ref-photo-input" accept="image/*">
					</label>
				</div>`);a.append(c)}if(n.full||n.name){let l=u(`<div class="ref-setting">
					<label>
						<div><b>${m("name")}</b></div>
						<input type="text" name="ref-profile-name" class="ref-form-control" minlength="5" required>
					</label>
				</div>`),c=l.querySelector("input");c.value=s.name,a.append(l)}if(n.full||n.email){let l=u(`<div class="ref-setting">
					<label>
						<div><b>${m("email")}</b></div>
						<input type="email" name="ref-profile-email" class="ref-form-control" required>
					</label>
				</div>`),c=l.querySelector("input");c.value=s.email,a.append(l)}if(n.full||n.phone){let l=u(`<div class="ref-setting">
					<label>
						<div><b>${m("phone")}</b></div>
						<input type="phone" name="ref-profile-phone" class="ref-form-control" pattern="[0-9\\+\\- ]{5,30}">
					</label>
				</div>`),c=l.querySelector("input");c.value=s.meta.phone||"",a.append(l)}if(n.full||n.address){let l=u(`<div class="ref-setting ref-address-settings">
					<div><b>${m("shipping_address")}</b></div>
					<div class="ref-address-holder"></div>
				</div>`),c=s.meta.address||{};Object.assign(this.shippingAddress,c),l.querySelector(".ref-address-holder").append(this.addressWidget.update(!0,!0)),a.append(l)}if(s.provider&&s.provider=="email_password"){let l=u(`<div class="ref-setting ref-change-password">
				<div type="button" class="ref-button ref-change-password">${m("user_settings.change_password")}</div>
			</div>`);a.append(l)}let o=u(`<div type="button" class="ref-button ref-submit">${m("user_settings.save")}</div>`);a.append(o)}else r.style.display="block",this.authButton.update()}};C(Br,"type","user-settings");var bs=Br;var xs=class{constructor(){this.get("expiresAt")<Date.now()&&this.clear(),this._listeners={},this._signInWindow=null,this._authToken=null,"BroadcastChannel"in window&&(this._broadcastChannel=new BroadcastChannel("reflow-auth"),this._broadcastChannel.onmessage=e=>{e.data.type=="signout"&&(this.clear(),this.trigger("signout",{error:e.data.error})),e.data.type=="signin"&&this.trigger("signin",{profile:e.data.profile,isNew:e.data.isNew}),e.data.type=="profile-refreshed"&&this.trigger("profile-refreshed")}),this._messageListener=e=>{!this._signInWindow||e.source===this._signInWindow&&e.data.authToken&&(this._authToken=e.data.authToken)},setInterval(async()=>{this.isSignedIn()&&this.get("refreshAt")<Date.now()&&await this.getProfile()},1e3*60),window.addEventListener("message",this._messageListener)}get(e){let r={};try{r=JSON.parse(localStorage.reflowAuth)}catch(i){}return e?r[e]:r}set(e){let r=this.get();Object.assign(r,e),localStorage.reflowAuth=JSON.stringify(r)}clear(){delete localStorage.reflowAuth}isSignedIn(){return!!this.get("key")}on(e,r){e=e.toLowerCase(),e in this._listeners||(this._listeners[e]=[]),this._listeners[e].push(r)}off(e,r){if(e=e.toLowerCase(),!(e in this._listeners))throw new Error("Unrecognized event name.");if(!this._listeners[e].includes(r))throw new Error("Callback doesn't exist or has aleady been removed.");this._listeners[e].splice(this._listeners[e].indexOf(r),1)}trigger(e,r){if(e in this._listeners)for(let i of this._listeners[e])i(r)}get profile(){return this.get("profile")}scheduleRefresh(){this.set({refreshAt:Date.now()+60*5*1e3})}broadcastEvent(e,r){this.trigger(e,r),this._broadcastChannel&&this._broadcastChannel.postMessage(Gr({type:e},r))}async getProfile(){try{let e=await k("/auth/profile",{headers:{Authorization:`Bearer ${this.get("key")}`}},!1);return this.set({profile:e}),this.broadcastEvent("profile-refreshed"),this.scheduleRefresh(),e}catch(e){throw console.error("Reflow: Unable to fetch profile"),e.data&&console.error(e.data),e.status==403&&(this.clear(),this.broadcastEvent("signout",{error:"profile_not_found"})),e}}async updateProfile(e,r,i){try{let s=new FormData;for(let n in e){if(n==null)continue;let o=e[n];n=="meta"&&(o=JSON.stringify(o)),s.set(n,o)}let a=await k("/auth/profile",{method:"POST",headers:{Authorization:`Bearer ${this.get("key")}`},body:s});return this.set({profile:a.profile}),this.broadcastEvent("profile-refreshed"),this.scheduleRefresh(),r&&r(a),a}catch(s){throw console.error("Reflow: Unable to update profile."),s.data&&console.error(s.data),i&&i(),s.status==403&&(this.clear(),this.broadcastEvent("signout",{error:"profile_not_found"})),s}}async sendPasswordResetLink(){try{return await k("/auth/user/send-reset-password-email",{method:"POST",headers:{Authorization:`Bearer ${this.get("key")}`}})}catch(e){throw console.error("Reflow: Unable to send reset password link email."),e.data&&console.error(e.data),e}}async signIn(e="login"){if(this.isSignedIn()||this._isLoading)return!1;if(this._signInWindow)return this._signInWindow.focus(),!1;let r=590,i=590,s=window.outerHeight/2+window.screenY-i/2,a=window.outerWidth/2+window.screenX-r/2;this._signInWindow=window.open("about:blank","reflow-signin",`width=${r},height=${i},top=${s},left=${a}`);let n;try{if(this._isLoading=!0,n=await k("/auth/urls"),this._isLoading=!1,!n.signinURL)throw new Error("Unable to retrieve the auth URL")}catch(d){throw console.error("Reflow: "+d),d.data&&console.error(d.data),d.error&&console.error(d.error),this._signInWindow.close(),this._signInWindow=null,this._isLoading=!1,d}let o=new URL(n.signinURL),l=new URLSearchParams(o.search);l.append("origin",window.location.origin),l.append("step",e),o.search=l.toString(),this._signInWindow.location=o.toString(),this._checkWindowClosedInterval=setInterval(()=>{this._signInWindow&&this._signInWindow.closed&&(this._signInWindow=null),this._signInWindow||clearInterval(this._checkWindowClosedInterval)},500);let c=document.hasFocus();clearInterval(this._loginCheckInterval),this._loginCheckInterval=setInterval(async()=>{if(this.isSignedIn()){clearInterval(this._loginCheckInterval);return}if(!!this._authToken){if(!c&&document.hasFocus()){c=!0;let d;try{d=await k("/auth/validate-token?auth-token="+this._authToken,{method:"POST"})}catch(h){clearInterval(this._loginCheckInterval);return}d.valid&&(this.set({key:d.session,expiresAt:Date.now()+d.lifetime*1e3,profile:d.profile}),this.trigger("signin",{profile:d.profile,isNew:d.isNew}),this._broadcastChannel&&this._broadcastChannel.postMessage({type:"signin",profile:d.profile,isNew:d.isNew}),this.scheduleRefresh())}c=document.hasFocus()}},250)}async signOut(){if(!this.isSignedIn())return!1;try{await k("/auth/signout",{method:"POST",headers:{Authorization:`Bearer ${this.get("key")}`}})}catch(e){console.error("Reflow: "+e),e.data&&console.error(e.data)}return this.clear(),this.broadcastEvent("signout",{error:!1}),!0}},ws=xs;var $a="en-US",Fa="Shopping Cart",ja="Cart",za="Product",Ga="Products",Va="Order",Qa="Price",Wa="Quantity",Xa="Payment",Za="Name",Ka="Email",Ja="Phone",Ya="Delivery",en="Delivery Information",tn="Shipping",rn="Address",sn="City",an="Country",nn="State",on="Region",ln="Province",dn="Prefecture",cn="Governorate",un="County",hn="Emirate",pn="PIN Code",fn="ZIP Code",mn="Postal Code",gn="Shipping Method",yn="Shipping Address",vn="Pickup at Store",bn="Store",xn="Working Hours",wn="Billing",_n="Billing Name",Cn="Billing Address",Sn="Note",En="Total",Ln="Subtotal",Tn="Free",Pn="Credit Card",kn="Pay on Pickup",An="Out of Stock",In="and",Rn="date",Hn="status",Mn="Apply",On="Remove",Bn="Clear",Dn="Close",Nn="Error",qn="Required",Un="Checkout",$n="Back to Cart",Fn="Update Cart",jn="Complete Order",zn="I agree to the {terms}",Gn="Terms & Conditions",Vn="Privacy Policy",Qn="Refund Policy",Wn="Customer Details",Xn="Shipping and taxes are calculated during checkout.",Zn="Pick up at {store}",Kn="Order Ready for Pickup",Jn="Estimated Delivery",Yn="Select a Store",eo="Add Billing Info",to="Deliver to Address",ro="Not yet selected",io="Select Country",so="Note to Seller",ao="If you have any specific instructions you want to give to the seller, write them here.",no="Save my address for future purchases",oo="Apply a Tax Exemption",lo="Tax Exemption File",co="Attach a document or photo of your tax exemption",uo="Enter your EU VAT number",ho="Tax exemption invalidated",po="The provided tax exemption info could not be applied to the newly selected address.",fo="Enter coupon or gift card code",mo="Coupon added",go="Coupon removed",yo="Gift Card added",vo="Gift Card removed",bo="available balance - {amount}",xo="Order Summary",wo="Show Summary",_o="All prices are in {currency}",Co="{in_stock, plural, =0 {0 items left in stock} other {Only # left in stock.}}",So="Maximum of {max_quantity} per customer",Eo="Unable to load shopping cart.",Lo="Your shopping cart is empty.",To="Couldn't complete checkout.",Po="VAT number is invalid or can't be used in cross-border transactions.",ko="VAT could't be validated.",Ao="Product delivery is not available. Please contact us.",Io="The store is unable to ship your order to this address.",Ro="The code you entered is not valid.",Ho="The code you entered is not valid.",Mo="Only one coupon can be applied.",Oo="Only one gift card can be applied.",Bo="The gift card cannot be applied to the cart. There is a gift card product being purchased",Do="Coupon cannot be applied to any of the products in the cart.",No="Coupon requires a minimum order amount of {amount}.",qo="Coupon has expired.",Uo="One or more products are out of stock.",$o="Only {available} {product} available in the store. There {in_cart, plural, =1 {is} other {are}} {in_cart} in your cart.",Fo="Invalid coupon in cart. Please remove the coupon to continue with checkout.",jo="The products cannot be shipped to the provided address.",zo="The minimum product value for placing an order is {min_val}.",Go="Cart value exceeds supported limits.",Vo="The minimum purchase amount for {product} is at least {min_qty}. There {in_cart, plural, =1 {is} other {are}} {in_cart} in your cart.",Qo="A maximum of {max_qty} {product} can be purchased per customer. {in_cart, plural, =0 {} =1 {There is 1 already in your cart.} other {There are # already in your cart.}}",Wo="{numberItems} left in stock",Xo="This product doesn't exist.",Zo="Product is out of stock.",Ko="Not enough items in stock.",Jo="No products found",Yo="Search",el="Search Products",tl="Add to Cart",rl="Product added to cart.",il="Couldn't add product to cart",sl="See Cart",al="Minimum Per Order is {quantity}",nl="Order #{orderId}",ol="Status",ll="Created",dl="Order Summary",cl="Personalizations",ul="Customer Details",hl="processed",pl="pending",fl="shipped",ml="ready for pickup",gl="received",yl="refunded",vl="canceled",bl="payment failed",xl="returned",wl="Please check your email for order confirmation.",_l="Sign In",Cl="Sign Out",Sl="Register",El="Don't have an account?",Ll="Sign in to view your orders",Tl="No orders found",Pl="User Settings",kl="Sign in to view your profile",Al="Profile Updated",Il="A verification email was sent to {email}. Please follow the link in the email to confirm your new address.",Rl="Profile Update Failed",Hl="Change Photo",Ml="Change Password",Ol="A verification email was sent to {email}. Please follow the link in the email to change your password.",Bl="Save",Dl="The store is temporarily unavailable.",_s={locale:$a,shopping_cart:Fa,cart:ja,product:za,products:Ga,order:Va,price:Qa,quantity:Wa,payment:Xa,name:Za,email:Ka,phone:Ja,delivery:Ya,delivery_information:en,shipping:tn,address:rn,city:sn,country:an,state:nn,region:on,province:ln,prefecture:dn,governorate:cn,county:un,emirate:hn,pin_code:pn,zip_code:fn,postcode:mn,shipping_method:gn,shipping_address:yn,pickup_at_store:vn,store:bn,working_hours:xn,billing:wn,billing_name:_n,billing_address:Cn,note_to_seller:Sn,total:En,subtotal:Ln,price_free:Tn,credit_card:Pn,pay_on_pickup:kn,out_of_stock:An,and:In,date:Rn,status:Hn,apply:Mn,remove:On,clear:Bn,close:Dn,error:Nn,required:qn,"cart.checkout":Un,"cart.back_to_cart":$n,"cart.update":Fn,"cart.complete_order":jn,"cart.terms_agree":zn,"cart.terms_of_service":Gn,"cart.privacy_policy":Vn,"cart.refund_policy":Qn,"cart.customer_details":Wn,"cart.subtotal_only":Xn,"cart.pickup_at_store":Zn,"cart.order_ready_for_pickup_label":Kn,"cart.estimated_delivery":Jn,"cart.select_store":Yn,"cart.add_billing":eo,"cart.deliver_to_address":to,"cart.shipping_not_selected":ro,"cart.select_country":io,"cart.note_to_seller":so,"cart.note_to_seller_placeholder":ao,"cart.save_address":no,"cart.tax_exemption_add":oo,"cart.tax_exemption_file":lo,"cart.tax_exemption_file_prompt":co,"cart.tax_exemption_number_prompt":uo,"cart.tax_exemption_cleared":ho,"cart.tax_exemption_cleared_details":po,"cart.discount_code_placeholder":fo,"cart.coupon_added":mo,"cart.coupon_removed":go,"cart.gift_card_added":yo,"cart.gift_card_removed":vo,"cart.gift_card_balance":bo,"cart.order_summary":xo,"cart.show_summary":wo,"cart.prices_currency_description":_o,"cart.left_in_stock":Co,"cart.max_product_qty":So,"cart.errors.unavailable":Eo,"cart.errors.empty":Lo,"cart.errors.cannot_complete":To,"cart.errors.vat_number_invalid":Po,"cart.errors.vat_number_validation_fail":ko,"cart.errors.delivery_unavailable":Ao,"cart.errors.address_not_supported":Io,"cart.errors.invalid_discount_code":Ro,"cart.errors.coupon_invalid_code":Ho,"cart.errors.coupon_already_applied":Mo,"cart.errors.gift_card_already_applied":Oo,"cart.errors.cannot_apply_gift_card_to_cart_with_giftcard":Bo,"cart.errors.coupon_no_matching_products":Do,"cart.errors.coupon_min_amount":No,"cart.errors.coupon_expired":qo,"cart.errors.out_of_stock":Uo,"cart.errors.unavailable_quantity":$o,"cart.errors.invalid_coupon":Fo,"cart.errors.cannot_ship":jo,"cart.errors.min_val_not_reached":zo,"cart.errors.max_val_exceeded":Go,"cart.errors.product_min_qty_not_reached":Vo,"cart.errors.product_max_qty_exceeded":Qo,"product.left_in_stock":Wo,"product.missing":Xo,"product.out_of_stock":Zo,"product.unavailable_quantity":Ko,"product_list.empty":Jo,"product_search.button":Yo,"product_search.placeholder":el,"add_to_cart.button_text":tl,"add_to_cart.success":rl,"add_to_cart.error":il,"add_to_cart.see_cart":sl,"add_to_cart.min_quantity_per_order":al,"order_status.order":nl,"order_status.status":ol,"order_status.created":ll,"order_status.order_summary":dl,"order_status.product_personalizations":cl,"order_status.customer_details":ul,"order_status.processed":hl,"order_status.pending":pl,"order_status.shipped":fl,"order_status.ready_for_pickup":ml,"order_status.received":gl,"order_status.refunded":yl,"order_status.canceled":vl,"order_status.payment_failed":bl,"order_status.returned":xl,"order_status.check_email":wl,"auth.sign_in":_l,"auth.sign_out":Cl,"auth.register":Sl,"auth.prompt_register":El,"user_orders.sign_in_prompt":Ll,"user_orders.empty":Tl,"user_settings.user_settings":Pl,"user_settings.sign_in_prompt":kl,"user_settings.profile_update_success":Al,"user_settings.profile_update_email_verify_required":Il,"user_settings.profile_update_failed":Rl,"user_settings.change_photo":Hl,"user_settings.change_password":Ml,"user_settings.password_reset_link_email_sent":Ol,"user_settings.save":Bl,store_unavailable:Dl};var Cs="2.0.0";var De=document.currentScript,Dr=parseInt(De.getAttribute("data-reflow-project")||De.getAttribute("data-reflow-store"),10),Ss=!!De.getAttribute("data-reflow-dev"),Es=De.getAttribute("data-reflow-locale"),Ls=De.getAttribute("data-testmode");document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ts):Ts();async function Ts(){if(!(!Dr&&(console.error("Reflow: Invalid Project ID"),!Ss))){if("Reflow"in window){console.error("Reflow: window.Reflow already exists");return}window.Reflow={APIURL:"https://api.reflowhq.com/v1",projectID:Dr,version:Cs,cart:new ts,scan:ks,api:k,auth:new ws,locales:_s,testmode:!1},Es&&await fetch(Es).then(t=>t.json()).then(t=>ji(t)).then(t=>Object.assign(window.Reflow.locales,t)).catch(t=>console.error("Reflow: unable to load localization file")),Ls&&Ls=="true"&&(Reflow.testmode=!0,Reflow.APIURL=Reflow.APIURL.replace("api.","test-api.")),setTimeout(()=>{document.dispatchEvent(new Event("reflow-ready",{cancelable:!0}))&&ks(Ss)},0)}}var Ps=new WeakSet;function ks(t=!1){let e=[];e.push(...tt.scan()),e.push(...Xi.scan()),e.push(...Zi.scan()),e.push(...Ki.scan()),e.push(...Gi.scan()),e.push(...et.scan()),e.push(...ys.scan()),e.push(...Ji.scan()),e.push(...oe.scan()),e.push(...vs.scan()),e.push(...bs.scan()),e.length>10&&console.warn("Reflow: Only the first 10 components on this page will be rendered, the rest will be ignored."),e=e.slice(0,10);for(let r of e)if(!Ps.has(r.node)){if(Ps.add(r.node),r.init(),t&&!Dr){r.node.innerHTML="No Reflow Project ID provided.";continue}r.update().catch(i=>console.error("Reflow:",i))}}})();